import{a as lt}from"./chunk-T2RYCGX3.js";import{a as rt}from"./chunk-WXMXMCHO.js";import{a as st}from"./chunk-JHFRRPN6.js";import{a as at}from"./chunk-5STMSNPF.js";import{a as X,c as Z,e as tt,j as et,k as it,n as nt}from"./chunk-RG37TT4Q.js";import{a as ot}from"./chunk-PBTFW77J.js";import{a as Q}from"./chunk-QQWCK2ZL.js";import{e as W,f as G}from"./chunk-7BQHTMQB.js";import{j,k as q,p as H,w as J}from"./chunk-VUYFDMJB.js";import{A as D,Bb as V,Ga as A,I as R,La as _,S as E,X as g,Xa as c,Y as u,Ya as n,Za as o,_a as C,cb as N,db as K,eb as S,f as k,fa as b,hb as f,ib as m,jb as x,lb as P,nb as r,ob as v,pb as I,rb as $,sb as U,ta as O,tb as B,ua as s,vb as Y,x as F}from"./chunk-CVFHM34U.js";import"./chunk-X5YLR3NI.js";import{a as z,i as h}from"./chunk-ODN5LVDJ.js";var dt=()=>["/soggetti/nuovo","prospect"];function mt(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m();s(),v(e.totalProspectCount())}}function gt(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m();s(),v(e.kpi().senzaContatto)}}function ut(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m();s(),v(e.kpi().daRichiamare)}}function ft(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m();s(),v(e.kpi().configurati)}}function _t(a,t){a&1&&C(0,"span",45)}function vt(a,t){if(a&1&&(n(0,"option",46),r(1),o()),a&2){let e=t.$implicit;c("value",e),s(),v(e)}}function ht(a,t){if(a&1&&(n(0,"option",46),r(1),o()),a&2){let e=t.$implicit;c("value",e),s(),v(e)}}function St(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m().$implicit;s(),v(e.comune)}}function xt(a,t){if(a&1&&(n(0,"span"),r(1),o()),a&2){let e=m().$implicit;s(),I(" (",e.provincia,")")}}function Pt(a,t){a&1&&(n(0,"span",68),r(1," Nessun indirizzo "),o())}function wt(a,t){a&1&&(n(0,"span",69),r(1,"S\xEC"),o())}function Et(a,t){a&1&&(n(0,"span",70),r(1,"No"),o())}function bt(a,t){if(a&1&&(N(0),n(1,"span"),r(2),o(),K()),a&2){let e=t.ngIf;s(2),v(e.tipo)}}function Ct(a,t){a&1&&r(0,"\u2014")}function It(a,t){if(a&1){let e=S();n(0,"button",71),f("click",function(l){g(e);let d=m().$implicit,p=m();return l.stopPropagation(),u(p.vediConfigurazionePromethea(d))}),C(1,"img",72),o()}}function yt(a,t){if(a&1){let e=S();n(0,"button",73),f("click",function(l){g(e);let d=m().$implicit,p=m();return l.stopPropagation(),u(p.vediTrattativaYuvi(d))}),C(1,"img",74),o()}}function Tt(a,t){if(a&1){let e=S();n(0,"div",75)(1,"div",76)(2,"button",77),f("click",function(l){g(e);let d=m().$implicit,p=m();return l.stopPropagation(),p.onEdit(d),u(p.activeDropdownId=null)}),n(3,"span",15),r(4,"edit"),o(),n(5,"span"),r(6,"Modifica"),o()(),n(7,"button",77),f("click",function(l){g(e);let d=m().$implicit,p=m();return l.stopPropagation(),p.openEsito(d),u(p.activeDropdownId=null)}),n(8,"span",15),r(9,"add"),o(),n(10,"span"),r(11,"Aggiungi esito"),o()(),n(12,"button",78),f("click",function(l){g(e);let d=m().$implicit,p=m();return l.stopPropagation(),p.onDelete(d),u(p.activeDropdownId=null)}),n(13,"span",15),r(14,"delete"),o(),n(15,"span"),r(16,"Elimina"),o()()()()}if(a&2){let e=m().$implicit,i=m();s(12),c("disabled",i.deletingIds.has(e.id))}}function Lt(a,t){if(a&1){let e=S();n(0,"tr")(1,"td",47)(2,"div",48)(3,"strong"),r(4),o()()(),n(5,"td",49)(6,"div",48),r(7),o()(),n(8,"td",50)(9,"div",48),r(10),o()(),n(11,"td",51)(12,"div",48),_(13,St,2,1,"span",41)(14,xt,2,1,"span",41)(15,Pt,2,0,"span",52),o()(),n(16,"td",53)(17,"div",48),_(18,wt,2,0,"span",54)(19,Et,2,0,"span",55),o()(),n(20,"td",56)(21,"div",48),_(22,bt,3,1,"ng-container",20)(23,Ct,1,0,"ng-template",null,4,V),o()(),n(25,"td",57)(26,"div",48)(27,"select",58,5),f("change",function(){let l=g(e).$implicit,d=x(28),p=m();return u(p.onChangeProdotto(l,d.value))}),n(29,"option",59),r(30,"Promethea"),o(),n(31,"option",60),r(32,"YUVI"),o()()()(),n(33,"td",61)(34,"div",62),_(35,It,2,0,"button",63)(36,yt,2,0,"button",64),n(37,"div",65)(38,"button",66),f("click",function(l){let d=g(e).$implicit,p=m();return l.stopPropagation(),u(p.toggleActionsDropdown(d.id))}),n(39,"span",15),r(40,"more_vert"),o()(),_(41,Tt,17,1,"div",67),o()()()()}if(a&2){let e=t.$implicit,i=x(24),l=m();s(4),v(e.ragione_sociale),s(3),v(e.referente||"\u2014"),s(3),v(e.telefono||"\u2014"),s(3),c("ngIf",e.comune),s(),c("ngIf",e.provincia),s(),c("ngIf",!e.comune&&!e.provincia),s(3),c("ngIf",e.configurato),s(),c("ngIf",!e.configurato),s(3),c("ngIf",e.ultimoEsito)("ngIfElse",i),s(5),c("value",e.prodotto)("disabled",l.updatingProdottoIds.has(e.id)),s(8),c("ngIf",e.hasConfigPromethea),s(),c("ngIf",e.hasTrattativaYuvi),s(),P("open",l.activeDropdownId===e.id),s(4),c("ngIf",l.activeDropdownId===e.id)}}function kt(a,t){if(a&1&&(n(0,"tr")(1,"td",79),r(2),o()()),a&2){let e=m();s(2),I(" ",e.searchTerm?"Nessun prospect trovato":"Nessun prospect"," ")}}function Vt(a,t){a&1&&(n(0,"span",15),r(1,"expand_more"),o())}function Mt(a,t){a&1&&(n(0,"span",15),r(1,"hourglass_bottom"),o())}function zt(a,t){if(a&1){let e=S();n(0,"div",80)(1,"button",81),f("click",function(){g(e);let l=m();return u(l.loadMore())}),_(2,Vt,2,0,"span",82)(3,Mt,2,0,"span",82),r(4),o()()}if(a&2){let e=m();s(),c("disabled",e.loading()),s(),c("ngIf",!e.loading()),s(),c("ngIf",e.loading()),s(),I(" ",e.loading()?"Caricamento\u2026":"Carica altri"," ")}}function Ft(a,t){if(a&1&&(n(0,"div",83),r(1),o()),a&2){let e=m();s(),I(" ",e.error()," ")}}var ct=class a{listaService=E(rt);soggettiService=E(ot);authService=E(J);userService=E(Q);router=E(W);searchSubject=new k;destroy$=new k;rows=this.listaService.rows;filteredRows=this.listaService.filteredRows;loading=this.listaService.loading;error=this.listaService.error;hasMore=this.listaService.hasMore;currentFiltri=this.listaService.currentFiltri;province=b([]);kpiLoading=b(!1);kpi=b({senzaContatto:0,daRichiamare:0,configurati:0});totalProspectCount=b(0);deletingIds=new Set;showEsito=!1;selectedId=null;updatingProdottoIds=new Set;activeDropdownId=null;esitiTipi=st;searchTerm="";filtroConfigurato=null;isLoading=b(!0);constructor(){this.searchSubject.pipe(R(this.destroy$),F(300),D()).subscribe(t=>{this.onSearchExecuted(t)})}ngOnInit(){return h(this,null,function*(){console.log("\u{1F680} Lista Prospect - START"),this.isLoading.set(!0),yield this.authService.getAuthState();let t=this.authService.user();if(console.log("\u{1F464} User after auth:",{id:t?.id,email:t?.email}),!t){console.error("\u274C Nessun utente autenticato!"),this.isLoading.set(!1);return}let e=this.userService.isAdmin();console.log("\u{1F511} Admin status:",e),this.listaService.inizializza({tipo:"prospect",abilitaConfigurazioni:!0,abilitaTrattative:!0}),console.log("\u2699\uFE0F Servizio inizializzato");try{console.log("\u{1F4CA} Inizio caricamento dati..."),yield this.listaService.caricaAltri(!0);let i=this.rows(),l=this.filteredRows();console.log("\u{1F4C4} Dati caricati:",{totalRows:i.length,filteredRows:l.length,firstRow:i[0]?.ragione_sociale||"N/A"}),yield Promise.all([this.loadProvince(),this.loadTotalKPI()]),console.log("\u2705 Init completato")}catch(i){console.error("\u274C Errore durante init:",i),this.refreshLocalKPI()}finally{setTimeout(()=>{this.isLoading.set(!1)},300)}})}refreshData(){return h(this,null,function*(){try{yield this.listaService.caricaAltri(!0),yield this.loadTotalKPI()}catch(t){console.error("\u274C Errore refresh data:",t),this.refreshLocalKPI()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMore(t=!1){return h(this,null,function*(){yield this.listaService.caricaAltri(t)})}onSearchExecuted(t){return h(this,null,function*(){yield this.listaService.cerca(t)})}onSearchChange(t){this.searchTerm=t,this.searchSubject.next(t)}onChangeFiltroEsito(t){this.listaService.applicaFiltri({esito:t,configurato:null}),this.filtroConfigurato=null}onChangeFiltroProvincia(t){this.listaService.applicaFiltri({provincia:t})}onChangeSortDir(t){this.listaService.applicaFiltri({sortDir:t})}onFiltroTotale(){this.listaService.applicaFiltri({esito:"tutti",provincia:"tutte",configurato:null}),this.filtroConfigurato=null}onFiltroSenzaContatto(){this.listaService.applicaFiltri({esito:"senza-esito",configurato:null}),this.filtroConfigurato=null}onFiltroDaRichiamare(){this.listaService.applicaFiltri({esito:"Richiamare",configurato:null}),this.filtroConfigurato=null}onFiltroConfigurati(){this.listaService.applicaFiltri({esito:"tutti",configurato:!0}),this.filtroConfigurato=!0}vediConfigurazionePromethea(t){this.router.navigate(["/alchemizzatore"],{queryParams:{prospectId:t.id,step:6}})}vediTrattativaYuvi(t){return h(this,null,function*(){try{let{data:e,error:i}=yield this.soggettiService.supabaseService.supabase.from("trattative_yuvi").select("*").eq("prospect_id",t.id).order("created_at",{ascending:!1}).limit(1).single();if(i)throw i;if(!e){alert("Nessuna trattativa YUVI trovata per questo prospect");return}this.router.navigate(["/yuvi-trattativa"],{queryParams:{prospectId:t.id,trattativaId:e.id,step:7},state:{prospect:t,trattativaEsistente:e,from:"lista-prospect"}})}catch(e){alert("Errore nel caricamento della trattativa: "+e.message)}})}onDelete(t){return h(this,null,function*(){if(!(!t?.id||!confirm(`Eliminare il prospect "${t.ragione_sociale}"?`))){this.deletingIds.add(t.id);try{(yield this.listaService.eliminaSoggetto(t.id))&&(yield this.loadTotalKPI())}catch(i){console.error("Errore durante l'eliminazione:",i)}finally{this.deletingIds.delete(t.id)}}})}onEdit(t){t?.id&&this.router.navigate(["/soggetti/modifica",t.id])}openEsito(t){this.selectedId=t.id,this.showEsito=!0}onPopupClosed(t){return h(this,null,function*(){this.showEsito=!1,this.selectedId=null,t.saved&&(yield Promise.all([this.listaService.caricaAltri(!0),this.loadTotalKPI()]))})}onChangeProdotto(t,e){return h(this,null,function*(){if(!t?.id)return;let i=e;if(t.prodotto!==i){this.updatingProdottoIds.add(t.id);try{yield this.listaService.aggiornaProdotto(t.id,i)}catch(l){console.error("Errore durante l'aggiornamento del prodotto:",l)}finally{this.updatingProdottoIds.delete(t.id)}}})}trackById=(t,e)=>e.id;toggleActionsDropdown(t){let e=this.activeDropdownId===t;this.activeDropdownId=e?null:t;let i=document.querySelector(".table-container");i&&(this.activeDropdownId?i.classList.add("dropdown-open"):i.classList.remove("dropdown-open"))}closeDropdown(t){t.target.closest(".actions-dropdown")||(this.activeDropdownId=null)}loadProvince(){return h(this,null,function*(){let{data:t}=yield this.soggettiService.getProvinceByTipo("prospect");t&&this.province.set(t)})}loadTotalKPI(){return h(this,null,function*(){this.kpiLoading.set(!0);try{let e=(yield this.soggettiService.countByTipo("prospect")).data||0;if(this.totalProspectCount.set(e),e===0){this.kpi.set({senzaContatto:0,daRichiamare:0,configurati:0});return}let{data:i,error:l}=yield this.soggettiService.getSoggettiByTipo("prospect",0,Math.max(e,1e3));if(l)throw console.warn("\u26A0\uFE0F Errore caricamento prospect per KPI:",l),l;if(!i||i.length===0){this.kpi.set({senzaContatto:0,daRichiamare:0,configurati:0});return}let d=i.map(w=>w.id).filter(w=>!!w);if(d.length===0){this.kpi.set({senzaContatto:0,daRichiamare:0,configurati:0});return}let[p,Dt]=yield Promise.all([this.soggettiService.getConfigurazioniPrometheaByCliente(d),this.soggettiService.getTrattativeYuviByProspect(d)]),y=0,T=0,L=0;i.forEach(w=>{let M=this.getLastEsito(w.esiti),pt=p.get(w.id)||!1;M||y++,M?.tipo==="Richiamare"&&T++,pt&&L++}),this.kpi.set({senzaContatto:y,daRichiamare:T,configurati:L}),console.log("\u2705 KPI calcolati:",{total:e,senzaContatto:y,daRichiamare:T,configurati:L,prospectProcessati:i.length})}catch(t){console.error("\u274C Errore nel caricamento KPI totali:",t),this.refreshLocalKPI()}finally{this.kpiLoading.set(!1)}})}refreshLocalKPI(){console.log("\u{1F504} Usando KPI locali come fallback...");let t=this.rows();if(t.length===0){let i=this.kpi();i.senzaContatto===0&&i.daRichiamare===0&&i.configurati===0&&(this.totalProspectCount.set(0),this.kpi.set({senzaContatto:0,daRichiamare:0,configurati:0}));return}let e={senzaContatto:t.filter(i=>!i.ultimoEsito).length,daRichiamare:t.filter(i=>i.ultimoEsito?.tipo==="Richiamare").length,configurati:t.filter(i=>i.configurato).length};this.totalProspectCount.set(t.length),this.kpi.set(e),console.log("\u{1F4CA} KPI locali:",z({totalLocal:t.length},e))}getLastEsito(t){return!Array.isArray(t)||t.length===0?null:t.reduce((e,i)=>{let l=new Date(i.ts).getTime(),d=new Date(e.ts).getTime();return l>d?i:e})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=A({type:a,selectors:[["app-lista-prospect"]],hostBindings:function(e,i){e&1&&f("click",function(d){return i.closeDropdown(d)},O)},decls:105,vars:35,consts:[["loadingSpinner",""],["filtroSel",""],["ordinaSel",""],["provSel",""],["noEsito",""],["sel",""],["title","Caricamento Prospect","subtitle","Stiamo caricando i tuoi prospect...",3,"isLoading"],[1,"form-section"],[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"sottotitolo"],[1,"flex-1"],["title","Aggiungi prospect","aria-label","Aggiungi prospect",1,"icon-btn",3,"routerLink"],[1,"material-icons"],[1,"prospect-cards"],[1,"card",3,"click"],[1,"card-title"],[1,"card-number"],[4,"ngIf","ngIfElse"],[1,"table-section"],[1,"table-tools"],[1,"tool"],["for","search",1,"label"],["id","search","type","text","placeholder","Nome, telefono, email...",1,"table-inline-input",3,"ngModelChange","ngModel"],["for","filtroEsito",1,"label"],["id","filtroEsito",1,"table-inline-select",3,"change","value"],["value","tutti"],["value","senza-esito"],[3,"value",4,"ngFor","ngForOf"],["for","ordinaPer",1,"label"],["id","ordinaPer",1,"table-inline-select",3,"change","value"],["value","desc"],["value","asc"],["for","filtroProvincia",1,"label"],["id","filtroProvincia",1,"table-inline-select",3,"change","value"],["value","tutte"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","load-more-container",4,"ngIf"],["style","text-align:center; color:#ef4444; margin-top:1rem;",4,"ngIf"],[3,"closed","open","soggettoId","tipo"],[1,"loading-spinner"],[3,"value"],["data-label","Ragione Sociale"],[1,"cell-content"],["data-label","Referente"],["data-label","Telefono"],["data-label","Localit\xE0"],["style","color: #6b7280; font-style: italic;",4,"ngIf"],["data-label","Configurato"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["data-label","Ultimo Esito"],["data-label","Prodotto"],[1,"table-inline-select",3,"change","value","disabled"],["value","Promethea"],["value","YUVI"],["data-label","Azioni"],[1,"actions-container"],["class","action-btn document","title","Configurazione Promethea",3,"click",4,"ngIf"],["class","action-btn email","title","Trattativa YUVI",3,"click",4,"ngIf"],[1,"actions-dropdown"],["title","Altre azioni",1,"action-btn",3,"click"],["class","modal","style",`position: absolute; top: calc(100% + 8px); right: 0; 
                            width: 180px; transform: none; left: auto; 
                            max-height: none; overflow: visible;`,4,"ngIf"],[2,"color","#6b7280","font-style","italic"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["title","Configurazione Promethea",1,"action-btn","document",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img"],["title","Trattativa YUVI",1,"action-btn","email",3,"click"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img"],[1,"modal",2,"position","absolute","top","calc(100% + 8px)","right","0","width","180px","transform","none","left","auto","max-height","none","overflow","visible"],[1,"modal-body",2,"padding","0"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",2,"color","#ef4444",3,"click","disabled"],["colspan","8",2,"text-align","center","padding","1.5rem"],[1,"load-more-container"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],[2,"text-align","center","color","#ef4444","margin-top","1rem"]],template:function(e,i){if(e&1){let l=S();C(0,"app-page-loader",6),n(1,"div")(2,"div",7)(3,"div",8)(4,"i",9),r(5,"group"),o(),n(6,"div",10)(7,"h2",11),r(8,"Prospect"),o(),n(9,"p",12),r(10,"Panoramica prospect e filtri rapidi"),o()(),C(11,"div",13),n(12,"a",14)(13,"span",15),r(14,"add_circle"),o()()(),n(15,"div",16)(16,"div",17),f("click",function(){return g(l),u(i.onFiltroTotale())}),n(17,"h3",18),r(18,"Totale"),o(),n(19,"div",19),_(20,mt,2,1,"span",20),o()(),n(21,"div",17),f("click",function(){return g(l),u(i.onFiltroSenzaContatto())}),n(22,"h3",18),r(23,"Senza Contatto"),o(),n(24,"div",19),_(25,gt,2,1,"span",20),o()(),n(26,"div",17),f("click",function(){return g(l),u(i.onFiltroDaRichiamare())}),n(27,"h3",18),r(28,"Da Richiamare"),o(),n(29,"div",19),_(30,ut,2,1,"span",20),o()(),n(31,"div",17),f("click",function(){return g(l),u(i.onFiltroConfigurati())}),n(32,"h3",18),r(33,"Configurati"),o(),n(34,"div",19),_(35,ft,2,1,"span",20),o()(),_(36,_t,1,0,"ng-template",null,0,V),o()(),n(38,"section",21)(39,"div",22)(40,"div",23)(41,"label",24)(42,"span",15),r(43,"search"),o(),r(44," Cerca "),o(),n(45,"input",25),B("ngModelChange",function(p){return g(l),U(i.searchTerm,p)||(i.searchTerm=p),u(p)}),f("ngModelChange",function(p){return g(l),u(i.onSearchChange(p))}),o()(),n(46,"div",23)(47,"label",26)(48,"span",15),r(49,"filter_list"),o(),r(50," Ultimo esito "),o(),n(51,"select",27,1),f("change",function(){g(l);let p=x(52);return u(i.onChangeFiltroEsito(p.value))}),n(53,"option",28),r(54,"Tutti"),o(),n(55,"option",29),r(56,"Senza esito"),o(),_(57,vt,2,2,"option",30),o()(),n(58,"div",23)(59,"label",31)(60,"span",15),r(61,"sort"),o(),r(62," Ordina per: "),o(),n(63,"select",32,2),f("change",function(){g(l);let p=x(64);return u(i.onChangeSortDir(p.value))}),n(65,"option",33),r(66,"Pi\xF9 recente"),o(),n(67,"option",34),r(68,"Meno recente"),o()()(),n(69,"div",23)(70,"label",35)(71,"span",15),r(72,"place"),o(),r(73," Provincia "),o(),n(74,"select",36,3),f("change",function(){g(l);let p=x(75);return u(i.onChangeFiltroProvincia(p.value))}),n(76,"option",37),r(77,"Tutte"),o(),_(78,ht,2,2,"option",30),o()()(),n(79,"div",38)(80,"table",39)(81,"thead")(82,"tr")(83,"th"),r(84,"Ragione Sociale"),o(),n(85,"th"),r(86,"Referente"),o(),n(87,"th"),r(88,"Telefono"),o(),n(89,"th"),r(90,"Localit\xE0"),o(),n(91,"th"),r(92,"Configurato"),o(),n(93,"th"),r(94,"Ultimo Esito"),o(),n(95,"th"),r(96,"Prodotto"),o(),n(97,"th"),r(98,"Azioni"),o()()(),n(99,"tbody"),_(100,Lt,42,17,"tr",40)(101,kt,3,1,"tr",41),o()()(),_(102,zt,5,4,"div",42)(103,Ft,2,1,"div",43),o(),n(104,"app-esito-popup",44),f("closed",function(p){return g(l),u(i.onPopupClosed(p))}),o()()}if(e&2){let l=x(37);c("isLoading",i.isLoading()),s(),P("hidden",i.isLoading()),s(11),c("routerLink",Y(34,dt)),s(4),P("card-active",i.currentFiltri().esito==="tutti"&&i.filtroConfigurato===null),s(4),c("ngIf",!i.kpiLoading())("ngIfElse",l),s(),P("card-active",i.currentFiltri().esito==="senza-esito"),s(4),c("ngIf",!i.kpiLoading())("ngIfElse",l),s(),P("card-active",i.currentFiltri().esito==="Richiamare"),s(4),c("ngIf",!i.kpiLoading())("ngIfElse",l),s(),P("card-active",i.filtroConfigurato===!0),s(4),c("ngIf",!i.kpiLoading())("ngIfElse",l),s(10),$("ngModel",i.searchTerm),s(6),c("value",i.currentFiltri().esito),s(6),c("ngForOf",i.esitiTipi),s(6),c("value",i.currentFiltri().sortDir),s(11),c("value",i.currentFiltri().provincia),s(4),c("ngForOf",i.province()),s(22),c("ngForOf",i.filteredRows())("ngForTrackBy",i.trackById),s(),c("ngIf",!i.loading()&&!i.error()&&i.filteredRows().length===0),s(),c("ngIf",!i.error()&&i.hasMore()),s(),c("ngIf",i.error()),s(),c("open",i.showEsito)("soggettoId",i.selectedId)("tipo","prospect")}},dependencies:[H,j,q,lt,nt,et,it,X,Z,tt,G,at],styles:[".actions-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-flex}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:var(--gutter-sm);padding:.75rem 1rem;border:none;background:transparent;color:var(--text-color);cursor:pointer;transition:background .15s ease;font-size:var(--fs-sm);text-align:left;border-bottom:1px solid var(--smoke-color-1)}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2)}.dropdown-item[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.dropdown-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1rem}@container (max-width: 768px){.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:static!important;width:100%!important;transform:none!important;box-shadow:none!important;border:1px solid var(--smoke-color-1)!important;border-radius:12px!important;margin-top:var(--gutter-sm)!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]{width:100%}}"]})};export{ct as ListaProspect};
