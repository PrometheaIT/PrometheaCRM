import{a as nt}from"./chunk-Y7LHWTRZ.js";import{a as it}from"./chunk-JHFRRPN6.js";import{a as et}from"./chunk-AWKB45VE.js";import{a as W,c as G,e as J,j as Q,k as X,o as Z}from"./chunk-QHMRLWV2.js";import{a as tt}from"./chunk-MYIP52J4.js";import{d as j,e as q}from"./chunk-A73PPQIR.js";import"./chunk-7VD3EVFT.js";import{j as U,k as K,p as H}from"./chunk-CSZ7WPY7.js";import{A as V,Aa as y,Ga as F,I as R,La as E,X as f,Xa as d,Y as _,Ya as n,Za as o,_a as C,bb as D,cb as O,db as w,f as T,gb as h,hb as m,ib as x,kb as S,mb as r,nb as v,ob as b,qb as Y,rb as N,sb as $,ta as z,ua as l,ub as A,x as M,zb as B}from"./chunk-QS6MTI54.js";import"./chunk-X5YLR3NI.js";import{i as P}from"./chunk-ODN5LVDJ.js";var st=()=>["/soggetti/nuovo","prospect"];function lt(s,t){if(s&1&&(n(0,"option",42),r(1),o()),s&2){let e=t.$implicit;d("value",e),l(),v(e)}}function ct(s,t){if(s&1&&(n(0,"option",42),r(1),o()),s&2){let e=t.$implicit;d("value",e),l(),v(e)}}function pt(s,t){if(s&1&&(n(0,"span"),r(1),o()),s&2){let e=m().$implicit;l(),v(e.comune)}}function dt(s,t){if(s&1&&(n(0,"span"),r(1),o()),s&2){let e=m().$implicit;l(),b(" (",e.provincia,")")}}function mt(s,t){s&1&&(n(0,"span",65),r(1," Nessun indirizzo "),o())}function gt(s,t){s&1&&(n(0,"span",66),r(1,"S\xEC"),o())}function ut(s,t){s&1&&(n(0,"span",67),r(1,"No"),o())}function ft(s,t){if(s&1&&(D(0),n(1,"span"),r(2),o(),O()),s&2){let e=t.ngIf;l(2),v(e.tipo)}}function _t(s,t){s&1&&r(0,"\u2014")}function ht(s,t){if(s&1){let e=w();n(0,"button",68),h("click",function(a){f(e);let c=m().$implicit,p=m();return a.stopPropagation(),_(p.vediConfigurazionePromethea(c))}),C(1,"img",69),o()}}function vt(s,t){if(s&1){let e=w();n(0,"button",70),h("click",function(a){f(e);let c=m().$implicit,p=m();return a.stopPropagation(),_(p.vediTrattativaYuvi(c))}),C(1,"img",71),o()}}function Et(s,t){if(s&1){let e=w();n(0,"div",72)(1,"div",73)(2,"button",74),h("click",function(a){f(e);let c=m().$implicit,p=m();return a.stopPropagation(),p.onEdit(c),_(p.activeDropdownId=null)}),n(3,"span",13),r(4,"edit"),o(),n(5,"span"),r(6,"Modifica"),o()(),n(7,"button",74),h("click",function(a){f(e);let c=m().$implicit,p=m();return a.stopPropagation(),p.openEsito(c),_(p.activeDropdownId=null)}),n(8,"span",13),r(9,"add"),o(),n(10,"span"),r(11,"Aggiungi esito"),o()(),n(12,"button",75),h("click",function(a){f(e);let c=m().$implicit,p=m();return a.stopPropagation(),p.onDelete(c),_(p.activeDropdownId=null)}),n(13,"span",13),r(14,"delete"),o(),n(15,"span"),r(16,"Elimina"),o()()()()}if(s&2){let e=m().$implicit,i=m();l(12),d("disabled",i.deletingIds.has(e.id))}}function Pt(s,t){if(s&1){let e=w();n(0,"tr")(1,"td",43)(2,"div",44)(3,"strong"),r(4),o()()(),n(5,"td",45)(6,"div",44),r(7),o()(),n(8,"td",46)(9,"div",44),r(10),o()(),n(11,"td",47)(12,"div",44),E(13,pt,2,1,"span",38)(14,dt,2,1,"span",38)(15,mt,2,0,"span",48),o()(),n(16,"td",49)(17,"div",44),E(18,gt,2,0,"span",50)(19,ut,2,0,"span",51),o()(),n(20,"td",52)(21,"div",44),E(22,ft,3,1,"ng-container",53)(23,_t,1,0,"ng-template",null,3,B),o()(),n(25,"td",54)(26,"div",44)(27,"select",55,4),h("change",function(){let a=f(e).$implicit,c=x(28),p=m();return _(p.onChangeProdotto(a,c.value))}),n(29,"option",56),r(30,"Promethea"),o(),n(31,"option",57),r(32,"YUVI"),o()()()(),n(33,"td",58)(34,"div",59),E(35,ht,2,0,"button",60)(36,vt,2,0,"button",61),n(37,"div",62)(38,"button",63),h("click",function(a){let c=f(e).$implicit,p=m();return a.stopPropagation(),_(p.toggleActionsDropdown(c.id))}),n(39,"span",13),r(40,"more_vert"),o()(),E(41,Et,17,1,"div",64),o()()()()}if(s&2){let e=t.$implicit,i=x(24),a=m();l(4),v(e.ragione_sociale),l(3),v(e.referente||"\u2014"),l(3),v(e.telefono||"\u2014"),l(3),d("ngIf",e.comune),l(),d("ngIf",e.provincia),l(),d("ngIf",!e.comune&&!e.provincia),l(3),d("ngIf",e.configurato),l(),d("ngIf",!e.configurato),l(3),d("ngIf",e.ultimoEsito)("ngIfElse",i),l(5),d("value",e.prodotto)("disabled",a.updatingProdottoIds.has(e.id)),l(8),d("ngIf",e.hasConfigPromethea),l(),d("ngIf",e.hasTrattativaYuvi),l(),S("open",a.activeDropdownId===e.id),l(4),d("ngIf",a.activeDropdownId===e.id)}}function wt(s,t){if(s&1&&(n(0,"tr")(1,"td",76),r(2),o()()),s&2){let e=m();l(2),b(" ",e.searchTerm?"Nessun prospect trovato":"Nessun prospect"," ")}}function xt(s,t){s&1&&(n(0,"span",13),r(1,"expand_more"),o())}function St(s,t){s&1&&(n(0,"span",13),r(1,"hourglass_bottom"),o())}function bt(s,t){if(s&1){let e=w();n(0,"div",77)(1,"button",78),h("click",function(){f(e);let a=m();return _(a.loadMore())}),E(2,xt,2,0,"span",79)(3,St,2,0,"span",79),r(4),o()()}if(s&2){let e=m();l(),d("disabled",e.loading),l(),d("ngIf",!e.loading),l(),d("ngIf",e.loading),l(),b(" ",e.loading?"Caricamento\u2026":"Carica altri"," ")}}function yt(s,t){if(s&1&&(n(0,"div",80),r(1),o()),s&2){let e=m();l(),b(" ",e.error," ")}}var ot=class s{constructor(t,e,i){this.soggetti=t;this.kpiService=e;this.router=i;this.searchSubject.pipe(R(this.destroy$),M(300),V()).subscribe(a=>{this.onSearchExecuted(a)})}allRows=[];filteredRows=[];loading=!1;error=null;searchSubject=new T;destroy$=new T;page=0;pageSize=20;hasMore=!0;deletingIds=new Set;showEsito=!1;selectedId=null;updatingProdottoIds=new Set;province=[];filtroProvincia="tutte";searchTerm="";esitiTipi=it;filtroEsito="tutti";sortDir="desc";kpi={senzaContatto:0,daRichiamare:0,configurati:0};totalProspectCount=0;filtroConfigurato=null;activeDropdownId=null;ngOnInit(){return P(this,null,function*(){yield Promise.all([this.loadMore(!0),this.loadProvince()])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProvince(){return P(this,null,function*(){let{data:t}=yield this.soggetti.getProvinceByTipo("prospect");t&&(this.province=t)})}loadMore(t=!1){return P(this,null,function*(){if(!this.loading&&!(!t&&!this.hasMore)){this.loading=!0,this.error=null;try{t&&(this.page=0,this.allRows=[],this.hasMore=!0,this.filteredRows=[]);let e=this.page*this.pageSize,i=e+this.pageSize-1,{data:a,error:c}=yield this.soggetti.getSoggettiByTipo("prospect",e,i);if(c)throw c;let p=a??[];if(p.length===0){this.hasMore=!1,this.applyFilters(),yield this.refreshKpi();return}let g=p.map(u=>u.id).filter(u=>!!u),[k,rt]=yield Promise.all([this.soggetti.getConfigurazioniPrometheaByCliente(g),this.soggetti.getTrattativeYuviByProspect(g)]),L=p.map(u=>({id:u.id,ragione_sociale:u.ragione_sociale||"Senza nome",referente:u.referente,telefono:u.telefono,email:u.email,provincia:u.provincia,comune:u.comune,prodotto:u.prodotto||"Promethea",esiti:u.esiti,ultimoEsito:this.getLastEsito(u.esiti),configurato:k.get(u.id)||!1,hasConfigPromethea:k.get(u.id)||!1,hasTrattativaYuvi:rt.get(u.id)||!1,created_at:u.created_at}));if(t)this.allRows=L;else{let u=new Set(this.allRows.map(I=>I.id)),at=L.filter(I=>!u.has(I.id));this.allRows=[...this.allRows,...at]}this.hasMore=p.length===this.pageSize,this.hasMore&&this.page++,this.applyFilters(),yield this.refreshKpi()}catch(e){this.error=e?.message||"Errore durante il caricamento"}finally{this.loading=!1}}})}onSearchExecuted(t){return P(this,null,function*(){if(!t.trim()){yield this.loadMore(!0);return}this.loading=!0;try{let e=yield this.soggetti.searchSoggetti(t,"prospect");if(e.error)throw e.error;let i=e.data??[];if(this.page=0,this.hasMore=!1,this.allRows=[],i.length===0){this.filteredRows=[],yield this.refreshKpi();return}let a=i.map(g=>g.id).filter(g=>!!g),[c,p]=yield Promise.all([this.soggetti.getConfigurazioniPrometheaByCliente(a),this.soggetti.getTrattativeYuviByProspect(a)]);this.allRows=i.map(g=>({id:g.id,ragione_sociale:g.ragione_sociale||"Senza nome",referente:g.referente,telefono:g.telefono,email:g.email,provincia:g.provincia,comune:g.comune,prodotto:g.prodotto||"Promethea",esiti:g.esiti,ultimoEsito:this.getLastEsito(g.esiti),configurato:c.get(g.id)||!1,hasConfigPromethea:c.get(g.id)||!1,hasTrattativaYuvi:p.get(g.id)||!1,created_at:g.created_at})),this.hasMore=!1,this.applyFilters(),yield this.refreshKpi()}catch(e){this.error=e?.message||"Errore durante la ricerca",console.error("Errore ricerca:",e)}finally{this.loading=!1}})}applyFilters(){let t=this.allRows.filter(i=>!(this.filtroProvincia!=="tutte"&&i.provincia!==this.filtroProvincia||this.filtroEsito!=="tutti"&&(this.filtroEsito==="senza-esito"&&i.ultimoEsito||this.filtroEsito!=="senza-esito"&&i.ultimoEsito?.tipo!==this.filtroEsito)||this.filtroConfigurato!==null&&i.configurato!==this.filtroConfigurato)),e=i=>{let a=i.ultimoEsito?.ts?new Date(i.ultimoEsito.ts).getTime():0,c=i.created_at?new Date(i.created_at).getTime():0;return a||c};t.sort((i,a)=>{let c=e(i),p=e(a);return this.sortDir==="desc"?p-c:c-p}),this.filteredRows=t}onSearchChange(t){this.searchTerm=t,this.searchSubject.next(t)}refreshList(){return P(this,null,function*(){yield this.loadMore(!0)})}onChangeFiltroEsito(t){this.filtroEsito=t,this.filtroConfigurato=null,this.applyFilters()}onChangeFiltroProvincia(t){this.filtroProvincia=t,this.applyFilters()}onChangeSortDir(t){this.sortDir=t,this.applyFilters()}refreshKpi(){return P(this,null,function*(){let t=yield this.kpiService.getProspectKPI();this.totalProspectCount=t.totale,this.kpi={senzaContatto:t.senzaContatto,daRichiamare:t.daRichiamare,configurati:t.configurati}})}onFiltroTotale(){this.filtroEsito="tutti",this.filtroProvincia="tutte",this.filtroConfigurato=null,this.applyFilters()}onFiltroSenzaContatto(){this.filtroEsito="senza-esito",this.filtroConfigurato=null,this.applyFilters()}onFiltroDaRichiamare(){this.filtroEsito="Richiamare",this.filtroConfigurato=null,this.applyFilters()}onFiltroConfigurati(){this.filtroEsito="tutti",this.filtroConfigurato=!0,this.applyFilters()}vediConfigurazionePromethea(t){this.router.navigate(["/alchemizzatore"],{queryParams:{prospectId:t.id,step:6}})}vediTrattativaYuvi(t){return P(this,null,function*(){try{console.log("\u{1F7E1} Avvio navigazione trattativa YUVI per prospect:",t.id,t.ragione_sociale);let{data:e,error:i}=yield this.soggetti.supabaseService.supabase.from("trattative_yuvi").select("*").eq("prospect_id",t.id).order("created_at",{ascending:!1}).limit(1).single();if(i){console.error("\u274C Errore nel recupero trattativa:",i),alert("Errore nel caricamento della trattativa: "+i.message);return}if(!e){console.warn("\u26A0\uFE0F Nessuna trattativa YUVI trovata per prospect:",t.id),alert("Nessuna trattativa YUVI trovata per questo prospect");return}console.log("\u2705 Trattativa trovata:",e),console.log("\u{1F7E1} Navigazione a /yuvi-trattativa con stato:",{prospect:t,trattativaEsistente:e}),this.router.navigate(["/yuvi-trattativa"],{queryParams:{prospectId:t.id,trattativaId:e.id,step:7},state:{prospect:t,trattativaEsistente:e,from:"lista-prospect"}}).then(a=>{a?console.log("\u2705 Navigazione riuscita"):(console.error("\u274C Navigazione fallita"),alert("Errore nella navigazione alla pagina trattativa YUVI"))}).catch(a=>{console.error("\u274C Errore navigazione:",a),alert("Errore durante la navigazione: "+a.message)})}catch(e){console.error("\u274C Errore generale:",e),alert("Errore nel caricamento della trattativa: "+e.message)}})}onDelete(t){return P(this,null,function*(){if(!(!t?.id||!confirm(`Eliminare il prospect "${t.ragione_sociale}"?`))){this.deletingIds.add(t.id);try{let i=yield this.soggetti.deleteSoggetto(t.id);if(!i.success)throw new Error(i.error);this.allRows=this.allRows.filter(a=>a.id!==t.id),this.applyFilters(),yield this.refreshKpi()}catch(i){this.error=i.message||"Errore durante l'eliminazione"}finally{this.deletingIds.delete(t.id)}}})}onEdit(t){t?.id&&this.router.navigate(["/soggetti/modifica",t.id])}openEsito(t){this.selectedId=t.id,this.showEsito=!0}onPopupClosed(t){this.showEsito=!1,this.selectedId=null,t.saved&&this.loadMore(!0)}onChangeProdotto(t,e){return P(this,null,function*(){if(!t?.id)return;let i=e;if(t.prodotto===i)return;this.updatingProdottoIds.add(t.id);let a=t.prodotto;try{let c=yield this.soggetti.updateSoggetto({id:t.id,prodotto:i});if(!c.success)throw new Error(c.error);t.prodotto=i,this.applyFilters()}catch(c){this.error=c?.message||"Errore aggiornamento prodotto"}finally{this.updatingProdottoIds.delete(t.id)}})}trackById=(t,e)=>e.id;getLastEsito(t){return!Array.isArray(t)||t.length===0?null:t.reduce((e,i)=>{let a=new Date(i.ts).getTime(),c=new Date(e.ts).getTime();return a>c?i:e})}toggleActionsDropdown(t){this.activeDropdownId=this.activeDropdownId===t?null:t,this.activeDropdownId&&setTimeout(()=>{let e=document.querySelector(`[data-row-id="${t}"] .actions-dropdown button`),i=document.querySelector(`[data-row-id="${t}"] .actions-dropdown .modal`);if(e&&i){let a=e.getBoundingClientRect(),c=window.innerHeight;a.bottom>c-200&&(i.style.top="auto",i.style.bottom="calc(100% + 8px)")}},0)}closeDropdown(t){t.target.closest(".actions-dropdown")||(this.activeDropdownId=null)}static \u0275fac=function(e){return new(e||s)(y(tt),y(et),y(j))};static \u0275cmp=F({type:s,selectors:[["app-lista-prospect"]],hostBindings:function(e,i){e&1&&h("click",function(c){return i.closeDropdown(c)},z)},decls:101,vars:28,consts:[["filtroSel",""],["ordinaSel",""],["provSel",""],["noEsito",""],["sel",""],[1,"form-section"],[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"sottotitolo"],[1,"flex-1"],["title","Aggiungi prospect","aria-label","Aggiungi prospect",1,"icon-btn",3,"routerLink"],[1,"material-icons"],[1,"prospect-cards"],[1,"card",3,"click"],[1,"card-title"],[1,"card-number"],[1,"table-section"],[1,"table-tools"],[1,"tool"],["for","search",1,"label"],["id","search","type","text","placeholder","Nome, telefono, email...",1,"table-inline-input",3,"ngModelChange","ngModel"],["for","filtroEsito",1,"label"],["id","filtroEsito",1,"table-inline-select",3,"change","value"],["value","tutti"],["value","senza-esito"],[3,"value",4,"ngFor","ngForOf"],["for","ordinaPer",1,"label"],["id","ordinaPer",1,"table-inline-select",3,"change","value"],["value","desc"],["value","asc"],["for","filtroProvincia",1,"label"],["id","filtroProvincia",1,"table-inline-select",3,"change","value"],["value","tutte"],[1,"table-container"],[1,"crm-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","load-more-container",4,"ngIf"],["style","text-align:center; color:#ef4444; margin-top:1rem;",4,"ngIf"],[3,"closed","open","soggettoId","tipo"],[3,"value"],["data-label","Ragione Sociale"],[1,"cell-content"],["data-label","Referente"],["data-label","Telefono"],["data-label","Localit\xE0"],["style","color: #6b7280; font-style: italic;",4,"ngIf"],["data-label","Configurato"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["data-label","Ultimo Esito"],[4,"ngIf","ngIfElse"],["data-label","Prodotto"],[1,"table-inline-select",3,"change","value","disabled"],["value","Promethea"],["value","YUVI"],["data-label","Azioni"],[1,"actions-container"],["class","action-btn document","title","Configurazione Promethea",3,"click",4,"ngIf"],["class","action-btn email","title","Trattativa YUVI",3,"click",4,"ngIf"],[1,"actions-dropdown"],["title","Altre azioni",1,"action-btn",3,"click"],["class","modal","style",`position: absolute; top: calc(100% + 8px); right: 0; 
                            width: 180px; transform: none; left: auto; 
                            max-height: none; overflow: visible;`,4,"ngIf"],[2,"color","#6b7280","font-style","italic"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["title","Configurazione Promethea",1,"action-btn","document",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img"],["title","Trattativa YUVI",1,"action-btn","email",3,"click"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img"],[1,"modal",2,"position","absolute","top","calc(100% + 8px)","right","0","width","180px","transform","none","left","auto","max-height","none","overflow","visible"],[1,"modal-body",2,"padding","0"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",2,"color","#ef4444",3,"click","disabled"],["colspan","8",2,"text-align","center","padding","1.5rem"],[1,"load-more-container"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],[2,"text-align","center","color","#ef4444","margin-top","1rem"]],template:function(e,i){if(e&1){let a=w();n(0,"div",5)(1,"div",6)(2,"i",7),r(3,"group"),o(),n(4,"div",8)(5,"h2",9),r(6,"Prospect"),o(),n(7,"p",10),r(8,"Panoramica prospect e filtri rapidi"),o()(),C(9,"div",11),n(10,"a",12)(11,"span",13),r(12,"add_circle"),o()()(),n(13,"div",14)(14,"div",15),h("click",function(){return f(a),_(i.onFiltroTotale())}),n(15,"h3",16),r(16,"Totale"),o(),n(17,"div",17),r(18),o()(),n(19,"div",15),h("click",function(){return f(a),_(i.onFiltroSenzaContatto())}),n(20,"h3",16),r(21,"Senza Contatto"),o(),n(22,"div",17),r(23),o()(),n(24,"div",15),h("click",function(){return f(a),_(i.onFiltroDaRichiamare())}),n(25,"h3",16),r(26,"Da Richiamare"),o(),n(27,"div",17),r(28),o()(),n(29,"div",15),h("click",function(){return f(a),_(i.onFiltroConfigurati())}),n(30,"h3",16),r(31,"Configurati"),o(),n(32,"div",17),r(33),o()()()(),n(34,"section",18)(35,"div",19)(36,"div",20)(37,"label",21)(38,"span",13),r(39,"search"),o(),r(40," Cerca "),o(),n(41,"input",22),$("ngModelChange",function(p){return f(a),N(i.searchTerm,p)||(i.searchTerm=p),_(p)}),h("ngModelChange",function(p){return f(a),_(i.onSearchChange(p))}),o()(),n(42,"div",20)(43,"label",23)(44,"span",13),r(45,"filter_list"),o(),r(46," Ultimo esito "),o(),n(47,"select",24,0),h("change",function(){f(a);let p=x(48);return _(i.onChangeFiltroEsito(p.value))}),n(49,"option",25),r(50,"Tutti"),o(),n(51,"option",26),r(52,"Senza esito"),o(),E(53,lt,2,2,"option",27),o()(),n(54,"div",20)(55,"label",28)(56,"span",13),r(57,"sort"),o(),r(58," Ordina per: "),o(),n(59,"select",29,1),h("change",function(){f(a);let p=x(60);return _(i.onChangeSortDir(p.value))}),n(61,"option",30),r(62,"Pi\xF9 recente"),o(),n(63,"option",31),r(64,"Meno recente"),o()()(),n(65,"div",20)(66,"label",32)(67,"span",13),r(68,"place"),o(),r(69," Provincia "),o(),n(70,"select",33,2),h("change",function(){f(a);let p=x(71);return _(i.onChangeFiltroProvincia(p.value))}),n(72,"option",34),r(73,"Tutte"),o(),E(74,ct,2,2,"option",27),o()()(),n(75,"div",35)(76,"table",36)(77,"thead")(78,"tr")(79,"th"),r(80,"Ragione Sociale"),o(),n(81,"th"),r(82,"Referente"),o(),n(83,"th"),r(84,"Telefono"),o(),n(85,"th"),r(86,"Localit\xE0"),o(),n(87,"th"),r(88,"Configurato"),o(),n(89,"th"),r(90,"Ultimo Esito"),o(),n(91,"th"),r(92,"Prodotto"),o(),n(93,"th"),r(94,"Azioni"),o()()(),n(95,"tbody"),E(96,Pt,42,17,"tr",37)(97,wt,3,1,"tr",38),o()()(),E(98,bt,5,4,"div",39)(99,yt,2,1,"div",40),o(),n(100,"app-esito-popup",41),h("closed",function(p){return f(a),_(i.onPopupClosed(p))}),o()}e&2&&(l(10),d("routerLink",A(27,st)),l(4),S("card-active",i.filtroEsito==="tutti"&&i.filtroConfigurato===null),l(4),v(i.totalProspectCount),l(),S("card-active",i.filtroEsito==="senza-esito"),l(4),v(i.kpi.senzaContatto),l(),S("card-active",i.filtroEsito==="Richiamare"),l(4),v(i.kpi.daRichiamare),l(),S("card-active",i.filtroConfigurato===!0),l(4),v(i.kpi.configurati),l(8),Y("ngModel",i.searchTerm),l(6),d("value",i.filtroEsito),l(6),d("ngForOf",i.esitiTipi),l(6),d("value",i.sortDir),l(11),d("value",i.filtroProvincia),l(4),d("ngForOf",i.province),l(22),d("ngForOf",i.filteredRows)("ngForTrackBy",i.trackById),l(),d("ngIf",!i.loading&&!i.error&&i.filteredRows.length===0),l(),d("ngIf",!i.error&&i.hasMore),l(),d("ngIf",i.error),l(),d("open",i.showEsito)("soggettoId",i.selectedId)("tipo","prospect"))},dependencies:[H,U,K,nt,Z,Q,X,W,G,J,q],styles:[".actions-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-flex}.table-container[_ngcontent-%COMP%]{overflow:visible}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:var(--gutter-sm);padding:.75rem 1rem;border:none;background:transparent;color:var(--text-color);cursor:pointer;transition:background .15s ease;font-size:var(--fs-sm);text-align:left;border-bottom:1px solid var(--smoke-color-1)}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2)}.dropdown-item[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.dropdown-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1rem}@container (max-width: 768px){.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:static!important;width:100%!important;transform:none!important;box-shadow:none!important;border:1px solid var(--smoke-color-1)!important;border-radius:12px!important;margin-top:var(--gutter-sm)!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]{width:100%}}"]})};export{ot as ListaProspect};
