import{b as R,c as g,d as I,e as z,f as T,g as V,k as F,n as L,u as G,v as D,w as W}from"./chunk-XK6OQE2G.js";import{c as N}from"./chunk-5QACXCZZ.js";import{f as S,g as k}from"./chunk-74XWVHEF.js";import{k as O,r as E}from"./chunk-53FSC42K.js";import{Fa as l,Fb as o,Hb as b,Jb as C,Kb as w,Lb as M,Ra as y,S as v,Wa as m,X as u,Y as f,gb as c,hb as e,ib as t,jb as h,qb as x,tb as _,ub as p}from"./chunk-CPJK23XT.js";import"./chunk-X5YLR3NI.js";import{i as P}from"./chunk-ODN5LVDJ.js";function q(i,d){if(i&1){let n=x();e(0,"div",4)(1,"h2"),o(2,"\u2705 Registrazione Completata!"),t(),e(3,"div",5)(4,"p")(5,"strong"),o(6,"Il tuo account \xE8 stato creato con successo!"),t()(),e(7,"p"),o(8,"Tuttavia, \xE8 necessario attendere l'attivazione da parte di un amministratore prima di poter accedere al sistema."),t(),e(9,"p"),o(10,"Riceverai una notifica quando il tuo account sar\xE0 attivato."),t()(),e(11,"button",6),_("click",function(){u(n);let s=p();return f(s.goToLogin())}),o(12," Torna al Login "),t()()}}function A(i,d){i&1&&(e(0,"div",24),o(1," Inserisci una email valida "),t())}function B(i,d){i&1&&(e(0,"div",24),o(1," Password richiesta (min. 6 caratteri) "),t())}function j(i,d){i&1&&(e(0,"div",24),o(1," Le password non coincidono "),t())}function H(i,d){i&1&&h(0,"span",25)}function J(i,d){if(i&1&&(e(0,"div",26),o(1),t()),i&2){let n=p(2);l(),b(" ",n.error," ")}}function K(i,d){if(i&1){let n=x();e(0,"div")(1,"h2"),o(2,"Registrati a Promethea CRM"),t(),e(3,"div",7),o(4," \u2139\uFE0F Dopo la registrazione, il tuo account dovr\xE0 essere attivato da un amministratore "),t(),e(5,"form",8),_("ngSubmit",function(){u(n);let s=p();return f(s.onSubmit())}),e(6,"div",9)(7,"label")(8,"span"),o(9,"Nome"),t(),e(10,"input",10),M("ngModelChange",function(s){u(n);let r=p();return w(r.firstName,s)||(r.firstName=s),f(s)}),t()(),e(11,"label")(12,"span"),o(13,"Cognome"),t(),e(14,"input",11),M("ngModelChange",function(s){u(n);let r=p();return w(r.lastName,s)||(r.lastName=s),f(s)}),t()(),e(15,"label",12),o(16,"Email"),t(),h(17,"input",13),m(18,A,2,0,"div",14),t(),e(19,"div",9)(20,"label",15),o(21,"Password"),t(),h(22,"input",16),m(23,B,2,0,"div",14),t(),e(24,"div",9)(25,"label",17),o(26,"Conferma Password"),t(),h(27,"input",18),m(28,j,2,0,"div",14),t(),e(29,"button",19),m(30,H,1,0,"span",20),o(31),t(),m(32,J,2,1,"div",21),t(),e(33,"div",22),o(34," Hai gi\xE0 un account? "),e(35,"a",23),o(36,"Accedi"),t()()()}if(i&2){let n,a,s,r=p();l(5),c("formGroup",r.form),l(5),C("ngModel",r.firstName),l(4),C("ngModel",r.lastName),l(4),c("ngIf",((n=r.form.get("email"))==null?null:n.invalid)&&((n=r.form.get("email"))==null?null:n.touched)),l(5),c("ngIf",((a=r.form.get("password"))==null?null:a.invalid)&&((a=r.form.get("password"))==null?null:a.touched)),l(5),c("ngIf",r.form.hasError("mismatch")&&((s=r.form.get("confirmPassword"))==null?null:s.touched)),l(),c("disabled",r.loading||r.form.invalid),l(),c("ngIf",r.loading),l(),b(" ",r.loading?"Registrazione...":"Registrati"," "),l(),c("ngIf",r.error)}}var Y=class i{fb=v(G);auth=v(N);router=v(S);form;loading=!1;error=null;success=!1;firstName="";lastName="";constructor(){this.form=this.fb.group({email:["",[g.required,g.email]],password:["",[g.required,g.minLength(6)]],confirmPassword:["",[g.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(d){let n=d.get("password"),a=d.get("confirmPassword");return n&&a&&n.value===a.value?null:{mismatch:!0}}onSubmit(){return P(this,null,function*(){if(this.form.invalid||this.loading)return;this.loading=!0,this.error=null,this.success=!1;let{email:d,password:n}=this.form.value;try{yield this.auth.register(d,n,this.firstName?.trim()||null,this.lastName?.trim()||null),this.success=!0,this.form.reset()}catch(a){this.error=a.message||"Registrazione fallita"}finally{this.loading=!1}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=y({type:i,selectors:[["app-register"]],decls:4,vars:2,consts:[[1,"auth-container"],[1,"auth-card"],["class","success-message",4,"ngIf"],[4,"ngIf"],[1,"success-message"],[1,"auth-info",2,"text-align","center","margin","var(--gutter-lg) 0"],["type","button",1,"promethea-button",3,"click"],[1,"auth-info"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-field"],["name","firstName","type","text","placeholder","Nome",3,"ngModelChange","ngModel"],["name","lastName","type","text","placeholder","Cognome",3,"ngModelChange","ngModel"],["for","email",1,"auth-label"],["id","email","type","email","formControlName","email","placeholder","es. nome@azienda.it",1,"auth-input"],["class","error",4,"ngIf"],["for","password",1,"auth-label"],["id","password","type","password","formControlName","password","placeholder","Minimo 6 caratteri",1,"auth-input"],["for","confirmPassword",1,"auth-label"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Ripeti la password",1,"auth-input"],["type","submit",1,"promethea-button",3,"disabled"],["class","loading-spinner",4,"ngIf"],["class","auth-error",4,"ngIf"],[1,"auth-alt"],["routerLink","/login"],[1,"error"],[1,"loading-spinner"],[1,"auth-error"]],template:function(n,a){n&1&&(e(0,"div",0)(1,"div",1),m(2,q,13,0,"div",2)(3,K,37,10,"div",3),t()()),n&2&&(l(2),c("ngIf",a.success),l(),c("ngIf",!a.success))},dependencies:[E,O,W,V,R,I,z,F,L,k,D,T],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:var(--gutter-lg);position:relative;overflow:hidden}.auth-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 80%,var(--primary) 0%,transparent 50%),radial-gradient(circle at 80% 20%,var(--secondary) 0%,transparent 50%),radial-gradient(circle at 40% 40%,var(--tertiary) 0%,transparent 50%);pointer-events:none;z-index:0}.auth-card[_ngcontent-%COMP%]{background:var(--background);padding:clamp(1.5rem,5vw,3rem);border-radius:24px;box-shadow:0 8px 32px var(--shadow),0 2px 8px var(--smoke-color-1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid var(--smoke-color-1);width:100%;max-width:440px;position:relative;z-index:2;transition:all .3s cubic-bezier(.4,0,.2,1)}.auth-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 48px var(--shadow2),0 4px 16px var(--smoke-color-2);transform:translateY(-2px)}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:var(--fs-lg);color:var(--primary);margin-bottom:var(--gutter-lg);font-weight:700;position:relative}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:60px;height:3px;background:var(--gradiente);border-radius:2px}.auth-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-lg)}.auth-label[_ngcontent-%COMP%]{display:block;font-size:var(--fs-sm);font-weight:600;color:var(--text-color);margin-bottom:var(--gutter-sm);transition:color .2s ease}.auth-input[_ngcontent-%COMP%]{width:100%;height:52px;padding:0 var(--gutter-lg);border:2px solid var(--smoke-color-1);border-radius:12px;background:var(--background);color:var(--text-color);font-size:var(--fs-sm);transition:all .3s ease;outline:none}.auth-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 4px color-mix(in srgb,var(--primary) 20%,transparent);transform:translateY(-1px)}.auth-input[_ngcontent-%COMP%]::placeholder{color:color-mix(in srgb,var(--text-color) 40%,transparent)}.auth-input[_ngcontent-%COMP%]:invalid:not(:focus):not(:placeholder-shown){border-color:#ef4444;box-shadow:0 0 0 4px color-mix(in srgb,#ef4444 20%,transparent)}.promethea-button[_ngcontent-%COMP%]{width:100%;height:52px;margin-top:var(--gutter-sm);font-size:var(--fs-md);font-weight:600;letter-spacing:.5px;background:var(--gradiente);color:#fffaf7;border:none;border-radius:40px 10px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 4px 16px var(--shadow);position:relative;overflow:hidden}.promethea-button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.promethea-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px) scale(1.02);box-shadow:0 8px 32px var(--shadow2),0 4px 16px var(--shadow3)}.promethea-button[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.promethea-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0) scale(1)}.promethea-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:0 2px 8px var(--shadow)}.auth-error[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 10%,transparent);color:#ef4444;padding:var(--gutter-lg);border-radius:12px;border:1px solid color-mix(in srgb,#ef4444 30%,transparent);margin-top:var(--gutter-lg);font-size:var(--fs-sm);font-weight:500;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.auth-info[_ngcontent-%COMP%]{background:color-mix(in srgb,#10b981 10%,transparent);color:#10b981;padding:var(--gutter-lg);border-radius:12px;border:1px solid color-mix(in srgb,#10b981 30%,transparent);margin-top:var(--gutter-lg);font-size:var(--fs-sm);font-weight:500;text-align:center;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.auth-alt[_ngcontent-%COMP%]{text-align:center;margin-top:var(--gutter-lg);padding-top:var(--gutter-lg);border-top:1px solid var(--smoke-color-1);color:var(--text-color);font-size:var(--fs-sm)}.auth-alt[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary);font-weight:600;text-decoration:none;transition:all .2s ease;margin-left:4px}.auth-alt[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--secondary);text-decoration:underline}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:var(--gutter-sm)}.auth-card[_ngcontent-%COMP%]{padding:var(--gutter-lg);margin:var(--gutter-sm)}.auth-input[_ngcontent-%COMP%]{height:48px;padding:0 var(--gutter-lg)}.promethea-button[_ngcontent-%COMP%]{height:48px}}@media (prefers-reduced-motion: reduce){.auth-card[_ngcontent-%COMP%], .auth-input[_ngcontent-%COMP%], .promethea-button[_ngcontent-%COMP%], .auth-error[_ngcontent-%COMP%], .auth-info[_ngcontent-%COMP%]{transition:none;animation:none}.promethea-button[_ngcontent-%COMP%]:before{display:none}}.auth-input[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary);outline-offset:2px}.promethea-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--text-color);outline-offset:2px}.auth-card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:var(--gutter-md)}.auth-card[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.7;background:var(--smoke-color-2);cursor:not-allowed}.auth-card[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{margin-top:var(--gutter-md)}']})};export{Y as RegisterComponent};
