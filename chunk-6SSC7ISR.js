import{a as G}from"./chunk-KJ26JPA2.js";import{a as N,c as B,e as W,i as j,j as A,k as L,o as R}from"./chunk-QHMRLWV2.js";import{a as H}from"./chunk-MYIP52J4.js";import{d as F}from"./chunk-A73PPQIR.js";import"./chunk-7VD3EVFT.js";import{j as I,k as z,m as V,p as D}from"./chunk-CSZ7WPY7.js";import{Aa as P,Ga as E,La as u,X as _,Xa as d,Y as v,Ya as e,Za as i,_a as p,db as k,gb as f,hb as m,jb as O,kb as C,lb as b,mb as n,nb as x,ob as g,qb as S,rb as h,sb as T,ua as o,vb as M,xb as y}from"./chunk-QS6MTI54.js";import"./chunk-X5YLR3NI.js";import{i as w}from"./chunk-ODN5LVDJ.js";function $(r,s){if(r&1&&(e(0,"option",36),n(1),i()),r&2){let t=s.$implicit;d("value",t.id),o(),g(" ",t.ragione_sociale," ")}}function q(r,s){r&1&&(e(0,"div",37),p(1,"span",38),n(2," Caricamento tasks... "),i())}function J(r,s){if(r&1&&(e(0,"div",39),p(1,"i",40),n(2),i()),r&2){let t=m();o(2),g(" ",t.error," ")}}function K(r,s){r&1&&(e(0,"span",67),p(1,"i",40),n(2," Imminente "),i())}function Q(r,s){r&1&&(e(0,"span",68),p(1,"i",69),n(2," Scaduta "),i())}function X(r,s){if(r&1&&(e(0,"div",70)(1,"div",71)(2,"span",72),n(3),i(),e(4,"span",73),n(5,"Da iniziare"),i()(),e(6,"div",71)(7,"span",74),n(8),i(),e(9,"span",73),n(10,"In lavorazione"),i()(),e(11,"div",71)(12,"span",75),n(13),i(),e(14,"span",73),n(15,"Completate"),i()()()),r&2){let t=m().$implicit,a=m(2);o(3),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).daFare),o(5),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).inLavorazione),o(5),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).completate)}}function Y(r,s){r&1&&(e(0,"div",76),p(1,"i",77),n(2," Nessuna sotto-task definita "),i())}function Z(r,s){if(r&1){let t=k();e(0,"div",43)(1,"div",44)(2,"div",45)(3,"h3",46),f("click",function(){let l=_(t).$implicit,c=m(2);return v(c.apriDettaglioTask(l.id))}),n(4),i(),e(5,"div",47)(6,"span",48),p(7,"i",49),n(8),i(),e(9,"span",48),p(10,"i",50),n(11),i()()(),e(12,"div",51)(13,"span",52),n(14),i()()(),e(15,"div",53)(16,"div",54)(17,"div",55)(18,"div",56)(19,"div",57),n(20),i()(),e(21,"span",58),n(22),i()()(),e(23,"div",59),p(24,"i",60),n(25),M(26,"date"),u(27,K,3,0,"span",61)(28,Q,3,0,"span",62),i(),u(29,X,16,3,"div",63)(30,Y,3,0,"div",33),i(),e(31,"div",64)(32,"small",65),n(33),M(34,"date"),i(),e(35,"button",8),f("click",function(){let l=_(t).$implicit,c=m(2);return v(c.apriDettaglioTask(l.id))}),p(36,"i",66),n(37," Gestisci "),i()()()}if(r&2){let t=s.$implicit,a=m(2);C("scaduta",a.taskService.isScaduta(t.data_scadenza)),o(4),g(" ",t.nome," "),o(4),g(" ",(t.cliente==null?null:t.cliente.ragione_sociale)||"Nessun cliente"," "),o(3),g(" ",a.taskService.getModuloName(t.assegnazione_id||null)," "),o(2),b(a.taskService.getPrioritaBadgeClass(t.priorita_globale)),o(),g(" ",a.taskService.getNomePriorita(t.priorita_globale)," "),o(5),b(a.taskService.getStatoBadgeClass(t.stato)),O("width",t.progresso+"%"),o(),g(" ",t.progresso,"% "),o(),b(a.taskService.getStatoBadgeClass(t.stato)),o(),g(" ",a.taskService.getStatoTesto(t.stato)," "),o(),C("scaduta",a.taskService.isScaduta(t.data_scadenza))("scadenza-imminente",a.taskService.isScadenzaImminente(t.data_scadenza)),o(2),g(" ",y(26,26,t.data_scadenza,"dd/MM/yyyy")," "),o(2),d("ngIf",a.taskService.isScadenzaImminente(t.data_scadenza)),o(),d("ngIf",a.taskService.isScaduta(t.data_scadenza)),o(),d("ngIf",t.sotto_tasks&&t.sotto_tasks.length>0),o(),d("ngIf",!t.sotto_tasks||t.sotto_tasks.length===0),o(3),g(" Aggiornato: ",y(34,29,t.updated_at,"dd/MM/yyyy HH:mm")," ")}}function tt(r,s){if(r&1&&(e(0,"div",41),u(1,Z,38,32,"div",42),i()),r&2){let t=m();o(),d("ngForOf",t.tasksAttive)}}function et(r,s){if(r&1&&(e(0,"span",86),n(1),i()),r&2){let t=m().$implicit;o(),g("",t.progresso,"%")}}function it(r,s){r&1&&(e(0,"span",67),p(1,"i",40),n(2," Imminente "),i())}function at(r,s){r&1&&(e(0,"span",68),p(1,"i",69),n(2," Scaduta "),i())}function nt(r,s){if(r&1&&(e(0,"div",70)(1,"div",71)(2,"span",72),n(3),i(),e(4,"span",73),n(5,"Da iniziare"),i()(),e(6,"div",71)(7,"span",74),n(8),i(),e(9,"span",73),n(10,"In lavorazione"),i()(),e(11,"div",71)(12,"span",75),n(13),i(),e(14,"span",73),n(15,"Completate"),i()()()),r&2){let t=m().$implicit,a=m(2);o(3),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).daFare),o(5),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).inLavorazione),o(5),x(a.taskService.getSottoTaskCounts(t.sotto_tasks).completate)}}function ot(r,s){r&1&&(e(0,"div",76),p(1,"i",77),n(2," Nessuna sotto-task definita "),i())}function rt(r,s){if(r&1){let t=k();e(0,"div",43)(1,"div",44)(2,"div",45)(3,"h3",46),f("click",function(){let l=_(t).$implicit,c=m(2);return v(c.apriDettaglioTask(l.id))}),n(4),i(),e(5,"div",47)(6,"span",48),p(7,"i",49),n(8),i(),e(9,"span",48),p(10,"i",50),n(11),i()()(),e(12,"div",51)(13,"span",52),n(14),i()()(),e(15,"div",53)(16,"div",54)(17,"div",55)(18,"div",80)(19,"div",81)(20,"div",82),u(21,et,2,1,"span",83),i()(),e(22,"div",84),n(23),i()(),e(24,"div",85)(25,"span",58),n(26),i()()()(),e(27,"div",59),p(28,"i",60),n(29),M(30,"date"),u(31,it,3,0,"span",61)(32,at,3,0,"span",62),i(),u(33,nt,16,3,"div",63)(34,ot,3,0,"div",33),i(),e(35,"div",64)(36,"small",65),n(37),M(38,"date"),i(),e(39,"button",8),f("click",function(){let l=_(t).$implicit,c=m(2);return v(c.apriDettaglioTask(l.id))}),p(40,"i",66),n(41," Gestisci "),i()()()}if(r&2){let t=s.$implicit,a=m(2);o(4),g(" ",t.nome," "),o(4),g(" ",(t.cliente==null?null:t.cliente.ragione_sociale)||"Nessun cliente"," "),o(3),g(" ",a.taskService.getModuloName(t.assegnazione_id||null)," "),o(2),b(a.taskService.getPrioritaBadgeClass(t.priorita_globale)),o(),g(" ",a.taskService.getNomePriorita(t.priorita_globale)," "),o(6),b(a.taskService.getStatoBadgeClass(t.stato)),O("width",t.progresso+"%"),o(),d("ngIf",t.progresso>0),o(2),g(" ",t.progresso,"% "),o(2),b(a.taskService.getStatoBadgeClass(t.stato)),o(),g(" ",a.taskService.getStatoTesto(t.stato)," "),o(),C("scaduta",a.taskService.isScaduta(t.data_scadenza))("scadenza-imminente",a.taskService.isScadenzaImminente(t.data_scadenza)),o(2),g(" ",y(30,25,t.data_scadenza,"dd/MM/yyyy")," "),o(2),d("ngIf",a.taskService.isScadenzaImminente(t.data_scadenza)),o(),d("ngIf",a.taskService.isScaduta(t.data_scadenza)),o(),d("ngIf",t.sotto_tasks&&t.sotto_tasks.length>0),o(),d("ngIf",!t.sotto_tasks||t.sotto_tasks.length===0),o(3),g(" Aggiornato: ",y(38,28,t.updated_at,"dd/MM/yyyy HH:mm")," ")}}function st(r,s){if(r&1&&(e(0,"div",30)(1,"h1"),p(2,"i",78),n(3," Macro Task completate "),i(),e(4,"div",41),u(5,rt,42,31,"div",79),i()()),r&2){let t=m();o(5),d("ngForOf",t.tasksCompletate)}}function lt(r,s){if(r&1){let t=k();e(0,"div",76),p(1,"i",87),e(2,"h3"),n(3,"Nessuna task trovata"),i(),e(4,"p"),n(5,"Modifica i filtri o crea una nuova macro task"),i(),e(6,"div",88)(7,"button",6),f("click",function(){_(t);let l=m();return v(l.nuovaMacroTask())}),n(8," Crea la prima task "),i()()()}}function ct(r,s){if(r&1){let t=k();e(0,"div",89),f("click",function(){_(t);let l=m();return v(l.chiudiTemplateModal())}),i()}}function dt(r,s){if(r&1){let t=k();e(0,"button",105),f("click",function(){let l=_(t).$implicit,c=m(2);return v(c.selezionaTemplate(l))}),e(1,"div",106),p(2,"i",50),n(3),i(),e(4,"span",107),n(5),i()()}if(r&2){let t=s.$implicit,a=m(2);C("active",(a.selectedTemplate==null?null:a.selectedTemplate.id)===t.id),o(3),g(" ",t.nome," "),o(2),x(a.taskService.getModuloName(t.modulo))}}function mt(r,s){if(r&1&&(e(0,"option",99),n(1),i()),r&2){let t=s.$implicit;d("ngValue",t.id),o(),x(t.ragione_sociale)}}function pt(r,s){if(r&1){let t=k();e(0,"div",90)(1,"header",91)(2,"h2",92),n(3,"Crea da Template"),i(),e(4,"button",93),f("click",function(){_(t);let l=m();return v(l.chiudiTemplateModal())}),e(5,"span",94),n(6,"close"),i()()(),e(7,"section",95)(8,"div",96)(9,"label",97)(10,"span",12),n(11,"Template"),i(),e(12,"div",41),u(13,dt,6,4,"button",98),i()(),e(14,"label",11)(15,"span",12),n(16,"Cliente"),i(),e(17,"select",13),T("ngModelChange",function(l){_(t);let c=m();return h(c.selectedTemplateClienteId,l)||(c.selectedTemplateClienteId=l),v(l)}),e(18,"option",99),n(19,"\u2014 Nessun cliente (opzionale) \u2014"),i(),u(20,mt,2,2,"option",100),i()(),e(21,"label",11)(22,"span",12),n(23,"Data scadenza"),i(),e(24,"input",101),T("ngModelChange",function(l){_(t);let c=m();return h(c.templateDataScadenza,l)||(c.templateDataScadenza=l),v(l)}),i()()()(),e(25,"footer",102)(26,"button",103),f("click",function(){_(t);let l=m();return v(l.chiudiTemplateModal())}),n(27,"Annulla"),i(),e(28,"button",104),f("click",function(){_(t);let l=m();return v(l.creaTaskDaTemplate())}),n(29," Crea "),i()()()}if(r&2){let t=m();o(13),d("ngForOf",t.macroTaskTemplates),o(4),S("ngModel",t.selectedTemplateClienteId),o(),d("ngValue",""),o(2),d("ngForOf",t.clienti),o(4),S("ngModel",t.templateDataScadenza),o(4),d("disabled",!t.selectedTemplate)}}var U=class r{constructor(s,t,a){this.taskService=s;this.soggettiService=t;this.router=a}macroTasks=[];macroTaskTemplates=[];clienti=[];loading=!1;error="";filtro={stato:"tutti",priorita:"tutti",cliente:"tutti",modulo:"tutti"};showTemplateModal=!1;selectedTemplate=null;templateDataScadenza="";selectedTemplateClienteId="";ngOnInit(){return w(this,null,function*(){yield this.caricaDati()})}caricaDati(){return w(this,null,function*(){this.loading=!0,this.error="";try{let[s,t,a]=yield Promise.all([this.taskService.getMacroTasks(),this.soggettiService.getSoggettiByTipo("cliente"),this.taskService.getMacroTaskTemplates()]);if(s.error)throw s.error;if(t.error)throw t.error;if(a.error)throw a.error;this.macroTasks=s.data||[],this.clienti=t.data||[],this.macroTaskTemplates=a.data||[]}catch(s){this.error="Errore nel caricamento: "+s.message}finally{this.loading=!1}})}get tasksFiltrate(){return this.macroTasks.filter(s=>{let t=this.filtro.stato==="tutti"||s.stato===this.filtro.stato,a=this.filtro.priorita==="tutti"||s.priorita_globale===parseInt(this.filtro.priorita),l=this.filtro.cliente==="tutti"||s.cliente_id===this.filtro.cliente,c=this.filtro.modulo==="tutti"||s.assegnazione_id===this.filtro.modulo;return t&&a&&l&&c})}get tasksAttive(){return this.tasksFiltrate.filter(s=>s.stato!=="completato")}get tasksCompletate(){return this.tasksFiltrate.filter(s=>s.stato==="completato")}apriDettaglioTask(s){this.router.navigate(["/tasks",s])}nuovaMacroTask(){this.router.navigate(["/tasks","nuova"])}apriTemplateModal(){this.templateDataScadenza=this.calcolaDataScadenza(30),this.selectedTemplateClienteId=this.filtro.cliente!=="tutti"?this.filtro.cliente:"",this.showTemplateModal=!0}chiudiTemplateModal(){this.showTemplateModal=!1,this.selectedTemplate=null,this.selectedTemplateClienteId=""}selezionaTemplate(s){this.selectedTemplate=s,this.templateDataScadenza=this.calcolaDataScadenza(s.data_scadenza_default)}calcolaDataScadenza(s){let t=new Date;return t.setDate(t.getDate()+s),t.toISOString().split("T")[0]}creaTaskDaTemplate(){return w(this,null,function*(){if(this.selectedTemplate){this.loading=!0;try{let s=this.selectedTemplateClienteId||(this.filtro.cliente!=="tutti"?this.filtro.cliente:""),t=yield this.taskService.createMacroTaskFromTemplate(this.selectedTemplate.id,s,this.templateDataScadenza);t.error?this.error="Errore creazione task: "+t.error.message:(this.chiudiTemplateModal(),yield this.caricaDati(),t.data&&this.router.navigate(["/tasks",t.data.id]))}catch(s){this.error="Errore: "+s.message}finally{this.loading=!1}}})}static \u0275fac=function(t){return new(t||r)(P(G),P(H),P(F))};static \u0275cmp=E({type:r,selectors:[["app-task"]],decls:71,vars:12,consts:[[1,"form-section"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"fas","fa-tasks","header-icon"],[1,"actions-container"],[1,"promethea-button",3,"click"],[1,"fas","fa-plus"],[1,"promethea-button","outline",3,"click"],[1,"fas","fa-magic"],[1,"grid-form"],[1,"form-field"],[1,"form-label"],[1,"form-select",3,"ngModelChange","ngModel"],["value","tutti"],["value","da_fare"],["value","in_lavorazione"],["value","completato"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[3,"value",4,"ngFor","ngForOf"],["value","immagine_marketing"],["value","digitalizzazione_automatismi"],["value","contabilita_fiscalita"],["value","ottimizzazione_management"],["class","status-message loading",4,"ngIf"],["class","status-message error",4,"ngIf"],[1,"table-section"],["class","grid-responsive",4,"ngIf"],["class","table-section",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","modal","role","dialog","aria-modal","true",4,"ngIf"],[3,"value"],[1,"status-message","loading"],[1,"loading-spinner"],[1,"status-message","error"],[1,"fas","fa-exclamation-triangle"],[1,"grid-responsive"],["class","card task-card",3,"scaduta",4,"ngFor","ngForOf"],[1,"card","task-card"],[1,"task-header"],[1,"task-main-info"],[1,"card-title","task-title",3,"click"],[1,"task-meta-compact"],[1,"meta-item"],[1,"fas","fa-building"],[1,"fas","fa-cube"],[1,"task-header-actions"],[1,"priority-badge"],[1,"card-body"],[1,"progress-section"],[1,"progress-info"],[1,"progress",2,"flex","1"],[1,"progress-bar"],[1,"badge"],[1,"scadenza-section"],[1,"fas","fa-calendar-alt"],["class","badge status-warning",4,"ngIf"],["class","badge status-no",4,"ngIf"],["class","sotto-tasks-counts",4,"ngIf"],[1,"task-footer"],[1,"text-muted"],[1,"fas","fa-arrow-right"],[1,"badge","status-warning"],[1,"badge","status-no"],[1,"fas","fa-exclamation-circle"],[1,"sotto-tasks-counts"],[1,"count-item"],[1,"count-badge","da-fare"],[1,"count-label"],[1,"count-badge","in-lavorazione"],[1,"count-badge","completate"],[1,"empty-state"],[1,"fas","fa-info-circle"],[1,"fas","fa-check-circle"],["class","card task-card",4,"ngFor","ngForOf"],[1,"progress-with-text"],[1,"task-progress"],[1,"task-progress-bar"],["class","progress-text",4,"ngIf"],[1,"progress-percentage"],[1,"progress-stats"],[1,"progress-text"],[1,"fas","fa-clipboard-list","fa-3x"],[1,"actions"],[1,"modal-backdrop",3,"click"],["role","dialog","aria-modal","true",1,"modal"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Chiudi",1,"icon-btn",3,"click"],[1,"material-icons"],[1,"modal-body"],[1,"form-grid"],[1,"form-field","form-field-col-span"],["type","button","class","card clickable",3,"active","click",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["type","date",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","ghost",3,"click"],["type","button",1,"promethea-button",3,"click","disabled"],["type","button",1,"card","clickable",3,"click"],[1,"card-title"],[1,"chip"]],template:function(t,a){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),p(4,"i",4),n(5," Gestione Task "),i()(),e(6,"div",5)(7,"button",6),f("click",function(){return a.nuovaMacroTask()}),p(8,"i",7),n(9," Nuova Macro Task "),i(),e(10,"button",8),f("click",function(){return a.apriTemplateModal()}),p(11,"i",9),n(12," Crea da Template "),i()()(),e(13,"div",10)(14,"div",11)(15,"label",12),n(16,"Stato"),i(),e(17,"select",13),T("ngModelChange",function(c){return h(a.filtro.stato,c)||(a.filtro.stato=c),c}),e(18,"option",14),n(19,"Tutti gli stati"),i(),e(20,"option",15),n(21,"Da Iniziare"),i(),e(22,"option",16),n(23,"In Lavorazione"),i(),e(24,"option",17),n(25,"Completato"),i()()(),e(26,"div",11)(27,"label",12),n(28,"Priorit\xE0"),i(),e(29,"select",13),T("ngModelChange",function(c){return h(a.filtro.priorita,c)||(a.filtro.priorita=c),c}),e(30,"option",14),n(31,"Tutte le priorit\xE0"),i(),e(32,"option",18),n(33,"Minima"),i(),e(34,"option",19),n(35,"Bassa"),i(),e(36,"option",20),n(37,"Media"),i(),e(38,"option",21),n(39,"Alta"),i(),e(40,"option",22),n(41,"Urgente"),i()()(),e(42,"div",11)(43,"label",12),n(44,"Cliente"),i(),e(45,"select",13),T("ngModelChange",function(c){return h(a.filtro.cliente,c)||(a.filtro.cliente=c),c}),e(46,"option",14),n(47,"Tutti i clienti"),i(),u(48,$,2,2,"option",23),i()(),e(49,"div",11)(50,"label",12),n(51,"Modulo"),i(),e(52,"select",13),T("ngModelChange",function(c){return h(a.filtro.modulo,c)||(a.filtro.modulo=c),c}),e(53,"option",14),n(54,"Tutti i moduli"),i(),e(55,"option",24),n(56,"Immagine e Marketing"),i(),e(57,"option",25),n(58,"Digitalizzazione e Automatismi"),i(),e(59,"option",26),n(60,"Contabilit\xE0 e Fiscalit\xE0"),i(),e(61,"option",27),n(62,"Ottimizzazione e Management"),i()()()()(),u(63,q,3,0,"div",28)(64,J,3,1,"div",29),e(65,"div",30),u(66,tt,2,1,"div",31),i(),u(67,st,6,1,"div",32)(68,lt,9,0,"div",33)(69,ct,1,0,"div",34)(70,pt,30,6,"div",35)),t&2&&(o(17),S("ngModel",a.filtro.stato),o(12),S("ngModel",a.filtro.priorita),o(16),S("ngModel",a.filtro.cliente),o(3),d("ngForOf",a.clienti),o(4),S("ngModel",a.filtro.modulo),o(11),d("ngIf",a.loading),o(),d("ngIf",a.error&&!a.loading),o(2),d("ngIf",!a.loading),o(),d("ngIf",!a.loading&&a.tasksCompletate.length),o(),d("ngIf",!a.loading&&a.tasksFiltrate.length===0),o(),d("ngIf",a.showTemplateModal),o(),d("ngIf",a.showTemplateModal))},dependencies:[D,I,z,R,A,L,N,j,B,W,V],styles:[".task-detail-container[_ngcontent-%COMP%]{padding:var(--gutter-lg);background:var(--background);min-height:100vh}.task-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) minmax(260px,350px);gap:var(--gutter-lg);align-items:flex-start}.main-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md);min-width:0}.task-card[_ngcontent-%COMP%]{border-left:4px solid var(--primary);display:flex;flex-direction:column;height:100%}.task-card.scaduta[_ngcontent-%COMP%]{border-left-color:#ef4444;background:linear-gradient(135deg,var(--background) 0%,color-mix(in srgb,#ef4444 8%,transparent) 100%)}.task-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--gutter-sm);margin-bottom:var(--gutter-sm);flex-wrap:wrap}.task-main-info[_ngcontent-%COMP%]{flex:1;min-width:0}.task-title[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:var(--gutter-sm)}.task-meta-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);color:color-mix(in srgb,var(--text-color) 60%,transparent)}.task-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);flex-shrink:0;margin-left:auto}.priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:5rem;height:var(--fs-md);padding:0 var(--gutter-sm);border-radius:6px;font-weight:700;border:1px solid var(--smoke-color-1);background:color-mix(in srgb,var(--text-color) 10%,transparent);text-transform:uppercase;letter-spacing:.5px}.progress-section[_ngcontent-%COMP%]{margin:var(--gutter-sm) 0}.progress-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.progress-stats[_ngcontent-%COMP%]{flex-shrink:0}.scadenza-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);background:var(--smoke-color-2);border-radius:8px;margin:var(--gutter-sm) 0;border:1px solid var(--smoke-color-1)}.scadenza-section.scaduta[_ngcontent-%COMP%]{background:color-mix(in srgb,#ef4444 12%,transparent);border-color:color-mix(in srgb,#ef4444 30%,transparent)}.scadenza-section.scadenza-imminente[_ngcontent-%COMP%]{background:color-mix(in srgb,#f59e0b 12%,transparent);border-color:color-mix(in srgb,#f59e0b 30%,transparent)}.sotto-tasks-counts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--gutter-sm);margin:var(--gutter-sm) 0}.count-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--gutter-sm);background:var(--smoke-color-2);border-radius:8px;border:1px solid var(--smoke-color-1)}.count-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:var(--fs-md);height:var(--fs-md);padding:var(--gutter-sm);border-radius:50%;font-weight:700;color:#fff}.count-badge.da-fare[_ngcontent-%COMP%]{background:#6b7280}.count-badge.in-lavorazione[_ngcontent-%COMP%]{background:var(--secondary)}.count-badge.completate[_ngcontent-%COMP%]{background:#10b981}.count-label[_ngcontent-%COMP%]{margin-top:4px;text-align:center;color:color-mix(in srgb,var(--text-color) 70%,transparent);text-transform:uppercase;letter-spacing:.5px}.task-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--gutter-sm);border-top:1px solid var(--smoke-color-1);margin-top:auto}.sotto-task-card[_ngcontent-%COMP%]{padding:var(--gutter-md);border-left:3px solid var(--primary);transition:all .3s cubic-bezier(.2,.9,.2,1);overflow:visible;position:relative}.sotto-task-card.expanded[_ngcontent-%COMP%]{box-shadow:0 8px 24px var(--shadow2);border-color:var(--primary)}.sotto-task-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--gutter-sm);margin-bottom:var(--gutter-sm);flex-wrap:wrap;cursor:pointer}.sotto-task-info[_ngcontent-%COMP%]{flex:1 1 320px;min-width:0;display:flex;align-items:flex-start;gap:var(--gutter-sm)}.sotto-task-content[_ngcontent-%COMP%]{flex:1;min-width:0}.sotto-task-meta[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);align-items:center;flex-wrap:wrap;margin-top:.25rem}.sotto-task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);margin-left:auto;flex:1 1 260px;justify-content:flex-end;flex-wrap:wrap;min-width:0;max-width:100%;position:relative;z-index:2}.dettaglio-container[_ngcontent-%COMP%]{max-height:0;overflow:hidden;opacity:0;transition:max-height .5s cubic-bezier(.4,0,.2,1),opacity .3s ease .1s}.dettaglio-container.show[_ngcontent-%COMP%]{max-height:5000px;opacity:1;transition:max-height .8s cubic-bezier(.4,0,.2,1),opacity .4s ease .1s}.dettaglio-list[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding-top:var(--gutter-sm);display:flex;flex-direction:column;gap:var(--gutter-sm)}.dettaglio-item[_ngcontent-%COMP%]{padding:var(--gutter-sm);background:var(--background);border-radius:10px;border:1px solid var(--smoke-color-1);transition:all .2s ease}.dettaglio-item[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:var(--smoke-color-2)}.dettaglio-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;align-items:start;column-gap:var(--gutter-sm);align-items:center;justify-content:center}.dettaglio-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) auto auto;align-items:center;gap:var(--gutter-sm)}.dettaglio-header[_ngcontent-%COMP%]   strong.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:color-mix(in srgb,var(--text-color) 50%,transparent)}.dettaglio-counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.75rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);background:var(--smoke-color-2);padding:.125rem .5rem;border-radius:12px;border:1px solid var(--smoke-color-1)}.sotto-task-card[_ngcontent-%COMP%]:not(.expanded)   .dettaglio-counter[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 15%,transparent);color:var(--primary);border-color:color-mix(in srgb,var(--primary) 30%,transparent)}.form-section.riepilogo[_ngcontent-%COMP%]{padding:0;background:transparent;border:none;box-shadow:none;align-self:flex-start;position:sticky;top:var(--gutter-lg)}.contenitore-sottotask[_ngcontent-%COMP%]{gap:var(--gutter-md);display:flex;flex-direction:column}.sotto-task-global-actions[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);align-items:center;margin-left:auto}.marcotaskform[_ngcontent-%COMP%]{margin-top:var(--gutter-lg)!important}.info-card[_ngcontent-%COMP%]{background:var(--background);border:1px solid var(--smoke-color-1);border-radius:16px;padding:var(--gutter-lg);box-shadow:0 4px 12px var(--shadow);position:sticky;top:var(--gutter-lg);z-index:10}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:var(--gutter-sm);font-weight:600;border-bottom:2px solid var(--primary);padding-bottom:var(--gutter-sm)}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm) 0;border-bottom:1px solid color-mix(in srgb,var(--text-color) 15%,transparent)}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color);margin:0}.info-item[_ngcontent-%COMP%]   span.scaduta[_ngcontent-%COMP%]{color:#e74c3c;font-weight:500}.info-item[_ngcontent-%COMP%]   span.imminente[_ngcontent-%COMP%]{color:#f39c12;font-weight:500}.form-section.riepilogo[_ngcontent-%COMP%]{padding:0;background:transparent;border:none;box-shadow:none;align-self:flex-start;position:sticky;top:var(--gutter-lg);z-index:10}.sotto-task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);margin-left:auto;flex:1 1 260px;justify-content:flex-end;flex-wrap:wrap;min-width:0;max-width:100%}.sotto-task-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%], .sotto-task-actions[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{flex:0 0 auto}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;z-index:1000;display:none;min-width:180px;padding:8px 0;margin:4px 0 0;background:var(--background);border:1px solid var(--smoke-color-1);border-radius:8px;box-shadow:0 4px 12px var(--shadow);list-style:none;z-index:10000}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-weight:800;background:color-mix(in srgb,var(--text-color) 10%,transparent);text-transform:uppercase;border-bottom:1px solid color-mix(in srgb,var(--text-color) 30%,transparent)}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;padding:8px 16px;background:transparent;border:none;color:var(--text-color);text-align:left;text-decoration:none;cursor:pointer;transition:all .2s ease;font-size:.85em}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2);color:var(--primary)}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:var(--smoke-color-1);margin:8px 0;border:none}@media (max-width: 1024px){.task-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-section.riepilogo[_ngcontent-%COMP%]{position:static;order:-1}}@media (max-width: 768px){.sotto-task-header[_ngcontent-%COMP%], .task-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.sotto-task-actions[_ngcontent-%COMP%], .task-header-actions[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}.dettaglio-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--gutter-sm)}.sotto-tasks-counts[_ngcontent-%COMP%]{grid-template-columns:1fr}.sotto-task-global-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%;margin-top:var(--gutter-sm)}}"]})};export{U as Task};
