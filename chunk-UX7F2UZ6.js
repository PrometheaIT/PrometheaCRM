import{a as ie}from"./chunk-HQJW367C.js";import{a as oe}from"./chunk-VHHLB7VF.js";import{c as ne}from"./chunk-CZQHU2W7.js";import{a as ee}from"./chunk-64LBLDON.js";import{a as te}from"./chunk-UONBFLMY.js";import{b as q,d as H,f as G,o as J,p as Q,u as X}from"./chunk-Z6GIDEG7.js";import{b as Z}from"./chunk-H4JMM7IJ.js";import"./chunk-XDKKMB7K.js";import{c as W}from"./chunk-WPZ527DH.js";import{d as $,e as Y,j as B,o as K,p as j}from"./chunk-PJ4DYJTI.js";import{A as T,Bb as N,Ga as V,I as k,La as f,S as b,Va as O,Wa as p,X as _,Xa as i,Y as u,Ya as o,Za as x,bb as D,cb as z,db as v,ea as S,f as E,gb as g,hb as m,ib as I,kb as w,mb as r,nb as C,ob as y,qb as A,rb as F,sa as L,sb as R,ua as s,vb as U,x as P,za as M}from"./chunk-R5VHGKSY.js";import"./chunk-X5YLR3NI.js";import{i as h}from"./chunk-ODN5LVDJ.js";var ae=()=>["/soggetti/nuovo","cliente"];function le(a,e){if(a&1&&(i(0,"option",43),r(1),o()),a&2){let t=e.$implicit;p("value",t),s(),C(t)}}function se(a,e){if(a&1&&(i(0,"option",43),r(1),o()),a&2){let t=e.$implicit;p("value",t),s(),C(t)}}function ce(a,e){if(a&1&&(i(0,"span"),r(1),o()),a&2){let t=m().$implicit;s(),C(t.comune)}}function de(a,e){if(a&1&&(i(0,"span"),r(1),o()),a&2){let t=m().$implicit;s(),y(" (",t.provincia,")")}}function pe(a,e){a&1&&(i(0,"span",70),r(1," Nessun indirizzo "),o())}function me(a,e){a&1&&(i(0,"span",71),r(1,"S\xEC"),o())}function _e(a,e){a&1&&(i(0,"span",72),r(1,"No"),o())}function ue(a,e){if(a&1&&(D(0),i(1,"span"),r(2),o(),z()),a&2){let t=e.ngIf;s(2),C(t.tipo)}}function ge(a,e){a&1&&r(0,"\u2014")}function fe(a,e){if(a&1){let t=v();i(0,"button",73),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),u(c.vediConfigurazionePromethea(d))}),x(1,"img",74),o()}}function ve(a,e){if(a&1){let t=v();i(0,"button",75),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),u(c.vediTrattativaYuvi(d))}),x(1,"img",76),o()}}function he(a,e){if(a&1){let t=v();i(0,"button",77),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),u(c.goToInformazioniTecniche(d))}),i(1,"span",14),r(2,"build"),o()()}}function Ce(a,e){if(a&1){let t=v();i(0,"button",83),g("click",function(l){_(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.vediConfigurazionePromethea(d),u(c.closeAllDropdowns())}),x(1,"img",84),i(2,"span"),r(3,"Configura Promethea"),o()()}}function be(a,e){if(a&1){let t=v();i(0,"button",83),g("click",function(l){_(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.vediTrattativaYuvi(d),u(c.closeAllDropdowns())}),x(1,"img",85),i(2,"span"),r(3,"Trattativa YUVI"),o()()}}function xe(a,e){if(a&1){let t=v();i(0,"button",83),g("click",function(l){_(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.goToInformazioniTecniche(d),u(c.closeAllDropdowns())}),i(1,"span",14),r(2,"build"),o(),i(3,"span"),r(4,"Informazioni Tecniche"),o()()}}function we(a,e){if(a&1){let t=v();i(0,"div",78)(1,"div",79),f(2,Ce,4,0,"button",80)(3,be,4,0,"button",80)(4,xe,5,0,"button",80),i(5,"button",81),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.onEdit(d),u(c.closeAllDropdowns())}),i(6,"span",14),r(7,"edit"),o(),i(8,"span"),r(9,"Modifica"),o()(),i(10,"button",81),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.openEsito(d),u(c.closeAllDropdowns())}),i(11,"span",14),r(12,"add"),o(),i(13,"span"),r(14,"Aggiungi esito"),o()(),i(15,"button",82),g("click",function(l){_(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.onDelete(d),u(c.closeAllDropdowns())}),i(16,"span",14),r(17,"delete"),o(),i(18,"span"),r(19,"Elimina"),o()()()()}if(a&2){let t=m().$implicit,n=m();s(2),p("ngIf",t.hasConfigPromethea),s(),p("ngIf",t.hasTrattativaYuvi),s(),p("ngIf",n.showInformazioniTecniche(t)),s(11),p("disabled",n.deletingIds.has(t.id))}}function Se(a,e){if(a&1){let t=v();i(0,"div",86),g("click",function(){_(t);let l=m(2);return u(l.closeAllDropdowns())}),o()}}function Ie(a,e){if(a&1){let t=v();i(0,"tr",44)(1,"td",45)(2,"div",46)(3,"strong",47),g("click",function(){let l=_(t).$implicit,d=m();return u(d.apriScheda(l))}),r(4),o()()(),i(5,"td",48)(6,"div",46),r(7),o()(),i(8,"td",49)(9,"div",46),r(10),o()(),i(11,"td",50)(12,"div",46),f(13,ce,2,1,"span",39)(14,de,2,1,"span",39)(15,pe,2,0,"span",51),o()(),i(16,"td",52)(17,"div",46)(18,"select",53,3),g("change",function(){let l=_(t).$implicit,d=I(19),c=m();return u(c.onChangeProdotto(l,d.value))}),i(20,"option",54),r(21,"Promethea"),o(),i(22,"option",55),r(23,"YUVI"),o()()()(),i(24,"td",56)(25,"div",46),f(26,me,2,0,"span",57)(27,_e,2,0,"span",58),o()(),i(28,"td",59)(29,"div",46),f(30,ue,3,1,"ng-container",60)(31,ge,1,0,"ng-template",null,4,N),o()(),i(33,"td",61)(34,"div",62),f(35,fe,2,0,"button",63)(36,ve,2,0,"button",64)(37,he,3,0,"button",65),i(38,"div",66)(39,"button",67),g("click",function(l){let d=_(t).$implicit,c=m();return l.stopPropagation(),u(c.toggleActionsDropdown(d.id,l))}),i(40,"span",14),r(41,"more_vert"),o()(),f(42,we,20,4,"div",68)(43,Se,1,0,"div",69),o()()()()}if(a&2){let t=e.$implicit,n=I(32),l=m();O("data-row-id",t.id),s(4),C(t.ragione_sociale),s(3),C(t.referente||"\u2014"),s(3),C(t.telefono||"\u2014"),s(3),p("ngIf",t.comune),s(),p("ngIf",t.provincia),s(),p("ngIf",!t.comune&&!t.provincia),s(3),p("value",t.prodotto)("disabled",l.updatingProdottoIds.has(t.id)),s(8),p("ngIf",t.configurato),s(),p("ngIf",!t.configurato),s(3),p("ngIf",t.ultimoEsito)("ngIfElse",n),s(5),p("ngIf",t.hasConfigPromethea),s(),p("ngIf",t.hasTrattativaYuvi),s(),p("ngIf",l.showInformazioniTecniche(t)),s(),w("open",l.activeDropdownId===t.id),s(4),p("ngIf",l.activeDropdownId===t.id),s(),p("ngIf",l.activeDropdownId===t.id)}}function ye(a,e){if(a&1&&(i(0,"tr")(1,"td",87),r(2),o()()),a&2){let t=m();s(2),y(" ",t.searchTerm?"Nessun cliente trovato":"Nessun cliente"," ")}}function Ee(a,e){a&1&&(i(0,"span",14),r(1,"unfold_more"),o())}function Pe(a,e){a&1&&(i(0,"span",14),r(1,"hourglass_bottom"),o())}function Te(a,e){if(a&1){let t=v();i(0,"div",88)(1,"button",89),g("click",function(){_(t);let l=m();return u(l.caricaTutti())}),f(2,Ee,2,0,"span",90)(3,Pe,2,0,"span",90),r(4),o()()}if(a&2){let t=m();s(),p("disabled",t.loading()),s(),p("ngIf",!t.loading()),s(),p("ngIf",t.loading()),s(),y(" ",t.loading()?"Caricamento\u2026":"Carica tutti"," ")}}function ke(a,e){if(a&1&&(i(0,"div",91),r(1),o()),a&2){let t=m();s(),y(" ",t.error()," ")}}var re=class a{listaService=b(ie);soggettiService=b(Z);kpiService=b(te);authService=b(W);router=b(K);searchSubject=new E;destroy$=new E;rows=this.listaService.rows;filteredRows=this.listaService.filteredRows;loading=this.listaService.loading;error=this.listaService.error;hasMore=this.listaService.hasMore;currentFiltri=this.listaService.currentFiltri;userModuli=S([]);isUserAdmin=S(!1);province=S([]);kpi=S({totale:0,conIban:0,conReferente:0});deletingIds=new Set;showEsito=!1;selectedId=null;updatingProdottoIds=new Set;activeDropdownId=null;esitiTipi=ne;searchTerm="";filtroConIban=!1;filtroConReferente=!1;isLoading=S(!0);renderer=b(M);clickListener;constructor(){this.searchSubject.pipe(k(this.destroy$),P(300),T()).subscribe(e=>{this.onSearchExecuted(e)})}ngOnInit(){return h(this,null,function*(){this.listaService.inizializza({tipo:"cliente",abilitaConfigurazioni:!0,abilitaTrattative:!0});try{yield Promise.all([this.listaService.caricaIniziali(),this.loadProvince(),this.refreshKpi(),this.loadUserData()])}finally{setTimeout(()=>{this.isLoading.set(!1)},300)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUserData(){return h(this,null,function*(){try{let e=this.authService.user();if(!e)return;let t=yield this.soggettiService.supabaseService.isAdmin();this.isUserAdmin.set(t);let{data:n}=yield this.soggettiService.supabaseService.getAppUserById(e.id);n&&n.moduli&&this.userModuli.set(n.moduli)}catch(e){console.error("Errore nel caricamento dati utente:",e)}})}caricaTutti(){return h(this,null,function*(){yield this.listaService.caricaTutti()})}allLoaded(){return this.listaService.allLoaded()}onSearchExecuted(e){return h(this,null,function*(){yield this.listaService.cerca(e)})}onSearchChange(e){this.searchTerm=e,this.searchSubject.next(e)}onChangeFiltroEsito(e){this.listaService.applicaFiltri({esito:e,conIban:this.filtroConIban,conReferente:this.filtroConReferente})}onChangeFiltroProvincia(e){this.listaService.applicaFiltri({provincia:e})}onChangeSortDir(e){this.listaService.applicaFiltri({sortDir:e})}onFiltroTotale(){this.filtroConIban=!1,this.filtroConReferente=!1,this.listaService.applicaFiltri({esito:"tutti",provincia:"tutte",conIban:!1,conReferente:!1})}onFiltroConIban(){this.filtroConIban=!0,this.filtroConReferente=!1,this.listaService.applicaFiltri({esito:"tutti",conIban:!0,conReferente:!1})}onFiltroConReferente(){this.filtroConIban=!1,this.filtroConReferente=!0,this.listaService.applicaFiltri({esito:"tutti",conIban:!1,conReferente:!0})}vediConfigurazionePromethea(e){this.router.navigate(["/alchemizzatore"],{queryParams:{prospectId:e.id,step:6},state:{prospect:e,goToStep:6,from:"lista-clienti"}})}vediTrattativaYuvi(e){return h(this,null,function*(){try{let{data:t,error:n}=yield this.soggettiService.supabaseService.supabase.from("trattative_yuvi").select("*").eq("prospect_id",e.id).order("created_at",{ascending:!1}).limit(1).single();if(n)throw n;if(!t){alert("Nessuna trattativa YUVI trovata per questo cliente");return}this.router.navigate(["/yuvi-trattativa"],{queryParams:{clienteId:e.id,trattativaId:t.id},state:{cliente:e,trattativaEsistente:t}})}catch(t){alert("Errore nel caricamento della trattativa: "+t.message)}})}onDelete(e){return h(this,null,function*(){if(!(!e?.id||!confirm(`Eliminare il cliente "${e.ragione_sociale}"?`))){this.deletingIds.add(e.id);try{(yield this.listaService.eliminaSoggetto(e.id))&&(yield this.refreshKpi())}catch(n){console.error("Errore durante l'eliminazione:",n)}finally{this.deletingIds.delete(e.id)}}})}onEdit(e){e?.id&&this.router.navigate(["/soggetti/modifica",e.id])}openEsito(e){this.selectedId=e.id,this.showEsito=!0}apriScheda(e){e?.id&&this.router.navigate(["/soggetti",e.tipo??"cliente",e.id])}onPopupClosed(e){return h(this,null,function*(){this.showEsito=!1,this.selectedId=null,e.saved&&(yield Promise.all([this.listaService.caricaTutti(),this.refreshKpi()]))})}onChangeProdotto(e,t){return h(this,null,function*(){if(!e?.id)return;let n=t;if(e.prodotto!==n){this.updatingProdottoIds.add(e.id);try{yield this.listaService.aggiornaProdotto(e.id,n)}catch(l){console.error("Errore durante l'aggiornamento del prodotto:",l)}finally{this.updatingProdottoIds.delete(e.id)}}})}showInformazioniTecniche(e){if(!e.moduliAttivi||e.moduliAttivi.length===0)return!1;if(this.isUserAdmin())return!0;let t=this.userModuli();return e.moduliAttivi.some(n=>t.includes(n))}getModuloDaAprire(e){let t=this.userModuli(),n=e.moduliAttivi||[];return this.isUserAdmin()?n[0]||"social":n.find(d=>t.includes(d))||"social"}goToInformazioniTecniche(e){if(!e.id){console.error("Cliente senza ID:",e);return}console.log("Navigando a informazioni tecniche per cliente:",e.id),this.router.navigate(["/informazioni-tecniche"],{queryParams:{clienteId:e.id}})}trackById=(e,t)=>t.id;toggleActionsDropdown(e,t){t&&t.stopPropagation();let n=this.activeDropdownId===e;this.activeDropdownId=n?null:e,this.activeDropdownId?(this.clickListener=this.renderer.listen("document","click",l=>{l.target.closest(".actions-dropdown")||this.closeAllDropdowns()}),document.body.classList.add("dropdown-open")):this.closeAllDropdowns()}closeAllDropdowns(){this.activeDropdownId=null,document.body.classList.remove("dropdown-open"),this.clickListener&&(this.clickListener(),this.clickListener=void 0)}onWindowScroll(){this.activeDropdownId&&this.closeAllDropdowns()}loadProvince(){return h(this,null,function*(){let{data:e}=yield this.soggettiService.getProvinceByTipo("cliente");e&&this.province.set(e)})}refreshKpi(){return h(this,null,function*(){try{let e=yield this.kpiService.getAnagraficaKPI("cliente");this.kpi.set({totale:e.totale,conIban:e.conIban,conReferente:e.conReferente})}catch(e){console.error("Errore nel caricamento KPI:",e)}})}getLastEsito(e){return!Array.isArray(e)||e.length===0?null:e.reduce((t,n)=>{let l=new Date(n.ts).getTime(),d=new Date(t.ts).getTime();return l>d?n:t})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=V({type:a,selectors:[["app-lista-clienti"]],hostBindings:function(t,n){t&1&&g("scroll",function(){return n.onWindowScroll()},L)},decls:98,vars:30,consts:[["filtroSel",""],["ordinaSel",""],["provSel",""],["sel",""],["noEsito",""],["title","Caricamento Clienti","subtitle","Stiamo caricando i tuoi clienti...",3,"isLoading"],[1,"form-section"],[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"sottotitolo"],[1,"flex-1"],["title","Aggiungi cliente","aria-label","Aggiungi cliente",1,"icon-btn",3,"routerLink"],[1,"material-icons"],[1,"prospect-cards"],[1,"card",3,"click"],[1,"card-title"],[1,"card-number"],[1,"table-section"],[1,"table-tools"],[1,"tool"],["for","search",1,"label"],["id","search","type","text","placeholder","Nome, telefono, email...",1,"table-inline-input",3,"ngModelChange","ngModel"],["for","filtroEsito",1,"label"],["id","filtroEsito",1,"table-inline-select",3,"change","value"],["value","tutti"],["value","senza-esito"],[3,"value",4,"ngFor","ngForOf"],["for","ordinaPer",1,"label"],["id","ordinaPer",1,"table-inline-select",3,"change","value"],["value","desc"],["value","asc"],["for","filtroProvincia",1,"label"],["id","filtroProvincia",1,"table-inline-select",3,"change","value"],["value","tutte"],[1,"table-container"],[1,"crm-table"],["class","row-clickable",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","load-more-container",4,"ngIf"],["style","text-align:center; color:#ef4444; margin-top:1rem;",4,"ngIf"],[3,"closed","open","soggettoId","tipo"],[3,"value"],[1,"row-clickable"],["data-label","Ragione Sociale"],[1,"cell-content"],[1,"link",3,"click"],["data-label","Referente"],["data-label","Telefono"],["data-label","Localit\xE0"],["style","color: #6b7280; font-style: italic;",4,"ngIf"],["data-label","Prodotto"],[1,"table-inline-select",3,"change","value","disabled"],["value","Promethea"],["value","YUVI"],["data-label","Configurato"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["data-label","Ultimo Esito"],[4,"ngIf","ngIfElse"],["data-label","Azioni"],[1,"actions-container"],["class","action-btn document","title","Configurazione Promethea",3,"click",4,"ngIf"],["class","action-btn email","title","Trattativa YUVI",3,"click",4,"ngIf"],["class","action-btn info-tecniche","title","Informazioni Tecniche",3,"click",4,"ngIf"],[1,"actions-dropdown"],["title","Altre azioni",1,"action-btn",3,"click"],["class","modal",4,"ngIf"],["class","mobile-dropdown-backdrop",3,"click",4,"ngIf"],[2,"color","#6b7280","font-style","italic"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["title","Configurazione Promethea",1,"action-btn","document",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img"],["title","Trattativa YUVI",1,"action-btn","email",3,"click"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img"],["title","Informazioni Tecniche",1,"action-btn","info-tecniche",3,"click"],[1,"modal"],[1,"modal-body",2,"padding","0"],["class","dropdown-item mobile-only",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"click","disabled"],[1,"dropdown-item","mobile-only",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img",2,"width","16px","height","16px"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img",2,"width","16px","height","16px"],[1,"mobile-dropdown-backdrop",3,"click"],["colspan","8",2,"text-align","center","padding","1.5rem"],[1,"load-more-container"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],[2,"text-align","center","color","#ef4444","margin-top","1rem"]],template:function(t,n){if(t&1){let l=v();x(0,"app-page-loader",5),i(1,"div")(2,"div",6)(3,"div",7)(4,"i",8),r(5,"business"),o(),i(6,"div",9)(7,"h2",10),r(8,"Clienti"),o(),i(9,"p",11),r(10,"Panoramica clienti e filtri rapidi"),o()(),x(11,"div",12),i(12,"a",13)(13,"span",14),r(14,"add_circle"),o()()(),i(15,"div",15)(16,"div",16),g("click",function(){return _(l),u(n.onFiltroTotale())}),i(17,"h3",17),r(18,"Totale"),o(),i(19,"div",18),r(20),o()(),i(21,"div",16),g("click",function(){return _(l),u(n.onFiltroConIban())}),i(22,"h3",17),r(23,"Con IBAN"),o(),i(24,"div",18),r(25),o()(),i(26,"div",16),g("click",function(){return _(l),u(n.onFiltroConReferente())}),i(27,"h3",17),r(28,"Con Referente"),o(),i(29,"div",18),r(30),o()()()(),i(31,"section",19)(32,"div",20)(33,"div",21)(34,"label",22)(35,"span",14),r(36,"search"),o(),r(37," Cerca "),o(),i(38,"input",23),R("ngModelChange",function(c){return _(l),F(n.searchTerm,c)||(n.searchTerm=c),u(c)}),g("ngModelChange",function(c){return _(l),u(n.onSearchChange(c))}),o()(),i(39,"div",21)(40,"label",24)(41,"span",14),r(42,"filter_list"),o(),r(43," Ultimo esito "),o(),i(44,"select",25,0),g("change",function(){_(l);let c=I(45);return u(n.onChangeFiltroEsito(c.value))}),i(46,"option",26),r(47,"Tutti"),o(),i(48,"option",27),r(49,"Senza esito"),o(),f(50,le,2,2,"option",28),o()(),i(51,"div",21)(52,"label",29)(53,"span",14),r(54,"sort"),o(),r(55," Ordina per: "),o(),i(56,"select",30,1),g("change",function(){_(l);let c=I(57);return u(n.onChangeSortDir(c.value))}),i(58,"option",31),r(59,"Pi\xF9 recente"),o(),i(60,"option",32),r(61,"Meno recente"),o()()(),i(62,"div",21)(63,"label",33)(64,"span",14),r(65,"place"),o(),r(66," Provincia "),o(),i(67,"select",34,2),g("change",function(){_(l);let c=I(68);return u(n.onChangeFiltroProvincia(c.value))}),i(69,"option",35),r(70,"Tutte"),o(),f(71,se,2,2,"option",28),o()()(),i(72,"div",36)(73,"table",37)(74,"thead")(75,"tr")(76,"th"),r(77,"Ragione Sociale"),o(),i(78,"th"),r(79,"Referente"),o(),i(80,"th"),r(81,"Telefono"),o(),i(82,"th"),r(83,"Localit\xE0"),o(),i(84,"th"),r(85,"Prodotto"),o(),i(86,"th"),r(87,"Configurato"),o(),i(88,"th"),r(89,"Ultimo Esito"),o(),i(90,"th"),r(91,"Azioni"),o()()(),i(92,"tbody"),f(93,Ie,44,20,"tr",38)(94,ye,3,1,"tr",39),o()()(),f(95,Te,5,4,"div",40)(96,ke,2,1,"div",41),o(),i(97,"app-esito-popup",42),g("closed",function(c){return _(l),u(n.onPopupClosed(c))}),o()()}t&2&&(p("isLoading",n.isLoading()),s(),w("hidden",n.isLoading()),s(11),p("routerLink",U(29,ae)),s(4),w("card-active",n.currentFiltri().esito==="tutti"&&n.currentFiltri().provincia==="tutte"&&!n.currentFiltri().conIban&&!n.currentFiltri().conReferente),s(4),C(n.kpi().totale),s(),w("card-active",n.currentFiltri().conIban),s(4),C(n.kpi().conIban),s(),w("card-active",n.currentFiltri().conReferente),s(4),C(n.kpi().conReferente),s(8),A("ngModel",n.searchTerm),s(6),p("value",n.currentFiltri().esito),s(6),p("ngForOf",n.esitiTipi),s(6),p("value",n.currentFiltri().sortDir),s(11),p("value",n.currentFiltri().provincia),s(4),p("ngForOf",n.province()),s(),w("dropdown-open",!!n.activeDropdownId),s(21),p("ngForOf",n.filteredRows())("ngForTrackBy",n.trackById),s(),p("ngIf",!n.loading()&&!n.error()&&n.filteredRows().length===0),s(),p("ngIf",!n.error()&&n.hasMore()),s(),p("ngIf",n.error()),s(),p("open",n.showEsito)("soggettoId",n.selectedId)("tipo","cliente"))},dependencies:[B,$,Y,oe,X,J,Q,q,H,G,ee,j],styles:['.actions-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-flex}.actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;width:200px;z-index:1000;border:1px solid var(--smoke-color-1);border-radius:12px;box-shadow:0 8px 24px var(--shadow);background:var(--background);animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:var(--gutter-sm);padding:.75rem 1rem;border:none;background:transparent;color:var(--text-color);cursor:pointer;transition:background .15s ease;font-size:var(--fs-sm);text-align:left;border-bottom:1px solid var(--smoke-color-1)}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2)}.dropdown-item[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.dropdown-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.1rem;width:20px}.dropdown-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:transparent;z-index:999;display:none}.actions-dropdown.open[_ngcontent-%COMP%] ~ .dropdown-overlay[_ngcontent-%COMP%]{display:block}@container (max-width: 768px){.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.actions-dropdown){display:none}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .dropdown-item[style*="display: none"][_ngcontent-%COMP%]{display:flex!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown.open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:fixed!important;inset:50% auto auto 50%!important;transform:translate(-50%,-50%)!important;width:min(90vw,300px)!important;max-height:70vh!important;overflow-y:auto!important;z-index:1001!important;border-radius:16px!important;box-shadow:0 20px 40px var(--shadow)!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:3rem!important;height:3rem!important;font-size:1.3rem!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{justify-content:center!important;padding:var(--gutter-sm) 0}}@container (min-width: 769px){.actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{min-width:180px}.actions-dropdown.left[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{right:auto;left:0}.actions-dropdown.top[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{top:auto;bottom:100%}}.table-container[_ngcontent-%COMP%]{overflow-x:auto;position:relative}body.dropdown-open[_ngcontent-%COMP%]{overflow:hidden}.mobile-dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:color-mix(in srgb,var(--text-color) 20%,transparent);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:998;display:none}.actions-dropdown.open[_ngcontent-%COMP%] ~ .mobile-dropdown-backdrop[_ngcontent-%COMP%]{display:block}']})};export{re as ListaClienti};
