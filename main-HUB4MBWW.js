import{b as ut}from"./chunk-3Y2ZP6KK.js";import{a as A}from"./chunk-3347WCPA.js";import{b as gt,c as f}from"./chunk-2ONBSOVF.js";import{e as rt,f as at,k as st,l as ct,n as lt,p as mt,q as P,r as pt,s as V,t as dt}from"./chunk-233B5766.js";import{Bb as Q,Da as K,Db as y,Ea as q,Fa as g,Fb as s,Gb as tt,Hb as et,I as T,N as k,Pb as E,R,Ra as Z,S as v,Tb as it,Wa as M,X as l,Xb as nt,Y as m,Z as O,Zb as ot,_ as z,f as W,gb as h,hb as o,ib as a,jb as w,nb as j,ob as Y,qb as x,tb as p,u as J,ub as c}from"./chunk-R6HFAJZF.js";import"./chunk-X5YLR3NI.js";import{a as $,b as G,i as S}from"./chunk-ODN5LVDJ.js";var _=class e{userService=v(A);router=v(P);authService=v(f);canActivate(){return S(this,null,function*(){console.log("\u{1F510} AdminGuard - refreshing admin status...");let t=this.authService.user()??(yield this.authService.getAuthState());return t?(yield this.userService.updateUserStatus(t.id),this.userService.isAdmin()?!0:this.router.createUrlTree(["/unauthorized"])):this.router.createUrlTree(["/unauthorized"])})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var u=class e{constructor(i,t){this.auth=i;this.router=t}canActivate(i,t){return S(this,null,function*(){try{if(typeof this.auth.getAuthState=="function"&&(yield this.auth.getAuthState()))return!0;if(typeof this.auth.isLoggedIn=="function"){if(yield this.auth.isLoggedIn())return!0}else if(typeof this.auth.isAuthenticated=="function"){if(this.auth.isAuthenticated())return!0}else if(this.auth.currentUserValue){if(this.auth.currentUserValue)return!0}else if(this.auth.user){let r=this.auth.user;if(typeof r=="function"?yield r():r)return!0}}catch(r){console.debug("AuthGuard: controllo auth fallito",r)}return this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1})}static \u0275fac=function(t){return new(t||e)(R(f),R(P))};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var L=[{path:"login",loadComponent:()=>import("./chunk-ACB3TLGP.js").then(e=>e.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-CWD5TQVU.js").then(e=>e.RegisterComponent)},{path:"unauthorized",loadComponent:()=>import("./chunk-H5EBAFTC.js").then(e=>e.UnauthorizedComponent)},{path:"home",canActivate:[u],loadComponent:()=>import("./chunk-7CHKHSST.js").then(e=>e.Home)},{path:"alchemizzatore",loadComponent:()=>import("./chunk-Y2IDUYCH.js").then(e=>e.Alchemizzatore)},{path:"yuvi-trattativa",loadComponent:()=>import("./chunk-ZI3C7FWP.js").then(e=>e.YuviTrattativa)},{path:"lista-clienti",canActivate:[u],loadComponent:()=>import("./chunk-ZMZW6L2M.js").then(e=>e.ListaClienti)},{path:"lista-prospect",canActivate:[u],loadComponent:()=>import("./chunk-U475XPKZ.js").then(e=>e.ListaProspect)},{path:"soggetto/nuovo",loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto)},{path:"soggetto/:id",loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto),canActivate:[u]},{path:"soggetto/:id/edit",loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto),canActivate:[u]},{path:"soggetto/nuovo/:tipo",loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto)},{path:"preventivo/:id",canActivate:[u],loadComponent:()=>import("./chunk-4ZICKP7U.js").then(e=>e.Preventivo)},{path:"prospect",redirectTo:"lista-prospect"},{path:"clienti",redirectTo:"lista-clienti"},{path:"fornitori",redirectTo:"lista-fornitori"},{path:"aggiungi-prospect",loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto),data:{tipo:"prospect"}},{path:"aggiungi-cliente",canActivate:[u,_],loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto),data:{tipo:"cliente"}},{path:"aggiungi-fornitore",canActivate:[u,_],loadComponent:()=>import("./chunk-CEUZHWKN.js").then(e=>e.AddSoggetto),data:{tipo:"fornitore"}},{path:"lista-fornitori",canActivate:[u,_],loadComponent:()=>import("./chunk-VJNWARNW.js").then(e=>e.ListaFornitori)},{path:"task",canActivate:[u],loadComponent:()=>import("./chunk-W5LZ6WR2.js").then(e=>e.Task)},{path:"task-singola",canActivate:[u],loadComponent:()=>import("./chunk-PSZ3MZ5X.js").then(e=>e.TaskSingola)},{path:"task-singola/:id",canActivate:[u],loadComponent:()=>import("./chunk-PSZ3MZ5X.js").then(e=>e.TaskSingola)},{path:"visualizzazione-kpi",loadComponent:()=>import("./chunk-VOMEEXLB.js").then(e=>e.VisualizzazioneKpi)},{path:"mappa",loadComponent:()=>import("./chunk-B72YS6BK.js").then(e=>e.Mappa)},{path:"admin-utenti",canActivate:[u,_],loadComponent:()=>import("./chunk-CF6TOF4F.js").then(e=>e.AdminUtenti)},{path:"immagine",loadComponent:()=>import("./chunk-XVEZKFHG.js").then(e=>e.Immagine),canActivate:[_]},{path:"marketing",loadComponent:()=>import("./chunk-QSDIVMAE.js").then(e=>e.Marketing)},{path:"digitalizzazione",loadComponent:()=>import("./chunk-62MRW3VD.js").then(e=>e.Digitalizzazione),canActivate:[_]},{path:"contabilita",loadComponent:()=>import("./chunk-6VC62EZW.js").then(e=>e.Contabilita),canActivate:[_]},{path:"scadenze-fiscali",loadComponent:()=>import("./chunk-PLB3NWEH.js").then(e=>e.ScadenzeFiscali),canActivate:[_]},{path:"ottimizzazione",loadComponent:()=>import("./chunk-SKONA4GW.js").then(e=>e.Ottimizzazione),canActivate:[_]},{path:"informazioni-tecniche",canActivate:[u],loadComponent:()=>import("./chunk-4NLIIQK7.js").then(e=>e.InformazioniTecniche)},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",redirectTo:"/home"}];var F={providers:[ot({eventCoalescing:!0}),V(L),f,gt,A,ut]};var I=class e{currentTheme="light";initializeTheme(){let i=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";this.currentTheme=i||t,this.applyTheme(this.currentTheme),console.log("\u{1F3A8} Tema inizializzato:",this.currentTheme)}toggleTheme(){this.currentTheme=this.currentTheme==="light"?"dark":"light",this.applyTheme(this.currentTheme),localStorage.setItem("theme",this.currentTheme),console.log("\u{1F3A8} Tema cambiato a:",this.currentTheme)}getCurrentTheme(){return this.currentTheme}applyTheme(i){let t=document.documentElement;i==="dark"?(t.setAttribute("data-theme","dark"),t.classList.add("dark-theme")):(t.setAttribute("data-theme","light"),t.classList.remove("dark-theme"))}setTheme(i){this.currentTheme=i,this.applyTheme(i),localStorage.setItem("theme",i),console.log("\u{1F3A8} Tema impostato:",i)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var ht=()=>["/soggetto","nuovo","cliente"],_t=()=>["/soggetto","nuovo","prospect"],vt=()=>["/soggetto","nuovo","fornitore"],xt=(e,i,t,r,n)=>({top:e,bottom:i,left:t,right:r,transform:n});function ft(e,i){if(e&1){let t=x();o(0,"a",27),p("click",function(){l(t);let n=c(2);return m(n.closeSidebar())}),o(1,"span",13),s(2,"local_shipping"),a(),o(3,"span",14),s(4,"Fornitori"),a()()}}function bt(e,i){if(e&1){let t=x();o(0,"div",28)(1,"div",29),p("click",function(n){l(t);let d=c(2);return m(d.toggleMenu("aggiungi",n))}),o(2,"span",13),s(3,"add_circle"),a(),o(4,"span",30),s(5,"Aggiungi"),a(),O(),o(6,"svg",31),w(7,"path",32),a()(),z(),o(8,"div",33)(9,"a",34),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(10,"span",13),s(11,"person"),a(),o(12,"span",35),s(13,"Nuovo Cliente"),a()(),o(14,"a",34),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(15,"span",13),s(16,"person_search"),a(),o(17,"span",35),s(18,"Nuovo Prospect"),a()(),o(19,"a",34),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(20,"span",13),s(21,"local_shipping"),a(),o(22,"span",35),s(23,"Nuovo Fornitore"),a()()()()}if(e&2){let t=c(2);y("open",t.isMenuOpen("aggiungi")),g(9),h("routerLink",E(5,ht)),g(5),h("routerLink",E(6,_t)),g(5),h("routerLink",E(7,vt))}}function St(e,i){if(e&1){let t=x();j(0),o(1,"a",36),p("click",function(){l(t);let n=c(2);return m(n.closeSidebar())}),o(2,"span",13),s(3,"task_alt"),a(),o(4,"span",14),s(5,"Task"),a()(),o(6,"div",28)(7,"div",29),p("click",function(n){l(t);let d=c(2);return m(d.toggleMenu("moduli",n))}),o(8,"span",13),s(9,"extension"),a(),o(10,"span",37),s(11,"Moduli"),a(),O(),o(12,"svg",31),w(13,"path",32),a()(),z(),o(14,"div",33)(15,"a",38),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(16,"span",13),s(17,"image"),a(),o(18,"span",35),s(19,"Immagine & Marketing"),a()(),o(20,"a",39),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(21,"span",13),s(22,"computer"),a(),o(23,"span",35),s(24,"Digitalizzazione & Automatismi"),a()(),o(25,"a",40),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(26,"span",13),s(27,"calculate"),a(),o(28,"span",35),s(29,"Contabilit\xE0 & Fiscalit\xE0"),a()(),o(30,"a",41),p("click",function(){l(t);let n=c(2);return n.closeAllMenus(),m(n.closeSidebar())}),o(31,"span",13),s(32,"tune"),a(),o(33,"span",35),s(34,"Ottimizzazione & Management"),a()()()(),Y()}if(e&2){let t=c(2);g(6),y("open",t.isMenuOpen("moduli"))}}function wt(e,i){if(e&1){let t=x();o(0,"button",53),p("click",function(){l(t);let n=c(3);return m(n.goToAdminUtenti())}),o(1,"span",13),s(2,"admin_panel_settings"),a()()}}function Ct(e,i){if(e&1){let t=x();j(0),o(1,"div",42)(2,"div",43),s(3),a()(),o(4,"div",44)(5,"div",45)(6,"label",46)(7,"input",47),p("change",function(){l(t);let n=c(2);return m(n.setLight())}),a(),o(8,"span",48)(9,"span",13),s(10,"light_mode"),a()()(),o(11,"label",49)(12,"input",47),p("change",function(){l(t);let n=c(2);return m(n.setDark())}),a(),o(13,"span",48)(14,"span",13),s(15,"dark_mode"),a()()()(),o(16,"div",50),M(17,wt,3,0,"button",51),o(18,"button",52),p("click",function(){l(t);let n=c(2);return m(n.logout())}),o(19,"span",13),s(20,"logout"),a()()()(),Y()}if(e&2){let t=c(2);g(2),h("title",t.currentUser.email),g(),tt(t.currentUser.email),g(4),h("checked",t.getCurrentTheme()==="light"),g(5),h("checked",t.getCurrentTheme()==="dark"),g(5),h("ngIf",t.isAdmin())}}function kt(e,i){if(e&1){let t=x();o(0,"a",54),p("click",function(){l(t);let n=c(2);return m(n.closeSidebar())}),o(1,"span",13),s(2,"login"),a(),o(3,"span"),s(4,"Accedi"),a()()}}function Mt(e,i){if(e&1){let t=x();o(0,"div",4),p("touchstart",function(n){l(t);let d=c();return m(d.onSidebarTouchStart(n))})("touchmove",function(n){l(t);let d=c();return m(d.onSidebarTouchMove(n))})("touchend",function(n){l(t);let d=c();return m(d.onSidebarTouchEnd(n))}),o(1,"div",5)(2,"picture"),w(3,"img",6)(4,"img",7),a()(),o(5,"div",8),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),O(),o(6,"svg",9),w(7,"path",10),a()(),z(),o(8,"div",11)(9,"a",12),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(10,"span",13),s(11,"home"),a(),o(12,"span",14),s(13,"Home"),a()(),o(14,"a",15),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(15,"span",13),s(16,"people"),a(),o(17,"span",14),s(18,"Clienti"),a()(),o(19,"a",16),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(20,"span",13),s(21,"person_search"),a(),o(22,"span",14),s(23,"Prospect"),a()(),M(24,ft,5,0,"a",17),o(25,"a",18),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(26,"span",13),s(27,"map"),a(),o(28,"span",14),s(29,"Mappa"),a()(),o(30,"a",19),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),w(31,"img",20),o(32,"span",14),s(33,"YUVI Trattativa"),a()(),o(34,"a",21),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(35,"span",13),s(36,"analytics"),a(),o(37,"span",14),s(38,"Visualizzazione KPI"),a()(),o(39,"a",22),p("click",function(){l(t);let n=c();return m(n.closeSidebar())}),o(40,"span",13),s(41,"auto_awesome"),a(),o(42,"span",14),s(43,"Alchemizzatore"),a()(),M(44,bt,24,8,"div",23)(45,St,35,2,"ng-container",24),a(),o(46,"div",25),M(47,Ct,21,5,"ng-container",26)(48,kt,5,0,"ng-template",null,0,nt),a()()}if(e&2){let t=Q(49),r=c();y("closed",r.isSidebarClosed)("hidden",!r.showSidebar),g(24),h("ngIf",r.isAdmin()),g(20),h("ngIf",r.isAdmin()),g(),h("ngIf",r.isAdmin()),g(2),h("ngIf",r.currentUser)("ngIfElse",t)}}function yt(e,i){if(e&1){let t=x();o(0,"button",55),p("mousedown",function(n){l(t);let d=c();return m(d.onToggleDragStart(n))})("touchstart",function(n){l(t);let d=c();return m(d.onToggleDragStart(n))}),o(1,"span",13),s(2,"menu"),a(),o(3,"div",56),s(4),a()()}if(e&2){let t=c();y("dragging",t.isDragging),h("ngStyle",t.toggleStyle),g(3),h("ngStyle",it(5,xt,t.tooltipPosition.top,t.tooltipPosition.bottom,t.tooltipPosition.left,t.tooltipPosition.right,t.tooltipPosition.transform)),g(),et(" ",t.tooltipText," ")}}var D=class e{title="CRM Promethea";authService=v(f);userService=v(A);themeService=v(I);router=v(P);user=this.authService.user;currentRole="user";showSidebar=!1;isSidebarClosed=!1;isSidebarTouchScrolling=!1;_sidebarTouchStartY=0;openMenus=new Set;isDragging=!1;togglePosition={x:16,y:16};dragOffset={x:0,y:0};dragStartPosition={x:0,y:0};destroy$=new W;constructor(){this.router.events.pipe(J(i=>i instanceof lt),T(this.destroy$)).subscribe(i=>{let t=["/login","/register","/unauthorized"];this.showSidebar=!t.includes(i.url),this.closeAllMenus(),window.innerWidth<=768&&(this.isSidebarClosed=!0)}),this.loadTogglePosition()}ngOnInit(){return S(this,null,function*(){console.log("\u{1F680} App - Inizializzazione...");try{this.themeService.initializeTheme();let i=yield this.authService.getAuthState();i?(console.log("\u2705 Utente autenticato:",i.id),yield this.userService.updateUserStatus(i.id),this.showSidebar=!0):(console.log("\u274C Nessun utente autenticato"),this.showSidebar=!1),this.userService.currentRole$.pipe(T(this.destroy$)).subscribe(t=>{this.currentRole=t}),this.authService.user$.pipe(T(this.destroy$)).subscribe(t=>{this.showSidebar=!!t,t||(this.currentRole="user",this.userService.resetUserStatus())}),console.log("\u2705 App inizializzazione completata")}catch(i){console.error("\u274C Errore inizializzazione app:",i),this.showSidebar=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete();try{document.body.style.overflow=""}catch{}}onSidebarTouchStart(i){this._sidebarTouchStartY=i.touches?.[0]?.clientY??0,this.isSidebarTouchScrolling=!1}onSidebarTouchMove(i){let t=i.touches?.[0]?.clientY??0;Math.abs(t-this._sidebarTouchStartY)>6&&(this.isSidebarTouchScrolling=!0),i.stopPropagation()}onSidebarTouchEnd(i){setTimeout(()=>this.isSidebarTouchScrolling=!1,150)}toggleSidebar(){this.isSidebarClosed=!this.isSidebarClosed,this.updateBodyScrollLock()}closeSidebar(){this.isSidebarTouchScrolling||(this.isSidebarClosed=!0,this.closeAllMenus(),this.updateBodyScrollLock())}openSidebar(){this.isSidebarClosed=!1,this.updateBodyScrollLock()}toggleMenu(i,t){t&&t.stopPropagation(),this.openMenus.has(i)?this.openMenus.delete(i):(this.openMenus.clear(),this.openMenus.add(i))}isMenuOpen(i){return this.openMenus.has(i)}closeAllMenus(){this.openMenus.clear()}onToggleDragStart(i){i.preventDefault(),i.stopPropagation(),this.isDragging=!0;let t="touches"in i?i.touches[0].clientX:i.clientX,r="touches"in i?i.touches[0].clientY:i.clientY;this.dragStartPosition={x:t,y:r},this.dragOffset={x:t-this.togglePosition.x,y:r-this.togglePosition.y},console.log("\u{1F3AF} Drag started:",{start:this.dragStartPosition,offset:this.dragOffset}),document.addEventListener("mousemove",this.onToggleDragMove),document.addEventListener("mouseup",this.onToggleDragEnd),document.addEventListener("touchmove",this.onToggleDragMove,{passive:!1}),document.addEventListener("touchend",this.onToggleDragEnd)}onToggleDragMove=i=>{if(!this.isDragging)return;i.preventDefault();let t="touches"in i?i.touches[0].clientX:i.clientX,r="touches"in i?i.touches[0].clientY:i.clientY,n=t-this.dragOffset.x,d=r-this.dragOffset.y,b=10,C=48;n=Math.max(b,Math.min(window.innerWidth-C-b,n)),d=Math.max(b,Math.min(window.innerHeight-C-b,d)),this.togglePosition={x:n,y:d}};onToggleDragEnd=i=>{if(!this.isDragging)return;this.isDragging=!1;let t="touches"in i?i.changedTouches[0].clientX:i.clientX,r="touches"in i?i.changedTouches[0].clientY:i.clientY,n=Math.abs(t-this.dragStartPosition.x)+Math.abs(r-this.dragStartPosition.y);console.log("\u{1F3AF} Drag ended:",{distance:n,position:this.togglePosition}),n<5&&(console.log("\u{1F446} Click detected, opening sidebar"),this.openSidebar()),this.saveTogglePosition(),document.removeEventListener("mousemove",this.onToggleDragMove),document.removeEventListener("mouseup",this.onToggleDragEnd),document.removeEventListener("touchmove",this.onToggleDragMove),document.removeEventListener("touchend",this.onToggleDragEnd)};saveTogglePosition(){try{localStorage.setItem("sidebar-toggle-position",JSON.stringify(this.togglePosition)),console.log("\u{1F4BE} Toggle position saved:",this.togglePosition)}catch(i){console.error("Error saving toggle position:",i)}}loadTogglePosition(){try{let i=localStorage.getItem("sidebar-toggle-position");i&&(this.togglePosition=JSON.parse(i),console.log("\u{1F4CD} Toggle position loaded:",this.togglePosition))}catch(i){console.error("Error loading toggle position:",i),this.togglePosition={x:16,y:16}}}get toggleStyle(){return{position:"fixed",left:`${this.togglePosition.x}px`,top:`${this.togglePosition.y}px`,zIndex:999,cursor:this.isDragging?"grabbing":"grab",transform:this.isDragging?"scale(1.1)":"scale(1)",transition:this.isDragging?"none":"all 0.2s ease"}}onResize(i){let t=i.target.innerWidth;t<=768?(this.isSidebarClosed=!0,this.closeAllMenus()):t>768&&this.isSidebarClosed&&(this.isSidebarClosed=!1);let r=10,n=48;this.togglePosition.x=Math.max(r,Math.min(t-n-r,this.togglePosition.x)),this.togglePosition.y=Math.max(r,Math.min(i.target.innerHeight-n-r,this.togglePosition.y)),this.updateBodyScrollLock()}get currentUser(){return this.authService.user()}isAdmin(){return this.currentRole==="admin"}goToAdminUtenti(){this.isAdmin()&&(this.router.navigate(["/admin-utenti"]),this.closeSidebar())}logout(){return S(this,null,function*(){console.log("\u{1F44B} Logout...");try{yield this.authService.logout(),this.showSidebar=!1,this.closeAllMenus(),console.log("\u2705 Logout completato")}catch(i){console.error("\u274C Errore logout:",i),this.router.navigate(["/login"])}})}toggleTheme(){this.themeService.toggleTheme()}getCurrentTheme(){return this.themeService.getCurrentTheme()}setLight(){this.themeService.setTheme("light")}setDark(){this.themeService.setTheme("dark")}onDocumentClick(i){let t=i.target;!t.closest(".sidebar")&&!t.closest(".sidebar-show-toggle")&&(this.closeAllMenus(),this.isSidebarClosed||this.closeSidebar())}get tooltipPosition(){let i=window.innerWidth,t=window.innerHeight,r=48,n=30,d=10,b="bottom",C="translateX(-50%)",X="100%",B="auto",U="50%",N="auto";return this.togglePosition.y+r+n+d>t&&(b="top",X="auto",B="100%"),this.togglePosition.x+100>i?(U="auto",N="0",C="translateX(0)"):this.togglePosition.x<100&&(U="0",C="translateX(0)"),{position:b,top:X,bottom:B,left:U,right:N,transform:C}}get tooltipText(){if(this.isDragging)return"Trascina per spostare";let i=Math.round(this.togglePosition.x),t=Math.round(this.togglePosition.y);return"Apri menu"}isMobile(){try{return window.innerWidth<=768}catch{return!1}}updateBodyScrollLock(){try{let i=this.showSidebar&&!this.isSidebarClosed&&this.isMobile();document.body.style.overflow=i?"hidden":""}catch{}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Z({type:e,selectors:[["app-root"]],hostBindings:function(t,r){t&1&&p("resize",function(d){return r.onResize(d)},K)("click",function(d){return r.onDocumentClick(d)},q)},decls:4,vars:4,consts:[["notLogged",""],["class","sidebar",3,"closed","hidden","touchstart","touchmove","touchend",4,"ngIf"],["class","sidebar-show-toggle",3,"ngStyle","dragging","mousedown","touchstart",4,"ngIf"],[1,"content"],[1,"sidebar",3,"touchstart","touchmove","touchend"],[1,"logo-container"],["src","assets/logo-light.png","alt","Promethea Logo",1,"logoescritta","logo-light"],["src","assets/logo-dark.png","alt","Promethea Logo",1,"logoescritta","logo-dark"],[1,"sidebar-toggle",3,"click"],["viewBox","0 0 24 24","width","60%","height","60%"],["stroke","var(--text-color)","stroke-width","2","stroke-linecap","round","d","M6 18L18 6M6 6l12 12"],[1,"menu-items"],["routerLink","/home","routerLinkActive","active",1,"menu-item",3,"click"],[1,"material-icons"],[1,"menu-text"],["routerLink","/lista-clienti","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/lista-prospect","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/lista-fornitori","class","menu-item","routerLinkActive","active",3,"click",4,"ngIf"],["routerLink","/mappa","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/yuvi-trattativa","routerLinkActive","active",1,"menu-item",3,"click"],["src","assets/yuvi.png","alt","YUVI",1,"menu-icon-img"],["routerLink","/visualizzazione-kpi","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/alchemizzatore","routerLinkActive","active",1,"menu-item",3,"click"],["class","menu-item has-children",3,"open",4,"ngIf"],[4,"ngIf"],[1,"theme-toggle-container","sidebar-footer"],[4,"ngIf","ngIfElse"],["routerLink","/lista-fornitori","routerLinkActive","active",1,"menu-item",3,"click"],[1,"menu-item","has-children"],[3,"click"],[1,"menu-text","menu-label"],["viewBox","0 0 24 24",1,"arrow-icon"],["d","M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z","fill","currentColor"],[1,"submenu"],[1,"submenu-item",3,"click","routerLink"],[1,"submenu-text"],["routerLink","/task","routerLinkActive","active",1,"menu-item",3,"click"],[1,"menu-label"],["routerLink","/immagine",1,"submenu-item",3,"click"],["routerLink","/digitalizzazione",1,"submenu-item",3,"click"],["routerLink","/contabilita",1,"submenu-item",3,"click"],["routerLink","/ottimizzazione",1,"submenu-item",3,"click"],[1,"account-info"],[1,"account-email",3,"title"],[1,"account-row"],[1,"theme-toggle-row"],["aria-label","Tema chiaro",1,"mod-toggle"],["type","radio","name","themeMode",3,"change","checked"],[1,"mod-chip"],["aria-label","Tema scuro",1,"mod-toggle"],[1,"table-actions"],["class","role-btn admin","title","Gestione Utenti",3,"click",4,"ngIf"],["title","Esci",1,"account-btn",3,"click"],["title","Gestione Utenti",1,"role-btn","admin",3,"click"],["routerLink","/login",1,"account-login",3,"click"],[1,"sidebar-show-toggle",3,"mousedown","touchstart","ngStyle"],[1,"drag-tooltip","visible",3,"ngStyle"]],template:function(t,r){t&1&&(M(0,Mt,50,9,"div",1)(1,yt,5,11,"button",2),o(2,"div",3),w(3,"router-outlet"),a()),t&2&&(h("ngIf",r.showSidebar),g(),h("ngIf",r.showSidebar&&r.isSidebarClosed),g(),y("full-width",r.isSidebarClosed||!r.showSidebar))},dependencies:[mt,pt,st,rt,at],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;inset:0 auto 0 0;width:var(--grandezzasidebar);max-width:min(90vw,320px);height:100dvh;display:flex;flex-direction:column;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-sm) 0 var(--gutter-sm);background:var(--sidebar-background);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-right:1px solid var(--smoke-color-1);z-index:9999;transition:transform .32s cubic-bezier(.2,.9,.2,1);overflow-y:auto;-webkit-overflow-scrolling:touch}.sidebar.closed[_ngcontent-%COMP%]{transform:translate(-100%)}.logo-container[_ngcontent-%COMP%]{padding:var(--gutter-sm) 0;display:flex;border-radius:12px;align-items:center;justify-content:center;box-shadow:0 5px 8px var(--shadow)}.logo-container[_ngcontent-%COMP%]   picture[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;max-width:220px;min-width:120px;height:auto;object-fit:contain;margin:0 auto}.menu-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding-inline:.25rem;overflow:auto;flex:1 1 auto;min-height:0}.menu-item[_ngcontent-%COMP%]{background:transparent;padding:var(--gutter-sm);border-radius:12px;color:var(--text-color);text-decoration:none;font-weight:400;display:flex;align-items:center;gap:var(--gutter-sm);transition:all .25s cubic-bezier(.2,.9,.2,1);border:1px solid transparent}.menu-item[_ngcontent-%COMP%]:hover, .menu-item[_ngcontent-%COMP%]:active, .menu-item[_ngcontent-%COMP%]:focus-visible{background:color-mix(in srgb,var(--background) 20%,transparent);transform:translateY(-2px);font-weight:800;border-color:color-mix(in srgb,var(--primary) 30%,transparent);box-shadow:0 4px 12px var(--shadow)}.menu-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md);width:var(--fs-md);height:var(--fs-md);flex-shrink:0}.menu-text[_ngcontent-%COMP%]{flex:1}.menu-item.has-children[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:0}.menu-item.has-children[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);cursor:pointer;width:100%}.menu-item.has-children[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;margin-left:.5rem;transition:transform .3s ease;flex-shrink:0}.menu-item.has-children[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{flex:1}.menu-item.has-children.open[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.menu-item[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;margin-top:.5rem;max-height:0;overflow:hidden;align-items:start!important;transition:max-height .4s cubic-bezier(.2,.9,.2,1)}.menu-item.has-children.open[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{max-height:500px}.submenu-item[_ngcontent-%COMP%]{background:transparent;padding:var(--gutter-sm);border-radius:12px;color:var(--text-color);text-decoration:none;font-weight:400;display:flex;align-items:center;gap:var(--gutter-sm);transition:all .25s cubic-bezier(.2,.9,.2,1);border:1px solid transparent;margin:.1rem 0}.submenu-item[_ngcontent-%COMP%]:hover, .submenu-item[_ngcontent-%COMP%]:active, .submenu-item[_ngcontent-%COMP%]:focus-visible{font-weight:800;background:color-mix(in srgb,var(--primary) 10%,transparent);border-color:color-mix(in srgb,var(--primary) 20%,transparent);transform:translate(4px)}.sidebar-toggle[_ngcontent-%COMP%]{position:absolute;top:var(--gutter-sm);right:var(--gutter-sm);width:clamp(36px,6vw,44px);height:clamp(36px,6vw,44px);display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;background:color-mix(in srgb,var(--background) 20%,transparent);border:1px solid var(--smoke-color-1);transition:all .2s cubic-bezier(.2,.9,.2,1);z-index:10;color:var(--text-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:color-mix(in srgb,var(--primary) 20%,transparent);border-color:var(--primary)}.sidebar-show-toggle[_ngcontent-%COMP%]{position:relative;left:var(--pos-x, 20px);top:var(--pos-y, 20px);width:clamp(44px,8vw,64px);height:clamp(44px,8vw,64px);border-radius:50%;display:flex;font-size:var(--fs-md);align-items:center;justify-content:center;background:color-mix(in srgb,var(--primary) 1%,transparent);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);cursor:grab;z-index:10000;border:1px solid var(--primary);transition:all .3s ease}.sidebar-show-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.05);background:color-mix(in srgb,var(--primary) 20%,var(--vetro))}.drag-tooltip[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.theme-toggle-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:var(--gutter-sm);border-radius:12px;border-top:1px solid var(--smoke-color-1);background:color-mix(in srgb,var(--background) 10%,transparent);margin-top:auto;flex-direction:column;gap:var(--gutter-sm)}.theme-toggle-row[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);justify-content:center;flex-wrap:wrap}.sidebar-footer[_ngcontent-%COMP%]{flex:0 0 auto;margin-top:auto}.account-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gutter-sm);width:100%}.account-info[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:.25rem}.account-email[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.2}.account-role[_ngcontent-%COMP%]{padding:.2rem .5rem;border-radius:12px;font-weight:700;text-transform:uppercase;letter-spacing:.3px;width:fit-content;transition:all .2s ease}.account-role.admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 80%,transparent);border:1px solid color-mix(in srgb,var(--primary) 40%,transparent)}.account-role[_ngcontent-%COMP%]:not(.admin){background:color-mix(in srgb,var(--text-color) 15%,transparent);color:var(--text-color);border:1px solid var(--smoke-color-1);opacity:.8}.role-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;border:none;border-radius:8px;background:var(--smoke-color-1);color:var(--text-color);cursor:pointer;transition:all .2s ease;font-size:1.1rem;text-decoration:none;border:1px solid color-mix(in srgb,var(--text-color) 40%,transparent)}.role-btn[_ngcontent-%COMP%]:hover, .account-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.role-btn.admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--text-color) 20%,transparent);color:var(--primary)}.role-btn.admin[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 30%,transparent);color:var(--primary);box-shadow:0 4px 12px color-mix(in srgb,var(--primary) 25%,transparent)}.account-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--secondary) 20%,transparent);color:var(--secondary);box-shadow:0 4px 12px color-mix(in srgb,var(--secondary) 25%,transparent)}.account-login[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-lg);background:var(--gradiente);color:#fffaf7;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;font-weight:600;font-size:var(--fs-sm);text-decoration:none;width:100%;min-height:44px;box-shadow:0 4px 12px var(--shadow)}.account-login[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px var(--shadow2)}.sidebar.closed[_ngcontent-%COMP%]   .account-info[_ngcontent-%COMP%]{display:none}.menu-icon-img[_ngcontent-%COMP%]{width:var(--fs-md);height:var(--fs-md);object-fit:contain;display:inline-block;flex-shrink:0;filter:drop-shadow(0 1px 2px var(--smoke-color-1))}.drag-tooltip[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:calc(100% + 8px);transform:translate(-50%);background:color-mix(in srgb,var(--text-color) 90%,transparent);color:var(--background);padding:.5rem .75rem;border-radius:8px;font-size:clamp(.6rem,1.3vw,.9rem);white-space:nowrap;display:none;pointer-events:none;max-width:min(200px,90vw);word-wrap:break-word;white-space:normal;text-align:center;z-index:10001;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--text-color) 20%,transparent)}.drag-tooltip.bottom[_ngcontent-%COMP%]{bottom:auto;top:calc(100% + 8px)}.sidebar-show-toggle[_ngcontent-%COMP%]:hover   .drag-tooltip[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.drag-tooltip[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem 1rem}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;border-right:none;border-bottom:1px solid var(--smoke-color-1)}.sidebar[_ngcontent-%COMP%]:not(.closed){box-shadow:0 0 50px color-mix(in srgb,var(--dark) 30%,transparent)}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:clamp(100px,25vw,180px)!important}.menu-items[_ngcontent-%COMP%]{gap:.5rem;padding-inline:1rem}.menu-item[_ngcontent-%COMP%]{padding:var(--gutter-lg);font-size:clamp(var(--fs-md),4vw,1.2rem);border-radius:16px}.submenu-item[_ngcontent-%COMP%]{padding:var(--gutter-sm) var(--gutter-lg);font-size:var(--fs-sm)}.sidebar-toggle[_ngcontent-%COMP%]{width:48px;height:48px;top:1rem;right:1rem}.sidebar[_ngcontent-%COMP%]:not(.closed) ~ .sidebar-show-toggle[_ngcontent-%COMP%]{display:none!important}.sidebar-show-toggle[_ngcontent-%COMP%]{width:56px;height:56px;font-size:1.2rem}.theme-toggle-container[_ngcontent-%COMP%]{padding:var(--gutter-lg);margin-inline:1rem;margin-bottom:var(--gutter-sm)}.content[_ngcontent-%COMP%]{margin-left:0!important}}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.avatar[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border-radius:50%;object-fit:cover;background:var(--smoke-color-1)}.avatar.sm[_ngcontent-%COMP%]{width:28px;height:28px}.sidebar[_ngcontent-%COMP%]   .sidebar-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}@media (max-width: 768px){.logo-container[_ngcontent-%COMP%]   picture[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:min(260px,48vw)!important;max-width:260px!important;min-width:140px!important}}@media (max-width: 420px){.logo-container[_ngcontent-%COMP%]   picture[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:min(200px,60vw)!important;max-width:200px!important;min-width:120px!important}}"]})};var Pt=G($({},F),{providers:[...F?.providers??[],V(L,dt())]});ct(D,Pt).catch(e=>console.error(e));
