import{a as E}from"./chunk-QQWCK2ZL.js";import{a as q,b as J,d as Z,e as M,f as Q,g as ee}from"./chunk-7BQHTMQB.js";import{k as K,l as W,p as $,v as te,w as ie}from"./chunk-VUYFDMJB.js";import{Aa as U,Bb as B,Db as G,Ga as Y,La as x,N as w,R as L,S as h,X as c,Xa as g,Y as p,Ya as n,Z as S,Za as r,_ as C,_a as b,aa as k,cb as z,db as V,ea as I,eb as f,hb as m,ib as l,jb as X,lb as P,nb as s,ob as j,pb as N,ua as d,vb as y,xb as H,yb as F,za as R}from"./chunk-CVFHM34U.js";import"./chunk-X5YLR3NI.js";import{i as _}from"./chunk-ODN5LVDJ.js";var v=class i{userService=h(E);router=h(M);canActivate(){return _(this,null,function*(){return(yield this.userService.refreshAdminStatus())?!0:(this.router.navigate(["/unauthorized"]),!1)})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var re=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadComponent:()=>import("./chunk-XZT27DVA.js").then(i=>i.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-OXZDNTLS.js").then(i=>i.RegisterComponent)},{path:"home",loadComponent:()=>import("./chunk-ADJIDU6G.js").then(i=>i.Home)},{path:"alchemizzatore",loadComponent:()=>import("./chunk-2A4KUCUO.js").then(i=>i.Alchemizzatore)},{path:"yuvi-trattativa",loadComponent:()=>import("./chunk-LQCPLHEM.js").then(i=>i.YuviTrattativa)},{path:"lista-prospect",loadComponent:()=>import("./chunk-VCEHRJUU.js").then(i=>i.ListaProspect)},{path:"lista-clienti",loadComponent:()=>import("./chunk-Z55H2SOM.js").then(i=>i.ListaClienti)},{path:"lista-fornitori",loadComponent:()=>import("./chunk-TCDK242L.js").then(i=>i.ListFornitori)},{path:"soggetti/nuovo/:tipo",loadComponent:()=>import("./chunk-AJTOKEDC.js").then(i=>i.AddSoggetto)},{path:"soggetti/modifica/:id",loadComponent:()=>import("./chunk-AJTOKEDC.js").then(i=>i.AddSoggetto)},{path:"prospect",redirectTo:"lista-prospect"},{path:"clienti",redirectTo:"lista-clienti"},{path:"fornitori",redirectTo:"lista-fornitori"},{path:"aggiungi-prospect",loadComponent:()=>import("./chunk-AJTOKEDC.js").then(i=>i.AddSoggetto),data:{tipo:"prospect"}},{path:"aggiungi-cliente",loadComponent:()=>import("./chunk-AJTOKEDC.js").then(i=>i.AddSoggetto),data:{tipo:"cliente"}},{path:"aggiungi-fornitore",loadComponent:()=>import("./chunk-AJTOKEDC.js").then(i=>i.AddSoggetto),data:{tipo:"fornitore"}},{path:"task",loadComponent:()=>import("./chunk-G6FSDDGB.js").then(i=>i.Task),canActivate:[v]},{path:"tasks",children:[{path:"nuova",loadComponent:()=>import("./chunk-X5COQA7J.js").then(i=>i.TaskSingola)},{path:":id",loadComponent:()=>import("./chunk-X5COQA7J.js").then(i=>i.TaskSingola)}],canActivate:[v]},{path:"visualizzazione-kpi",loadComponent:()=>import("./chunk-5DXWO2W6.js").then(i=>i.VisualizzazioneKpi)},{path:"admin-utenti",loadComponent:()=>import("./chunk-Q23ZVIUZ.js").then(i=>i.AdminUtenti),canActivate:[v]},{path:"immagine",loadComponent:()=>import("./chunk-NPBUGADE.js").then(i=>i.Immagine),canActivate:[v]},{path:"digitalizzazione",loadComponent:()=>import("./chunk-GAXVXUVE.js").then(i=>i.Digitalizzazione),canActivate:[v]},{path:"contabilita",loadComponent:()=>import("./chunk-PPZVAV75.js").then(i=>i.Contabilita),canActivate:[v]},{path:"ottimizzazione",loadComponent:()=>import("./chunk-RLOBHKBR.js").then(i=>i.Ottimizzazione),canActivate:[v]},{path:"unauthorized",loadComponent:()=>import("./chunk-G7EWCE4G.js").then(i=>i.UnauthorizedComponent)},{path:"**",redirectTo:"login"}];var oe={providers:[I(),G({eventCoalescing:!0}),ee(re)]};var T=class i{constructor(e){this.document=e}storageKey="app-theme";initFromStorage(e="light"){let t=localStorage.getItem(this.storageKey)||e;this.setTheme(t)}getTheme(){return localStorage.getItem(this.storageKey)||"light"}setTheme(e){this.document.documentElement.setAttribute("data-theme",e),localStorage.setItem(this.storageKey,e)}toggleDark(){let e=this.getTheme().startsWith("dark")||this.getTheme()==="dark"?"light":"dark";this.setTheme(e)}enableBW(e,t="dark"){e?this.setTheme(t==="dark"?"bw-dark":"bw-light"):this.setTheme(t)}static \u0275fac=function(t){return new(t||i)(L(k))};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})};var ae=()=>["/soggetti/nuovo","cliente"],se=()=>["/soggetti/nuovo","prospect"],le=()=>["/soggetti/nuovo","fornitore"];function ce(i,e){if(i&1){let t=f();z(0),n(1,"a",36),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(2,"span",12),s(3,"task_alt"),r(),n(4,"span",19),s(5,"Task"),r()(),n(6,"div",37),m("click",function(o){c(t);let u=l(2);return p(u.toggleServizi(o))}),n(7,"div")(8,"span",12),s(9,"extension"),r(),n(10,"span",38),s(11,"Moduli"),r(),S(),n(12,"svg",28),b(13,"path",29),r()(),C(),n(14,"div",30)(15,"a",39),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(16,"span",12),s(17,"image"),r(),n(18,"span",32),s(19,"Immagine & Marketing"),r()(),n(20,"a",40),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(21,"span",12),s(22,"computer"),r(),n(23,"span",32),s(24,"Digitalizzazione & Automatismi"),r()(),n(25,"a",41),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(26,"span",12),s(27,"calculate"),r(),n(28,"span",32),s(29,"Contabilit\xE0 & Fiscalit\xE0"),r()(),n(30,"a",42),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(31,"span",12),s(32,"tune"),r(),n(33,"span",32),s(34,"Ottimizzazione & Management"),r()()()(),V()}}function pe(i,e){if(i&1){let t=f();n(0,"button",49),m("click",function(){c(t);let o=l(3);return p(o.goToAdminUtenti())}),n(1,"span",12),s(2,"admin_panel_settings"),r()()}}function me(i,e){if(i&1){let t=f();z(0),n(1,"div",43)(2,"div",44)(3,"div",45),s(4),r(),n(5,"div",46),s(6),r()(),x(7,pe,3,0,"button",47),n(8,"button",48),m("click",function(){c(t);let o=l(2);return p(o.onLogout())}),n(9,"span",12),s(10,"logout"),r()()(),V()}if(i&2){let t=e.ngIf,a=l(2);d(3),g("title",t==null?null:t.email),d(),j(t==null?null:t.email),d(),P("admin",a.userRole==="admin"),d(),N(" ",a.userRole==="admin"?"Admin":"User"," "),d(),g("ngIf",a.userRole==="admin")}}function de(i,e){if(i&1){let t=f();n(0,"a",50),m("click",function(){c(t);let o=l(2);return p(o.closeSidebar())}),n(1,"span",12),s(2,"login"),r(),n(3,"span"),s(4,"Accedi"),r()()}i&2&&g("routerLink","/login")}function ge(i,e){if(i&1){let t=f();n(0,"div",4)(1,"div",5)(2,"picture"),b(3,"img",6)(4,"img",7),r()(),n(5,"div",8)(6,"label",9)(7,"input",10),m("change",function(){c(t);let o=l();return p(o.setLight())}),r(),n(8,"span",11)(9,"span",12),s(10,"light_mode"),r(),s(11," Chiaro "),r()(),n(12,"label",13)(13,"input",10),m("change",function(){c(t);let o=l();return p(o.setDark())}),r(),n(14,"span",11)(15,"span",12),s(16,"dark_mode"),r(),s(17," Scuro "),r()()(),n(18,"div",14),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),S(),n(19,"svg",15),b(20,"path",16),r()(),C(),n(21,"div",17)(22,"a",18),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(23,"span",12),s(24,"home"),r(),n(25,"span",19),s(26,"Home"),r()(),n(27,"a",20),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(28,"span",12),s(29,"people"),r(),n(30,"span",19),s(31,"Clienti"),r()(),n(32,"a",21),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(33,"span",12),s(34,"person_search"),r(),n(35,"span",19),s(36,"Prospect"),r()(),n(37,"a",22),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(38,"span",12),s(39,"local_shipping"),r(),n(40,"span",19),s(41,"Fornitori"),r()(),n(42,"a",23),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),b(43,"img",24),n(44,"span",19),s(45,"YUVI Trattativa"),r()(),n(46,"a",23),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(47,"span",12),s(48,"analytics"),r(),n(49,"span",19),s(50,"Visualizzazione KPI"),r()(),n(51,"a",23),m("click",function(){c(t);let o=l();return p(o.closeSidebar())}),n(52,"span",12),s(53,"auto_awesome"),r(),n(54,"span",19),s(55,"Alchemizzatore"),r()(),n(56,"div",25)(57,"div",26),m("click",function(o){c(t);let u=l();return p(u.toggleServizi(o))}),n(58,"span",12),s(59,"add_circle"),r(),n(60,"span",27),s(61,"Aggiungi"),r(),S(),n(62,"svg",28),b(63,"path",29),r()(),C(),n(64,"div",30)(65,"a",31),m("click",function(o){c(t);let u=l();return o.stopPropagation(),p(u.closeSidebar())}),n(66,"span",12),s(67,"person"),r(),n(68,"span",32),s(69,"Nuovo Cliente"),r()(),n(70,"a",31),m("click",function(o){c(t);let u=l();return o.stopPropagation(),p(u.closeSidebar())}),n(71,"span",12),s(72,"person_search"),r(),n(73,"span",32),s(74,"Nuovo Prospect"),r()(),n(75,"a",31),m("click",function(o){c(t);let u=l();return o.stopPropagation(),p(u.closeSidebar())}),n(76,"span",12),s(77,"local_shipping"),r(),n(78,"span",32),s(79,"Nuovo Fornitore"),r()()()(),x(80,ce,35,0,"ng-container",33),r(),n(81,"div",34),x(82,me,11,6,"ng-container",35),H(83,"async"),x(84,de,5,1,"ng-template",null,0,B),r()()}if(i&2){let t=X(85),a=l();P("closed",a.isSidebarClosed)("hidden",!a.showSidebar),d(7),g("checked",a.currentTheme==="light"),d(6),g("checked",a.currentTheme==="dark"),d(29),g("routerLink","/yuvi-trattativa"),d(4),g("routerLink","/visualizzazione-kpi"),d(5),g("routerLink","/alchemizzatore"),d(14),g("routerLink",y(17,ae)),d(5),g("routerLink",y(18,se)),d(5),g("routerLink",y(19,le)),d(5),g("ngIf",a.userRole==="admin"),d(2),g("ngIf",F(83,15,a.auth.user$))("ngIfElse",t)}}function ue(i,e){i&1&&(n(0,"div",51)(1,"span"),s(2,"\u2630"),r(),n(3,"div",52),s(4,"Tieni premuto per spostare"),r()())}var O=class i{constructor(e){this.document=e;this.router.events.subscribe(t=>{if(t instanceof J){let a=["/login","/register"];this.showSidebar=!a.includes(t.url)}})}title="promethea";supabaseService=h(te);auth=h(ie);renderer=h(R);router=h(M);theme=h(T);userService=h(E);appUser=null;isAdmin=!1;userRole="user";roleSubscription;isSidebarClosed=!0;listeners=[];authSubscription;toggleElement;isDragging=!1;dragStarted=!1;posX=20;posY=20;offsetX=0;offsetY=0;dragThreshold=5;isMobileDevice=!1;startX=0;startY=0;currentTheme="light";showSidebar=!0;ngOnInit(){return _(this,null,function*(){this.initializeApp(),this.theme.initFromStorage("light");let e=this.theme.getTheme();this.currentTheme=e==="dark"?"dark":"light",setTimeout(()=>{this.testAuth()},3e3),yield this.loadAppUserProfile(),this.roleSubscription=this.userService.currentRole$.subscribe(t=>{this.userRole=t,this.isAdmin=t==="admin",console.log("AppComponent - Role updated:",t)})})}loadAppUserProfile(){return _(this,null,function*(){let e=this.auth.user();if(!e?.id){this.appUser=null;return}let t=yield this.supabaseService.getAppUserById(e.id);this.appUser=t.data??null})}get currentUser(){return this.auth.user()}toggleTheme(){this.currentTheme==="dark"?this.setLight():this.setDark()}setDark(){this.theme.setTheme("dark"),this.currentTheme="dark"}setLight(){this.theme.setTheme("light"),this.currentTheme="light"}ngOnDestroy(){this.roleSubscription&&this.roleSubscription.unsubscribe(),this.listeners.forEach(e=>{try{e()}catch{}}),this.listeners=[],this.authSubscription&&(typeof this.authSubscription.unsubscribe=="function"?this.authSubscription.unsubscribe():this.authSubscription.subscription&&typeof this.authSubscription.subscription.unsubscribe=="function"?this.authSubscription.subscription.unsubscribe():typeof this.authSubscription=="function"&&this.authSubscription())}initializeApp(){this.setupEventListeners(),this.detectMobileDevice(),this.initTogglePosition(),this.userService.refreshAdminStatus();let e=this.supabaseService.onAuthStateChange((t,a)=>_(this,null,function*(){console.log("Auth state change:",t),(t==="SIGNED_IN"||t==="TOKEN_REFRESHED"||t==="USER_UPDATED")&&(setTimeout(()=>{this.userService.refreshAdminStatus()},100),yield this.loadAppUserProfile()),t==="SIGNED_OUT"&&(this.isAdmin=!1,this.userRole="user",this.appUser=null)}));this.authSubscription=e}toggleSidebar(){this.isSidebarClosed=!this.isSidebarClosed,this.updateToggleVisibility()}closeSidebar(){this.isSidebarClosed=!0,this.updateToggleVisibility()}openSidebar(){console.log("\u{1F6AA} Aprendo sidebar..."),this.isSidebarClosed=!1,this.updateToggleVisibility()}updateToggleVisibility(){this.toggleElement&&this.renderer.setStyle(this.toggleElement,"display",this.isMobileDevice&&!this.isSidebarClosed?"none":"flex")}handleClickOutside(e){if(this.isDragging)return;let t=e.target;!this.isSidebarClosed&&!t.closest(".sidebar")&&!t.closest(".sidebar-show-toggle")&&this.closeSidebar()}initTogglePosition(){setTimeout(()=>{this.toggleElement=this.document.querySelector(".sidebar-show-toggle"),this.toggleElement&&(this.loadPosition(),this.applyPosition(),this.setupToggleListeners(),this.updateToggleVisibility(),console.log("\u2705 Toggle inizializzato:",this.toggleElement))},100)}setupToggleListeners(){this.toggleElement&&(this.listeners.push(this.renderer.listen(this.toggleElement,"mousedown",e=>this.onPointerDown(e))),this.listeners.push(this.renderer.listen(this.document,"mousemove",e=>this.onPointerMove(e))),this.listeners.push(this.renderer.listen(this.document,"mouseup",e=>this.onPointerUp(e))),this.listeners.push(this.renderer.listen(this.toggleElement,"touchstart",e=>this.onPointerDown(e))),this.listeners.push(this.renderer.listen(this.document,"touchmove",e=>this.onPointerMove(e))),this.listeners.push(this.renderer.listen(this.document,"touchend",e=>this.onPointerUp(e))),this.listeners.push(this.renderer.listen(this.toggleElement,"mouseenter",()=>this.updateTooltipPosition())),console.log("\u2705 Event listeners aggiunti al toggle"))}onPointerDown(e){console.log("\u{1F7E1} Pointer down:",e.type),e.preventDefault(),e.stopPropagation();let t=this.toggleElement.getBoundingClientRect(),a=this.getClientX(e),o=this.getClientY(e);this.offsetX=a-t.left,this.offsetY=o-t.top,this.isDragging=!1,this.dragStarted=!0,this.startX=this.posX,this.startY=this.posY,this.renderer.setStyle(this.toggleElement,"transition","none"),this.updateTooltipPosition()}onPointerMove(e){if(!this.dragStarted)return;e.preventDefault();let t=this.getClientX(e),a=this.getClientY(e),o=t-this.offsetX,u=a-this.offsetY;if(!this.isDragging){let A=Math.abs(o-this.startX),D=Math.abs(u-this.startY);if(console.log("\u{1F7E1} Delta movement:",{deltaX:A,deltaY:D,threshold:this.dragThreshold}),A>this.dragThreshold||D>this.dragThreshold)console.log("\u{1F7E2} Iniziando drag..."),this.isDragging=!0,this.renderer.addClass(this.document.body,"sidebar-dragging");else return}this.updatePosition(o,u),this.applyPosition()}onPointerUp(e){console.log("\u{1F534} Pointer up:",{dragStarted:this.dragStarted,isDragging:this.isDragging}),this.dragStarted&&(e.preventDefault(),e.stopPropagation(),this.isDragging?(console.log("\u{1F4BE} Salvando posizione dopo drag"),this.savePosition()):(console.log("\u{1F446} Click detectato - aprendo sidebar"),this.openSidebar()),this.isDragging=!1,this.dragStarted=!1,this.startX=0,this.startY=0,this.renderer.setStyle(this.toggleElement,"transition",""),this.renderer.removeClass(this.document.body,"sidebar-dragging"))}getClientX(e){return e instanceof MouseEvent?e.clientX:e.touches[0].clientX}getClientY(e){return e instanceof MouseEvent?e.clientY:e.touches[0].clientY}updatePosition(e,t){let a=window.innerWidth-this.toggleElement.offsetWidth,o=window.innerHeight-this.toggleElement.offsetHeight;this.posX=Math.min(Math.max(0,e),a),this.posY=Math.min(Math.max(0,t),o)}applyPosition(){this.toggleElement&&(this.renderer.setStyle(this.toggleElement,"left",`${this.posX}px`),this.renderer.setStyle(this.toggleElement,"top",`${this.posY}px`))}loadPosition(){let e=localStorage.getItem("togglePosition");if(e)try{let{x:t,y:a}=JSON.parse(e);typeof t=="number"&&typeof a=="number"?this.updatePosition(t,a):this.setDefaultPosition()}catch{this.setDefaultPosition()}else this.setDefaultPosition()}setDefaultPosition(){this.posX=20,this.posY=20}savePosition(){localStorage.setItem("togglePosition",JSON.stringify({x:this.posX,y:this.posY}))}handleWindowResize(){this.isMobileDevice=window.matchMedia("(hover: none) and (pointer: coarse)").matches,this.toggleElement&&(this.updatePosition(this.posX,this.posY),this.applyPosition(),this.savePosition(),this.updateTooltipPosition()),this.updateToggleVisibility()}updateTooltipPosition(){if(!this.toggleElement)return;let e=this.toggleElement.querySelector(".drag-tooltip");if(!e)return;e.style.display="block";let t=this.toggleElement.getBoundingClientRect(),a=e.getBoundingClientRect(),o=t.top,u=window.innerHeight-t.bottom;a.height>o&&u>=a.height?e.classList.add("bottom"):e.classList.remove("bottom"),e.style.display=""}toggleServizi(e){e.stopPropagation();let t=e.currentTarget.closest(".menu-item");t&&t.classList.toggle("open")}resetTogglePosition(){this.setDefaultPosition(),this.applyPosition(),this.savePosition()}goToAdminUtenti(){this.userRole==="admin"&&this.router.navigate(["/admin-utenti"])}onLogout(){return _(this,null,function*(){try{yield this.auth.logout(),this.closeSidebar(),this.router.navigate(["/login"])}catch(e){console.error("Errore durante il logout:",e),this.router.navigate(["/login"])}})}setupEventListeners(){this.listeners.push(this.renderer.listen(this.document,"click",e=>this.handleClickOutside(e))),this.listeners.push(this.renderer.listen("window","resize",()=>this.handleWindowResize()))}detectMobileDevice(){this.isMobileDevice=window.matchMedia("(hover: none) and (pointer: coarse)").matches}testAuth(){return _(this,null,function*(){console.log("\u{1F9EA} Testing auth status...");let{data:e}=yield this.supabaseService.getSession();console.log("\u{1F9EA} Current session:",e.session);let{data:t}=yield this.supabaseService.getUser();console.log("\u{1F9EA} Current user:",t.user),console.log("\u{1F9EA} AuthService user:",this.auth.user()),console.log("\u{1F9EA} AuthService session:",this.auth.session())})}static \u0275fac=function(t){return new(t||i)(U(k))};static \u0275cmp=Y({type:i,selectors:[["app-root"]],decls:4,vars:4,consts:[["notLogged",""],["class","sidebar",3,"closed","hidden",4,"ngIf"],["class","sidebar-show-toggle",4,"ngIf"],[1,"content"],[1,"sidebar"],[1,"logo-container"],["src","assets/logo-light.png","alt","Promethea Logo",1,"logoescritta","logo-light"],["src","assets/logo-dark.png","alt","Promethea Logo",1,"logoescritta","logo-dark"],[1,"theme-toggle-container"],["aria-label","Tema chiaro",1,"mod-toggle"],["type","radio","name","themeMode",3,"change","checked"],[1,"mod-chip"],[1,"material-icons"],["aria-label","Tema scuro",1,"mod-toggle"],[1,"sidebar-toggle",3,"click"],["viewBox","0 0 24 24","width","60%","height","60%"],["stroke","var(--text-color)","stroke-width","2","stroke-linecap","round","d","M6 18L18 6M6 6l12 12"],[1,"menu-items"],["routerLink","/home",1,"menu-item",3,"click"],[1,"menu-text"],["routerLink","/clienti",1,"menu-item",3,"click"],["routerLink","/lista-prospect",1,"menu-item",3,"click"],["routerLink","/lista-fornitori",1,"menu-item",3,"click"],[1,"menu-item",3,"click","routerLink"],["src","assets/yuvi.png","alt","YUVI",1,"menu-icon-img"],[1,"menu-item","has-children"],[3,"click"],[1,"menu-text","menu-label"],["viewBox","0 0 24 24",1,"arrow-icon"],["d","M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z","fill","currentColor"],[1,"submenu"],[1,"submenu-item",3,"click","routerLink"],[1,"submenu-text"],[4,"ngIf"],[1,"sidebar-footer"],[4,"ngIf","ngIfElse"],["routerLink","/task",1,"menu-item",3,"click"],[1,"menu-item","has-children",3,"click"],[1,"menu-label"],["routerLink","/immagine",1,"submenu-item",3,"click"],["routerLink","/digitalizzazione",1,"submenu-item",3,"click"],["routerLink","/contabilita",1,"submenu-item",3,"click"],["routerLink","/ottimizzazione",1,"submenu-item",3,"click"],[1,"account-row"],[1,"account-info"],[1,"account-email",3,"title"],[1,"account-role"],["class","role-btn admin","title","Gestione Utenti",3,"click",4,"ngIf"],["title","Esci",1,"account-btn",3,"click"],["title","Gestione Utenti",1,"role-btn","admin",3,"click"],[1,"account-login",3,"click","routerLink"],[1,"sidebar-show-toggle"],[1,"drag-tooltip"]],template:function(t,a){t&1&&(x(0,ge,86,20,"div",1)(1,ue,5,0,"div",2),n(2,"div",3),b(3,"router-outlet"),r()),t&2&&(g("ngIf",a.showSidebar),d(),g("ngIf",a.showSidebar),d(),P("full-width",a.isSidebarClosed||!a.showSidebar))},dependencies:[Z,Q,$,K,W],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;inset:0 auto 0 0;width:var(--grandezzasidebar);max-width:min(90vw,320px);height:100dvh;display:flex;flex-direction:column;gap:var(--gutter-sm);padding:var(--gutter-sm);background:var(--sidebar-background);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-right:1px solid var(--smoke-color-1);z-index:9999;transition:transform .32s cubic-bezier(.2,.9,.2,1);overflow-y:auto;-webkit-overflow-scrolling:touch}.sidebar.closed[_ngcontent-%COMP%]{transform:translate(-100%)}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:var(--gutter-sm) 0;flex:0 0 auto;min-height:clamp(60px,10vh,100px)}.logo-container[_ngcontent-%COMP%]   picture[_ngcontent-%COMP%], .logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:88%;width:clamp(80px,18vw,220px);height:auto;object-fit:contain}.menu-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;padding-inline:.25rem;overflow:auto;flex:1 1 auto;min-height:0}.menu-item[_ngcontent-%COMP%]{background:transparent;padding:var(--gutter-sm);border-radius:12px;color:var(--text-color);text-decoration:none;font-weight:400;display:flex;align-items:center;gap:var(--gutter-sm);transition:all .25s cubic-bezier(.2,.9,.2,1);border:1px solid transparent}.menu-item[_ngcontent-%COMP%]:hover, .menu-item[_ngcontent-%COMP%]:active, .menu-item[_ngcontent-%COMP%]:focus-visible{background:color-mix(in srgb,var(--background) 20%,transparent);transform:translateY(-2px);font-weight:800;border-color:color-mix(in srgb,var(--primary) 30%,transparent);box-shadow:0 4px 12px var(--shadow)}.menu-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:var(--fs-md);width:var(--fs-md);height:var(--fs-md);flex-shrink:0}.menu-text[_ngcontent-%COMP%]{flex:1}.menu-item.has-children[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:0}.menu-item.has-children[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);cursor:pointer;width:100%}.menu-item.has-children[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:1rem;height:1rem;margin-left:.5rem;transition:transform .3s ease;flex-shrink:0}.menu-item.has-children[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .menu-label[_ngcontent-%COMP%]{flex:1}.menu-item.has-children.open[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.menu-item[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.15rem;margin-top:.5rem;max-height:0;overflow:hidden;align-items:start!important;transition:max-height .4s cubic-bezier(.2,.9,.2,1)}.menu-item.has-children.open[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]{max-height:500px}.submenu-item[_ngcontent-%COMP%]{background:transparent;padding:var(--gutter-sm);border-radius:12px;color:var(--text-color);text-decoration:none;font-weight:400;display:flex;align-items:center;gap:var(--gutter-sm);transition:all .25s cubic-bezier(.2,.9,.2,1);border:1px solid transparent;margin:.1rem 0}.submenu-item[_ngcontent-%COMP%]:hover, .submenu-item[_ngcontent-%COMP%]:active, .submenu-item[_ngcontent-%COMP%]:focus-visible{font-weight:800;background:color-mix(in srgb,var(--primary) 10%,transparent);border-color:color-mix(in srgb,var(--primary) 20%,transparent);transform:translate(4px)}.sidebar-toggle[_ngcontent-%COMP%]{position:absolute;top:var(--gutter-sm);right:var(--gutter-sm);width:clamp(36px,6vw,44px);height:clamp(36px,6vw,44px);display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;background:color-mix(in srgb,var(--background) 20%,transparent);border:1px solid var(--smoke-color-1);transition:all .2s cubic-bezier(.2,.9,.2,1);z-index:10;color:var(--text-color);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.sidebar-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.08);background:color-mix(in srgb,var(--primary) 20%,transparent);border-color:var(--primary)}.sidebar-show-toggle[_ngcontent-%COMP%]{position:fixed;left:var(--pos-x, 20px);top:var(--pos-y, 20px);width:clamp(44px,8vw,64px);height:clamp(44px,8vw,64px);border-radius:50%;display:flex;font-size:var(--fs-md);align-items:center;justify-content:center;background:var(--vetro);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);cursor:grab;z-index:10000;border:1px solid var(--smoke-color-1);transition:all .3s ease}.sidebar-show-toggle[_ngcontent-%COMP%]:hover{transform:scale(1.05);background:color-mix(in srgb,var(--primary) 20%,var(--vetro));border-color:var(--primary)}.drag-tooltip[_ngcontent-%COMP%]{font-size:var(--fs-sm)}.theme-toggle-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm);border-radius:12px;border-top:1px solid var(--smoke-color-1);background:color-mix(in srgb,var(--background) 10%,transparent);margin-top:auto}.sidebar-footer[_ngcontent-%COMP%]{flex:0 0 auto;padding:var(--gutter-sm);border-top:1px solid var(--smoke-color-1);background:color-mix(in srgb,var(--background) 15%,transparent);border-radius:40px 40px 10px 10px;margin-top:auto}.account-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:var(--gutter-sm);width:100%}.account-info[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:.25rem}.account-email[_ngcontent-%COMP%]{font-size:var(--fs-sm);font-weight:600;color:var(--text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:1.2}.account-role[_ngcontent-%COMP%]{padding:.2rem .5rem;border-radius:12px;font-weight:700;text-transform:uppercase;letter-spacing:.3px;width:fit-content;transition:all .2s ease}.account-role.admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--secondary) 80%,transparent);border:1px solid color-mix(in srgb,var(--primary) 40%,transparent)}.account-role[_ngcontent-%COMP%]:not(.admin){background:color-mix(in srgb,var(--text-color) 15%,transparent);color:var(--text-color);border:1px solid var(--smoke-color-1);opacity:.8}.role-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:2.2rem;height:2.2rem;border:none;border-radius:8px;background:var(--smoke-color-1);color:var(--text-color);cursor:pointer;transition:all .2s ease;font-size:1.1rem;text-decoration:none;border:1px solid color-mix(in srgb,var(--text-color) 40%,transparent)}.role-btn[_ngcontent-%COMP%]:hover, .account-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.role-btn.admin[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--text-color) 20%,transparent);color:var(--primary)}.role-btn.admin[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--primary) 30%,transparent);color:var(--primary);box-shadow:0 4px 12px color-mix(in srgb,var(--primary) 25%,transparent)}.account-btn[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--secondary) 20%,transparent);color:var(--secondary);box-shadow:0 4px 12px color-mix(in srgb,var(--secondary) 25%,transparent)}.account-login[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-lg);background:var(--gradiente);color:#fffaf7;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;font-weight:600;font-size:var(--fs-sm);text-decoration:none;width:100%;min-height:44px;box-shadow:0 4px 12px var(--shadow)}.account-login[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px var(--shadow2)}.sidebar.closed[_ngcontent-%COMP%]   .account-info[_ngcontent-%COMP%]{display:none}.menu-icon-img[_ngcontent-%COMP%]{width:var(--fs-md);height:var(--fs-md);object-fit:contain;display:inline-block;flex-shrink:0;filter:drop-shadow(0 1px 2px var(--smoke-color-1))}.drag-tooltip[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:calc(100% + 8px);transform:translate(-50%);background:color-mix(in srgb,var(--text-color) 90%,transparent);color:var(--background);padding:.5rem .75rem;border-radius:8px;font-size:clamp(.6rem,1.3vw,.9rem);white-space:nowrap;display:none;pointer-events:none;max-width:min(200px,90vw);word-wrap:break-word;white-space:normal;text-align:center;z-index:10001;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid color-mix(in srgb,var(--text-color) 20%,transparent)}.drag-tooltip.bottom[_ngcontent-%COMP%]{bottom:auto;top:calc(100% + 8px)}.sidebar-show-toggle[_ngcontent-%COMP%]:hover   .drag-tooltip[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.drag-tooltip[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem 1rem}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100vw!important;max-width:100vw!important;border-right:none;border-bottom:1px solid var(--smoke-color-1)}.sidebar[_ngcontent-%COMP%]:not(.closed){box-shadow:0 0 50px color-mix(in srgb,var(--dark) 30%,transparent)}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:clamp(100px,25vw,180px)!important}.menu-items[_ngcontent-%COMP%]{gap:.5rem;padding-inline:1rem}.menu-item[_ngcontent-%COMP%]{padding:var(--gutter-lg);font-size:clamp(var(--fs-md),4vw,1.2rem);border-radius:16px}.submenu-item[_ngcontent-%COMP%]{padding:var(--gutter-sm) var(--gutter-lg);font-size:var(--fs-sm)}.sidebar-toggle[_ngcontent-%COMP%]{width:48px;height:48px;top:1rem;right:1rem}.sidebar[_ngcontent-%COMP%]:not(.closed) ~ .sidebar-show-toggle[_ngcontent-%COMP%]{display:none!important}.sidebar-show-toggle[_ngcontent-%COMP%]{width:56px;height:56px;font-size:1.2rem}.theme-toggle-container[_ngcontent-%COMP%]{padding:var(--gutter-lg);margin-inline:1rem;margin-bottom:var(--gutter-sm)}.content[_ngcontent-%COMP%]{margin-left:0!important}}.text-ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.avatar[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border-radius:50%;object-fit:cover;background:var(--smoke-color-1)}.avatar.sm[_ngcontent-%COMP%]{width:28px;height:28px}.sidebar[_ngcontent-%COMP%]   .sidebar-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}"]})};q(O,oe).catch(i=>console.error(i));
