import{a as _t}from"./chunk-FE3ARP73.js";import{a as gt}from"./chunk-D3KV7EOV.js";import{a as mt}from"./chunk-IPXXNBDT.js";import{b as it,d as at,f as nt,n as ot,o as rt,p as st,s as lt,u as dt}from"./chunk-EXOBR4AO.js";import{b as ct}from"./chunk-JUOMJRR2.js";import{a as et}from"./chunk-Y2XJCRVM.js";import{c as tt}from"./chunk-3ZXX2K2L.js";import{c as G,d as K,e as Q,h as J,k as X,n as Y,p as Z}from"./chunk-3DLJ4ULO.js";import{Aa as E,Ab as b,Eb as D,Ga as $,Jb as P,Kb as V,La as k,Mb as H,Wa as R,X as g,Xa as m,Y as _,Ya as n,Za as a,_a as O,cb as A,db as B,fb as f,ib as u,jb as c,qb as z,rb as q,sb as y,ta as j,tb as W,ua as s,ub as r,vb as w,wb as v,xb as F,yb as h,zb as S}from"./chunk-6W5NKFNP.js";import"./chunk-X5YLR3NI.js";import{a as L,c as U,i as T}from"./chunk-ODN5LVDJ.js";var ut=()=>[1,2,3,4,5],vt=()=>["da_fare","in_lavorazione","completato"],kt=()=>[];function ft(d,i){if(d&1&&(n(0,"div",18)(1,"p",19),r(2),a()()),d&2){let t=c();s(2),v("ID: ",t.macroTask.id)}}function xt(d,i){if(d&1){let t=f();n(0,"button",27),u("click",function(){g(t);let e=c(2);return _(e.eliminaMacroTask())}),n(1,"i",22),r(2,"delete_forever"),a(),n(3,"span",23),r(4,"Elimina"),a()()}if(d&2){let t=c(2);m("disabled",t.loading)}}function Tt(d,i){if(d&1){let t=f();n(0,"button",28),u("click",function(){g(t);let e=c(2);return _(e.salvaComeTemplate())}),n(1,"i",22),r(2,"content_copy"),a(),n(3,"span",23),r(4,"Template"),a()()}if(d&2){let t=c(2);m("disabled",t.loading)}}function ht(d,i){if(d&1){let t=f();n(0,"div",20)(1,"button",21),u("click",function(){g(t);let e=c();return _(e.router.navigate(["/task"]))}),n(2,"i",22),r(3,"arrow_back"),a(),n(4,"span",23),r(5,"Lista"),a()(),k(6,xt,5,1,"button",24)(7,Tt,5,1,"button",25),n(8,"button",26),u("click",function(){g(t);let e=c();return _(e.salvaMacroTask())}),n(9,"i",22),r(10,"save"),a(),n(11,"span",23),r(12),a()()()}if(d&2){let t=c();s(6),m("ngIf",t.currentUser==null?null:t.currentUser.is_admin),s(),m("ngIf",t.currentUser==null?null:t.currentUser.is_admin),s(),m("disabled",t.loading),s(),y("spin",t.loading),s(3),w(t.loading?"Salva...":"Salva")}}function St(d,i){d&1&&(n(0,"div",29),O(1,"div",30),n(2,"p"),r(3,"Caricamento task..."),a()())}function bt(d,i){if(d&1&&(n(0,"div",31)(1,"i",22),r(2,"warning"),a(),r(3),a()),d&2){let t=c();s(3),v(" ",t.error," ")}}function wt(d,i){if(d&1&&(n(0,"option",45),r(1),a()),d&2){let t=i.$implicit;m("value",t.id),s(),v(" ",t.ragione_sociale," ")}}function yt(d,i){if(d&1&&(n(0,"option",69),r(1),a()),d&2){let t=i.$implicit,o=c(2);m("ngValue",t),s(),F(" P",t," - ",o.taskService.getNomePriorita(t)," ")}}function Mt(d,i){if(d&1){let t=f();n(0,"div",70)(1,"button",71),u("click",function(){g(t);let e=c(2);return _(e.salvaMacroTask())}),n(2,"i",22),r(3,"save"),a(),r(4," Crea Macro Task "),a()()}if(d&2){let t=c(2);s(),m("disabled",t.loading),s(),y("spin",t.loading)}}function Ct(d,i){d&1&&(n(0,"div",77)(1,"i",22),r(2,"layers"),a(),n(3,"h4"),r(4,"Nessuna sotto task"),a(),n(5,"p"),r(6,"Crea la prima sotto task per suddividere il lavoro"),a()())}function Et(d,i){if(d&1&&(n(0,"span",100)(1,"i",22),r(2,"checklist"),a(),r(3),a()),d&2){let t=c().$implicit;s(3),v(" ",t.task_dettaglio.length," dettagli ")}}function zt(d,i){if(d&1){let t=f();n(0,"li")(1,"a",95),u("click",function(){let e=g(t).$implicit,l=c(2).$implicit,p=z(28);return c(4).cambiaStatoSottoTask(l,e),_(p.close())}),r(2),a()()}if(d&2){let t=i.$implicit,o=c(6);s(2),v(" ",o.getStatoTesto(t)," ")}}function Pt(d,i){d&1&&(A(0),n(1,"li")(2,"h6",101),r(3,"Cambia Stato"),a()(),k(4,zt,3,1,"li",102),n(5,"li"),O(6,"hr",103),a(),B()),d&2&&(s(4),m("ngForOf",D(1,vt)))}function Vt(d,i){d&1&&(n(0,"div",104)(1,"i",22),r(2,"android"),a()())}function It(d,i){if(d&1){let t=f();n(0,"p",116),u("click",function(){g(t);let e=c().$implicit,l=c(2).$implicit,p=c(4);return _(p.apriDettaglio(e,l))}),r(1),a()}if(d&2){let t=c().$implicit;s(),v(" ",t.descrizione," ")}}function Ot(d,i){if(d&1){let t=f();n(0,"div",107)(1,"div",108)(2,"input",109),u("change",function(){let e=g(t).$implicit,l=c(2).$implicit,p=c(4);return _(p.toggleDettaglioCompletato(e,l))})("click",function(e){return g(t),_(e.stopPropagation())})("mousedown",function(e){return g(t),_(e.stopPropagation())}),a(),n(3,"div",110)(4,"div",111)(5,"strong"),r(6),a(),n(7,"span",19)(8,"i",22),r(9,"schedule"),a(),r(10),P(11,"date"),a(),n(12,"div",112),u("click",function(e){return g(t),_(e.stopPropagation())}),n(13,"button",113),u("click",function(e){let l=g(t).$implicit,p=c(2).$implicit,x=c(4);return e.stopPropagation(),_(x.apriDettaglio(l,p))}),n(14,"i",22),r(15,"edit"),a()(),n(16,"button",114),u("click",function(e){let l=g(t).$implicit,p=c(2).$implicit,x=c(4);return e.stopPropagation(),_(x.eliminaDettaglio(l,p))}),n(17,"i",22),r(18,"delete_forever"),a()()()(),k(19,It,2,1,"p",115),a()()()}if(d&2){let t=i.$implicit;s(2),m("checked",t.completato),s(3),y("completed",t.completato),s(),w(t.nome),s(4),v(" ",V(11,6,t.data_scadenza_prevista,"dd/MM/yyyy")," "),s(9),m("ngIf",t.descrizione)}}function Dt(d,i){if(d&1&&(n(0,"div",105),k(1,Ot,20,9,"div",106),a()),d&2){let t=c().$implicit,o=c(4);s(),m("ngForOf",t.task_dettaglio)("ngForTrackBy",o.trackByDettaglio)}}function Nt(d,i){if(d&1){let t=f();n(0,"div",77)(1,"i",22),r(2,"info"),a(),r(3," Nessun dettaglio aggiunto. "),n(4,"a",117),u("click",function(){g(t);let e=c().$implicit,l=c(4);return _(l.apriModal("dettaglio",e))}),r(5,"Aggiungi il primo dettaglio"),a()()}}function At(d,i){if(d&1){let t=f();n(0,"div",80)(1,"div",81),u("click",function(){let e=g(t).$implicit,l=c(4);return _(l.toggleSottoTaskEspansa(e.id))}),n(2,"div",82)(3,"button",83),u("click",function(e){let l=g(t).$implicit,p=c(4);return e.stopPropagation(),_(p.toggleSottoTaskEspansa(l.id))}),n(4,"i",22),r(5),a()(),n(6,"div",84)(7,"h4",85),r(8),a(),n(9,"div",86)(10,"span",87),r(11),a(),n(12,"span",87),r(13),a(),n(14,"span",19)(15,"i",22),r(16,"calendar_today"),a(),r(17),P(18,"date"),a(),k(19,Et,4,1,"span",88),a()()(),n(20,"div",89),u("click",function(e){return g(t),_(e.stopPropagation())}),n(21,"button",90),u("click",function(){let e=g(t).$implicit,l=c(4);return _(l.apriModal("modificaSottoTask",e))}),n(22,"i",22),r(23,"edit"),a()(),n(24,"button",91),u("click",function(){let e=g(t).$implicit,l=c(4);return _(l.exportSottoTask(e))}),n(25,"i",22),r(26,"content_copy"),a()(),n(27,"app-action-dropdown",92,3),u("action",function(e){let l=g(t).$implicit,p=c(4);return _(p.handleSottoTaskAction(e,l))}),n(29,"div",93),u("click",function(e){return g(t),_(e.stopPropagation())}),k(30,Pt,7,2,"ng-container",94),n(31,"li")(32,"a",95),u("click",function(){let e=g(t).$implicit,l=z(28);return c(4).apriModal("dettaglio",e),_(l.close())}),n(33,"i",22),r(34,"add"),a(),r(35," Aggiungi Dettaglio "),a()()()(),k(36,Vt,3,0,"div",96),a()(),n(37,"div",97),k(38,Dt,2,2,"div",98)(39,Nt,6,0,"div",99),a()()}if(d&2){let t=i.$implicit,o=c(4);y("expanded",o.isSottoTaskEspansa(t.id))("dropdown-open",o.isDropdownOpen(t.id)),s(3),m("title",o.isSottoTaskEspansa(t.id)?"Riduci dettagli":"Espandi dettagli"),R("aria-expanded",o.isSottoTaskEspansa(t.id)),s(2),v(" ",o.isSottoTaskEspansa(t.id)?"expand_less":"expand_more"," "),s(3),v(" ",t.nome," "),s(2),W(o.getPrioritaBadgeClass(t.priorita)),s(),v(" P",t.priorita," "),s(),W(o.getStatoBadgeClass(t.stato)),s(),v(" ",o.getStatoTesto(t.stato)," "),s(4),v(" ",V(18,23,t.created_at,"dd/MM/yyyy")," "),s(2),m("ngIf",t.task_dettaglio&&t.task_dettaglio.length>0),s(8),m("row",t),s(3),m("ngIf",o.puoiModificareSottoTask(t)),s(6),m("ngIf",!o.puoiModificareSottoTask(t)),s(),y("show",o.isSottoTaskEspansa(t.id)),s(),m("ngIf",t.task_dettaglio&&t.task_dettaglio.length>0),s(),m("ngIf",!t.task_dettaglio||t.task_dettaglio.length===0)}}function Bt(d,i){if(d&1&&(n(0,"div",78),k(1,At,40,26,"div",79),a()),d&2){let t=c(3);s(),m("ngForOf",t.macroTask.sotto_tasks)("ngForTrackBy",t.trackBySottoTask)}}function Wt(d,i){if(d&1){let t=f();n(0,"div",6)(1,"div",7)(2,"h3",9)(3,"i",22),r(4,"layers"),a(),r(5," Sotto Tasks "),n(6,"span",72),r(7),a()(),n(8,"div",73)(9,"button",74),u("click",function(){g(t);let e=c(2);return _(e.toggleEspandiTutti())}),n(10,"i",22),r(11),a(),n(12,"span",23),r(13),a()(),n(14,"button",75),u("click",function(){g(t);let e=c(2);return _(e.apriModal("sottoTask"))}),n(15,"i",22),r(16,"add"),a(),n(17,"span",23),r(18,"Nuova"),a()()()(),k(19,Ct,7,0,"ng-template",null,2,H)(21,Bt,2,2,"div",76),a()}if(d&2){let t=z(20),o=c(2);s(7),w((o.macroTask.sotto_tasks==null?null:o.macroTask.sotto_tasks.length)||0),s(2),m("title",o.espandiTutti?"Riduci tutte":"Espandi tutte"),s(2),v(" ",o.espandiTutti?"unfold_less":"unfold_more"," "),s(2),w(o.espandiTutti?"Riduci":"Espandi"),s(8),m("ngIf",o.macroTask.sotto_tasks&&o.macroTask.sotto_tasks.length>0)("ngIfElse",t)}}function Ft(d,i){if(d&1){let t=f();n(0,"div",32)(1,"div",33)(2,"div",6)(3,"h3",9),r(4,"Informazioni Principali"),a(),n(5,"div",34)(6,"div",35)(7,"label",36),r(8,"Nome Task *"),a(),n(9,"input",37,0),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.nome,e)||(l.macroTask.nome=e),_(e)}),a()(),n(11,"div",38)(12,"label",39),r(13,"Data Scadenza"),a(),n(14,"input",40),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.data_scadenza,e)||(l.macroTask.data_scadenza=e),_(e)}),a()(),n(15,"div",38)(16,"label",41),r(17,"Stato"),a(),O(18,"input",42),a()(),n(19,"div",38)(20,"label",43),r(21,"Cliente"),a(),n(22,"select",44),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.cliente_id,e)||(l.macroTask.cliente_id=e),_(e)}),n(23,"option",45),r(24,"Nessun cliente"),a(),k(25,wt,2,2,"option",46),a()(),n(26,"div",38)(27,"label",47),r(28,"Priorit\xE0"),a(),n(29,"select",48),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.priorita_globale,e)||(l.macroTask.priorita_globale=e),_(e)}),k(30,yt,2,3,"option",49),a()(),n(31,"div",38)(32,"label",50),r(33,"Modulo *"),a(),n(34,"select",51,1),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.assegnazione_id,e)||(l.macroTask.assegnazione_id=e),_(e)}),n(36,"option",45),r(37,"Seleziona Modulo"),a(),n(38,"option",52),r(39,"Immagine"),a(),n(40,"option",53),r(41,"Digitalizzazione"),a(),n(42,"option",54),r(43,"Contabilit\xE0"),a(),n(44,"option",55),r(45,"Ottimizzazione"),a(),n(46,"option",56),r(47,"Tutti i moduli"),a()()(),n(48,"div",38)(49,"label",57),r(50,"Note"),a(),n(51,"textarea",58),b("ngModelChange",function(e){g(t);let l=c();return S(l.macroTask.note,e)||(l.macroTask.note=e),_(e)}),a()(),k(52,Mt,5,3,"div",59),a(),k(53,Wt,22,6,"div",60),a(),n(54,"div",61)(55,"div",62)(56,"h4"),r(57,"Riepilogo Task"),a(),n(58,"div",63)(59,"div",64)(60,"label"),r(61,"Stato:"),a(),n(62,"span",65),r(63),a()(),n(64,"div",64)(65,"label"),r(66,"Priorit\xE0:"),a(),n(67,"span",65),r(68),a()(),n(69,"div",64)(70,"label"),r(71,"Progresso:"),a(),n(72,"div",66)(73,"div",67)(74,"span",68),r(75),a()()()(),n(76,"div",64)(77,"label"),r(78,"Cliente:"),a(),n(79,"span"),r(80),a()(),n(81,"div",64)(82,"label"),r(83,"Modulo:"),a(),n(84,"span"),r(85),a()(),n(86,"div",64)(87,"label"),r(88,"Scadenza:"),a(),n(89,"span"),r(90),P(91,"date"),a()(),n(92,"div",64)(93,"label"),r(94,"Creato il:"),a(),n(95,"span"),r(96),P(97,"date"),a()(),n(98,"div",64)(99,"label"),r(100,"Aggiornato il:"),a(),n(101,"span"),r(102),P(103,"date"),a()()()()()()}if(d&2){let t=z(10),o=z(35),e=c();s(9),y("input-error",t.invalid&&(t.touched||e.submitted)),h("ngModel",e.macroTask.nome),s(5),h("ngModel",e.macroTask.data_scadenza),s(4),m("value",e.taskService.getStatoTesto(e.macroTask.stato)),s(4),h("ngModel",e.macroTask.cliente_id),s(),m("value",null),s(2),m("ngForOf",e.clienti),s(4),h("ngModel",e.macroTask.priorita_globale),s(),m("ngForOf",D(43,ut)),s(4),y("input-error",o.invalid&&(o.touched||e.submitted)),h("ngModel",e.macroTask.assegnazione_id),s(2),m("value",null),s(15),h("ngModel",e.macroTask.note),s(),m("ngIf",!e.macroTask.id),s(),m("ngIf",e.macroTask.id),s(9),m("ngClass",e.taskService.getStatoBadgeClass(e.macroTask.stato)),s(),v(" ",e.taskService.getStatoTesto(e.macroTask.stato)," "),s(4),m("ngClass",e.taskService.getPrioritaBadgeClass(e.macroTask.priorita_globale)),s(),v(" P",e.macroTask.priorita_globale," "),s(5),q("width",e.macroTask.progresso,"%"),m("ngClass",e.taskService.getStatoBadgeClass(e.macroTask.stato)),s(2),v("",e.macroTask.progresso,"%"),s(5),w(e.getNomeCliente(e.macroTask.cliente_id)),s(5),w(e.taskService.getModuloName(e.macroTask.assegnazione_id||null)),s(4),y("text-danger",e.taskService.isScaduta(e.macroTask.data_scadenza))("text-warning",e.taskService.isScadenzaImminente(e.macroTask.data_scadenza)),s(),v(" ",V(91,34,e.macroTask.data_scadenza,"dd/MM/yyyy")," "),s(6),w(V(97,37,e.macroTask.created_at,"dd/MM/yyyy HH:mm")),s(6),w(V(103,40,e.macroTask.updated_at,"dd/MM/yyyy HH:mm"))}}function Lt(d,i){if(d&1){let t=f();n(0,"div",118),u("click",function(){g(t);let e=c();return _(e.chiudiModal("sottoTask"))}),a()}}function Ut(d,i){if(d&1){let t=f();n(0,"div",119)(1,"div",120)(2,"div",121)(3,"div",122)(4,"h5",123)(5,"i",22),r(6,"layers"),a(),r(7," Nuova Sotto Task "),a(),n(8,"button",124),u("click",function(){g(t);let e=c();return _(e.chiudiModal("sottoTask"))}),a()(),n(9,"div",125)(10,"div",38)(11,"label",126),r(12,"Nome *"),a(),n(13,"input",127,4),b("ngModelChange",function(e){g(t);let l=c();return S(l.nuovaSottoTask.nome,e)||(l.nuovaSottoTask.nome=e),_(e)}),a()(),n(15,"div",38)(16,"label",128),r(17,"Priorit\xE0"),a(),n(18,"select",129),b("ngModelChange",function(e){g(t);let l=c();return S(l.nuovaSottoTask.priorita,e)||(l.nuovaSottoTask.priorita=e),_(e)}),n(19,"option",69),r(20,"1 - Minima"),a(),n(21,"option",69),r(22,"2 - Bassa"),a(),n(23,"option",69),r(24,"3 - Media"),a(),n(25,"option",69),r(26,"4 - Alta"),a(),n(27,"option",69),r(28,"5 - Critica"),a()()()(),n(29,"div",130)(30,"button",131),u("click",function(){g(t);let e=c();return _(e.chiudiModal("sottoTask"))}),r(31,"Annulla"),a(),n(32,"button",132),u("click",function(){g(t);let e=c();return _(e.creaSottoTask())}),r(33,"Crea"),a()()()()()}if(d&2){let t=z(14),o=c();s(13),y("input-error",t.invalid&&(t.touched||o.submitted)),h("ngModel",o.nuovaSottoTask.nome),s(5),h("ngModel",o.nuovaSottoTask.priorita),s(),m("ngValue",1),s(2),m("ngValue",2),s(2),m("ngValue",3),s(2),m("ngValue",4),s(2),m("ngValue",5)}}function jt(d,i){if(d&1){let t=f();n(0,"div",118),u("click",function(){g(t);let e=c();return _(e.chiudiModal("modificaSottoTask"))}),a()}}function $t(d,i){if(d&1){let t=f();n(0,"div",119)(1,"div",120)(2,"div",121)(3,"div",122)(4,"h5",123)(5,"i",22),r(6,"edit"),a(),r(7," Modifica Sotto Task "),a(),n(8,"button",124),u("click",function(){g(t);let e=c();return _(e.chiudiModal("modificaSottoTask"))}),a()(),n(9,"div",125)(10,"div",38)(11,"label",133),r(12,"Nome *"),a(),n(13,"input",134),b("ngModelChange",function(e){g(t);let l=c();return S(l.sottoTaskModificata.nome,e)||(l.sottoTaskModificata.nome=e),_(e)}),a()(),n(14,"div",38)(15,"label",135),r(16,"Priorit\xE0"),a(),n(17,"select",136),b("ngModelChange",function(e){g(t);let l=c();return S(l.sottoTaskModificata.priorita,e)||(l.sottoTaskModificata.priorita=e),_(e)}),n(18,"option",137),r(19,"1 - Minima"),a(),n(20,"option",138),r(21,"2 - Bassa"),a(),n(22,"option",139),r(23,"3 - Media"),a(),n(24,"option",140),r(25,"4 - Alta"),a(),n(26,"option",141),r(27,"5 - Critica"),a()()(),n(28,"div",38)(29,"label",142),r(30,"Stato"),a(),n(31,"select",143),b("ngModelChange",function(e){g(t);let l=c();return S(l.sottoTaskModificata.stato,e)||(l.sottoTaskModificata.stato=e),_(e)}),n(32,"option",144),r(33,"Da Fare"),a(),n(34,"option",145),r(35,"In Lavorazione"),a(),n(36,"option",146),r(37,"Completato"),a()()()(),n(38,"div",130)(39,"button",131),u("click",function(){g(t);let e=c();return _(e.chiudiModal("modificaSottoTask"))}),r(40,"Annulla"),a(),n(41,"button",132),u("click",function(){g(t);let e=c();return _(e.salvaModificaSottoTask())}),r(42,"Salva Modifiche"),a()()()()()}if(d&2){let t=c();s(13),h("ngModel",t.sottoTaskModificata.nome),s(4),h("ngModel",t.sottoTaskModificata.priorita),s(14),h("ngModel",t.sottoTaskModificata.stato)}}function Rt(d,i){if(d&1){let t=f();n(0,"div",118),u("click",function(){g(t);let e=c();return _(e.chiudiModal("dettaglio"))}),a()}}function qt(d,i){if(d&1){let t=f();n(0,"div",119)(1,"div",120)(2,"div",121)(3,"div",122)(4,"h5",123)(5,"i",22),r(6,"task"),a(),r(7),a(),n(8,"button",124),u("click",function(){g(t);let e=c();return _(e.chiudiModal("dettaglio"))}),a()(),n(9,"div",125)(10,"div",38)(11,"label",147),r(12,"Nome *"),a(),n(13,"input",148),b("ngModelChange",function(e){g(t);let l=c();return S(l.dettaglioModal.nome,e)||(l.dettaglioModal.nome=e),_(e)}),a()(),n(14,"div",38)(15,"label",149),r(16,"Descrizione"),a(),n(17,"textarea",150),b("ngModelChange",function(e){g(t);let l=c();return S(l.dettaglioModal.descrizione,e)||(l.dettaglioModal.descrizione=e),_(e)}),a()(),n(18,"div",38)(19,"label",151),r(20,"Data Scadenza Prevista"),a(),n(21,"input",152),b("ngModelChange",function(e){g(t);let l=c();return S(l.dettaglioModal.data_scadenza_prevista,e)||(l.dettaglioModal.data_scadenza_prevista=e),_(e)}),a()()(),n(22,"div",130)(23,"button",131),u("click",function(){g(t);let e=c();return _(e.chiudiModal("dettaglio"))}),r(24,"Annulla"),a(),n(25,"button",153),u("click",function(){g(t);let e=c();return _(e.salvaDettaglio())}),n(26,"i",22),r(27),a(),r(28),a()()()()()}if(d&2){let t=c();s(7),v(" ",t.modalDettaglioMode==="create"?"Nuovo Task di Dettaglio":"Modifica Dettaglio"," "),s(6),h("ngModel",t.dettaglioModal.nome),s(4),h("ngModel",t.dettaglioModal.descrizione),s(4),h("ngModel",t.dettaglioModal.data_scadenza_prevista),s(4),m("disabled",t.loading),s(2),w(t.modalDettaglioMode==="create"?"save":"edit"),s(),v(" ",t.modalDettaglioMode==="create"?"Crea Dettaglio":"Salva Modifiche"," ")}}function Ht(d,i){if(d&1){let t=f();n(0,"div",118),u("click",function(){g(t);let e=c();return _(e.chiudiTemplateModal())}),a()}}function Gt(d,i){if(d&1&&(n(0,"li")(1,"strong"),r(2),a(),r(3),a()),d&2){let t=i.$implicit;s(2),w(t.nome),s(),v(" - ",t.descrizione," ")}}function Kt(d,i){if(d&1&&(n(0,"ul"),k(1,Gt,4,2,"li",102),a()),d&2){let t=c().$implicit;s(),m("ngForOf",t.task_dettaglio)}}function Qt(d,i){if(d&1&&(n(0,"div",162)(1,"strong"),r(2),a(),r(3),k(4,Kt,2,1,"ul",94),a()),d&2){let t=i.$implicit,o=i.index;s(2),F("",o+1,". ",t.nome),s(),v(" (Priorit\xE0: ",t.priorita,") "),s(),m("ngIf",t.task_dettaglio&&t.task_dettaglio.length>0)}}function Jt(d,i){if(d&1){let t=f();n(0,"div",119)(1,"div",120)(2,"div",121)(3,"div",122)(4,"h5",123)(5,"i",22),r(6,"content_copy"),a(),r(7," Salva come Template "),a(),n(8,"button",154),u("click",function(){g(t);let e=c();return _(e.chiudiTemplateModal())}),a()(),n(9,"div",125)(10,"div",38)(11,"label",155),r(12,"Nome Template *"),a(),n(13,"input",156),b("ngModelChange",function(e){g(t);let l=c();return S(l.nomeTemplate,e)||(l.nomeTemplate=e),_(e)}),a()(),n(14,"div",38)(15,"label",157),r(16,"Descrizione"),a(),n(17,"textarea",158),b("ngModelChange",function(e){g(t);let l=c();return S(l.descrizioneTemplate,e)||(l.descrizioneTemplate=e),_(e)}),a()(),n(18,"div",38)(19,"label",159),r(20,"Anteprima Struttura"),a(),n(21,"div",160),k(22,Qt,5,4,"div",161),a()()(),n(23,"div",130)(24,"button",131),u("click",function(){g(t);let e=c();return _(e.chiudiTemplateModal())}),r(25,"Annulla"),a(),n(26,"button",153),u("click",function(){g(t);let e=c();return _(e.confermaCreaTemplate())}),n(27,"i",22),r(28,"save"),a(),r(29),a()()()()()}if(d&2){let t=c();s(13),h("ngModel",t.nomeTemplate),s(4),h("ngModel",t.descrizioneTemplate),s(5),m("ngForOf",(t.macroTask==null?null:t.macroTask.sotto_tasks)||D(7,kt)),s(4),m("disabled",!t.nomeTemplate.trim()||t.loading),s(),y("fa-spin",t.loading),s(2),v(" ",t.loading?"Salvataggio...":"Crea Template"," ")}}function Xt(d,i){if(d&1){let t=f();n(0,"div",118),u("click",function(){g(t);let e=c();return _(e.chiudiModal("leggiDettaglio"))}),a()}}function Yt(d,i){if(d&1&&(n(0,"div",38)(1,"label",159),r(2,"Scadenza prevista"),a(),n(3,"div"),r(4),P(5,"date"),a()()),d&2){let t=c().ngIf;s(4),w(V(5,1,t.data_scadenza_prevista,"dd/MM/yyyy"))}}function Zt(d,i){if(d&1&&(n(0,"div",38)(1,"label",159),r(2,"Descrizione completa"),a(),n(3,"div",164),r(4),a()()),d&2){let t=c().ngIf;s(4),w(t.descrizione)}}function te(d,i){if(d&1&&(A(0),n(1,"div",38)(2,"label",159),r(3,"Nome"),a(),n(4,"div"),r(5),a()(),k(6,Yt,6,4,"div",163)(7,Zt,5,1,"div",163),B()),d&2){let t=i.ngIf;s(5),w(t.nome),s(),m("ngIf",t.data_scadenza_prevista),s(),m("ngIf",t.descrizione)}}function ee(d,i){if(d&1){let t=f();n(0,"div",119)(1,"div",120)(2,"div",121)(3,"div",122)(4,"h5",123)(5,"i",22),r(6,"description"),a(),r(7," Dettaglio "),a(),n(8,"button",124),u("click",function(){g(t);let e=c();return _(e.chiudiModal("leggiDettaglio"))}),a()(),n(9,"div",125),k(10,te,8,3,"ng-container",94),a(),n(11,"div",130)(12,"button",131),u("click",function(){g(t);let e=c();return _(e.chiudiModal("leggiDettaglio"))}),r(13,"Chiudi"),a()()()()()}if(d&2){let t=c();s(10),m("ngIf",t.selectedDettaglioView)}}var pt=class d{constructor(i,t,o,e,l,p,x){this.router=i;this.route=t;this.taskService=o;this.soggettiService=e;this.userService=l;this.authService=p;this.emailService=x}currentUser=null;macroTask=null;clienti=[];loading=!1;error="";activeDropdownId=null;selectedDettaglioView=null;modals={sottoTask:!1,dettaglio:!1,modificaSottoTask:!1,leggiDettaglio:!1};modalDettaglioMode="create";dettaglioModal={id:void 0,nome:"",descrizione:"",data_scadenza_prevista:new Date().toISOString().split("T")[0],sotto_task_id:""};sottoTaskStati=["da_fare","in_lavorazione","completato"];showTemplateModal=!1;nomeTemplate="";descrizioneTemplate="";submitted=!1;nuovaSottoTask={nome:"",priorita:3,macro_task_id:""};nuovoDettaglio={nome:"",descrizione:"",data_scadenza_prevista:new Date().toISOString().split("T")[0],sotto_task_id:""};sottoTaskModificata={};sottoTaskDaModificare=null;selectedSottoTask=null;sottoTaskEspanse=new Set;espandiTutti=!1;ngOnInit(){return T(this,null,function*(){try{let t=this.authService.user();if(t&&t.id){let o=yield this.userService.getUserById(t.id);this.currentUser=o.data??null}else this.currentUser=null;this.userService.refreshAdminStatus&&(yield this.userService.refreshAdminStatus())}catch(t){console.warn("Impossibile recuperare utente corrente",t),this.currentUser=null}let i=this.route.snapshot.paramMap.get("id");i==="nuova"?this.inizializzaNuovaTask():i?yield this.caricaTask(i):this.inizializzaNuovaTask();try{yield this.caricaDatiSupporto()}catch(t){console.warn("Errore caricamento dati di supporto",t)}})}inizializzaNuovaTask(){this.macroTask={id:"",nome:"",data_scadenza:new Date().toISOString().split("T")[0],cliente_id:"",assegnazione_id:null,note:"",stato:"da_fare",priorita_globale:1,progresso:0,created_at:"",updated_at:"",sotto_tasks:[],extra_data:{}}}caricaTask(i){return T(this,null,function*(){this.loading=!0;try{let t=yield this.taskService.getMacroTaskById(i);if(t.error)this.error="Errore: "+t.error.message;else{this.macroTask=t.data;let o=new Set((this.macroTask?.sotto_tasks||[]).map(e=>e.id));this.sottoTaskEspanse.forEach(e=>{o.has(e)||this.sottoTaskEspanse.delete(e)}),this.espandiTutti&&(this.macroTask?.sotto_tasks||[]).forEach(e=>this.sottoTaskEspanse.add(e.id))}}catch(t){this.error="Errore: "+t.message}finally{this.loading=!1}})}caricaDatiSupporto(){return T(this,null,function*(){try{let i=yield this.soggettiService.getSoggettiByTipo("cliente");this.clienti=i.data||[]}catch(i){console.error("Errore caricamento clienti:",i)}})}apriModal(i,t){if(this.modals[i]=!0,i==="sottoTask"){let o=this.macroTask?.id;o&&(this.nuovaSottoTask.macro_task_id=o)}i==="dettaglio"&&t&&(this.selectedSottoTask=t,this.modalDettaglioMode="create",this.dettaglioModal={id:void 0,nome:"",descrizione:"",data_scadenza_prevista:new Date().toISOString().split("T")[0],sotto_task_id:t.id}),i==="modificaSottoTask"&&t&&(this.sottoTaskDaModificare=t,this.sottoTaskModificata={id:t.id,nome:t.nome,descrizione:t.descrizione??void 0,priorita:t.priorita,stato:t.stato})}chiudiModal(i){this.modals[i]=!1,i==="sottoTask"&&(this.nuovaSottoTask={nome:"",priorita:3,macro_task_id:""}),i==="dettaglio"&&(this.modalDettaglioMode="create",this.dettaglioModal={id:void 0,nome:"",descrizione:"",data_scadenza_prevista:new Date().toISOString().split("T")[0],sotto_task_id:this.selectedSottoTask?.id??""},this.selectedSottoTask=null),i==="modificaSottoTask"&&(this.sottoTaskDaModificare=null,this.sottoTaskModificata={})}salvaDettaglio(){return T(this,null,function*(){if(!this.dettaglioModal.nome.trim()){this.error="Il nome del dettaglio \xE8 obbligatorio";return}if(!this.dettaglioModal.sotto_task_id){this.error="Seleziona una sotto-task valida";return}try{let i;if(this.modalDettaglioMode==="create"){let t={nome:this.dettaglioModal.nome,descrizione:this.dettaglioModal.descrizione,data_scadenza_prevista:this.dettaglioModal.data_scadenza_prevista,sotto_task_id:this.dettaglioModal.sotto_task_id};i=yield this.taskService.createTaskDettaglio(t)}else{if(!this.dettaglioModal.id)return;i=yield this.taskService.updateTaskDettaglio(this.dettaglioModal.id,{nome:this.dettaglioModal.nome,descrizione:this.dettaglioModal.descrizione,data_scadenza_prevista:this.dettaglioModal.data_scadenza_prevista})}i?.error?this.error="Errore: "+i.error.message:(yield this.aggiornaTask(),this.chiudiModal("dettaglio"))}catch(i){this.error="Errore: "+i.message}})}salvaMacroTask(){return T(this,null,function*(){if(this.submitted=!0,!(!this.macroTask||!this.validazioneTask())){this.loading=!0,this.error="";try{let t;if(this.macroTask.id){let i=this.macroTask,{cliente:o,sotto_tasks:e}=i,l=U(i,["cliente","sotto_tasks"]),p={nome:l.nome,data_scadenza:l.data_scadenza,note:l.note||"",stato:l.stato,priorita_globale:Number(l.priorita_globale)||1,progresso:l.progresso};l.cliente_id&&this.isValidUUID(l.cliente_id)&&(p.cliente_id=l.cliente_id),l.assegnazione_id&&(p.assegnazione_id=l.assegnazione_id),console.log("Aggiorno MacroTask:",this.macroTask.id,p),t=yield this.taskService.updateMacroTask(this.macroTask.id,p)}else{let o={nome:this.macroTask.nome,data_scadenza:this.macroTask.data_scadenza,note:this.macroTask.note||"",stato:"da_fare"};this.macroTask.cliente_id&&this.isValidUUID(this.macroTask.cliente_id)&&(o.cliente_id=this.macroTask.cliente_id),this.macroTask.assegnazione_id&&(o.assegnazione_id=this.macroTask.assegnazione_id),t=yield this.taskService.createMacroTask(o)}t.error?this.error="Errore: "+t.error.message:this.router.navigate(["/task"])}catch(t){this.error="Errore: "+t.message}finally{this.loading=!1}}})}isValidUUID(i){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}validazioneTask(){return this.macroTask.nome.trim()?this.macroTask.assegnazione_id?!0:(this.error="Seleziona un modulo per assegnare la task",!1):(this.error="Il nome della task \xE8 obbligatorio",!1)}creaSottoTask(){return T(this,null,function*(){if(!this.nuovaSottoTask.nome.trim()){this.error="Il nome della sotto-task \xE8 obbligatorio";return}try{let i=yield this.taskService.createSottoTask(this.nuovaSottoTask);i.error?this.error="Errore: "+i.error.message:yield this.aggiornaTask(),this.chiudiModal("sottoTask")}catch(i){this.error="Errore: "+i.message}})}creaTaskDettaglio(){return T(this,null,function*(){if(!this.nuovoDettaglio.nome.trim()){this.error="Il nome del dettaglio \xE8 obbligatorio";return}try{let i=yield this.taskService.createTaskDettaglio(this.nuovoDettaglio);i.error?this.error="Errore: "+i.error.message:yield this.aggiornaTask(),this.chiudiModal("dettaglio")}catch(i){this.error="Errore: "+i.message}})}salvaModificaSottoTask(){return T(this,null,function*(){if(!this.sottoTaskDaModificare||!this.sottoTaskModificata.nome?.trim()){this.error="Il nome della sotto-task \xE8 obbligatorio";return}try{let i=L({nome:this.sottoTaskModificata.nome,priorita:Number(this.sottoTaskModificata.priorita)||this.sottoTaskDaModificare.priorita},this.sottoTaskModificata.stato?{stato:this.sottoTaskModificata.stato}:{}),t=yield this.taskService.updateSottoTask(this.sottoTaskDaModificare.id,i);t.error?this.error="Errore: "+t.error.message:yield this.aggiornaTask(),this.chiudiModal("modificaSottoTask")}catch(i){this.error="Errore: "+i.message}})}toggleDettaglioCompletato(i,t){return T(this,null,function*(){try{(yield this.taskService.toggleTaskDettaglioCompletato(i.id,!i.completato)).error||(i.completato=!i.completato,i.data_completamento=i.completato?new Date().toISOString():null,yield this.aggiornaStatoSottoTaskAutomatico(t),yield this.aggiornaTask())}catch(o){this.error="Errore: "+o.message}})}aggiornaStatoSottoTaskAutomatico(i){return T(this,null,function*(){if(!i.task_dettaglio?.length)return;let t=i.task_dettaglio.every(l=>l.completato),o=i.task_dettaglio.every(l=>!l.completato),e=i.stato;if(t?e="completato":o?e="da_fare":e="in_lavorazione",e!==i.stato){let l=i.stato;try{yield this.taskService.updateSottoTask(i.id,{stato:e}),i.stato=e,l!=="completato"&&e==="completato"&&(console.log("Sotto-task completata, verifica invio email...",i),this.maybeAskAndSendCompletionEmail(i).catch(p=>{console.warn("Invio email completamento sotto-task fallito:",p)}))}catch(p){console.error("Errore aggiornamento stato sotto-task:",p)}yield this.aggiornaTask()}})}aggiornaTask(){return T(this,null,function*(){let i=this.macroTask?.id;i&&(yield this.caricaTask(i))})}toggleDropdown(i,t){t?.stopPropagation(),this.activeDropdownId=this.activeDropdownId===i?null:i}isDropdownOpen(i){return this.activeDropdownId===i}closeDropdown(){this.activeDropdownId=null}puoiModificareSottoTask(i){return!i.task_dettaglio||i.task_dettaglio.length===0}getNomeCliente(i){return this.clienti.find(t=>t.id===i)?.ragione_sociale||"Non assegnato"}trackBySottoTask(i,t){return t.id}trackByDettaglio(i,t){return t.id}eliminaMacroTask(){return T(this,null,function*(){if(!this.currentUser?.is_admin){this.error="Non autorizzato";return}let i=this.macroTask?.id;if(!(!i||!confirm("Sei sicuro di voler eliminare questa macro task e tutti i contenuti collegati?"))){this.loading=!0,this.error="";try{let o=yield this.taskService.deleteMacroTaskCascade(i);if(o.error){this.error="Errore eliminazione: "+o.error.message;return}this.router.navigate(["/task"])}catch(o){this.error="Errore: "+o.message}finally{this.loading=!1}}})}eliminaDettaglio(i,t){return T(this,null,function*(){if(confirm("Sei sicuro di eliminare questo dettaglio?"))try{let o=yield this.taskService.deleteTaskDettaglio(i.id);if(o.error){this.error="Errore: "+o.error.message;return}t.task_dettaglio&&(t.task_dettaglio=t.task_dettaglio.filter(l=>l.id!==i.id)),yield this.aggiornaStatoSottoTaskAutomatico(t);let e=this.macroTask?.id;e&&(yield this.caricaTask(e))}catch(o){this.error="Errore: "+o.message}})}cambiaStatoSottoTask(i,t){return T(this,null,function*(){if(!this.puoiModificareSottoTask(i)){this.error="Impossibile modificare lo stato: questa sotto-task ha dettagli e lo stato viene gestito automaticamente";return}try{let o=yield this.taskService.updateSottoTask(i.id,{stato:t});o.error?this.error="Errore: "+o.error.message:(i.stato=t,this.macroTask&&(yield this.caricaTask(this.macroTask.id)))}catch(o){this.error="Errore: "+o.message}})}getPrioritaBadgeClass(i){return this.taskService.getPrioritaBadgeClass(i)}getStatoBadgeClass(i){return this.taskService.getStatoBadgeClass(i)}getStatoTesto(i){return this.taskService.getStatoTesto(i)}getModuloName(i){return this.taskService.getModuloName(i.assegnazione_id||null)}isScaduta(i){return this.taskService.isScaduta(i)}isScadenzaImminente(i){return this.taskService.isScadenzaImminente(i)}salvaComeTemplate(){if(!this.currentUser?.is_admin){this.error="Non autorizzato";return}if(!this.macroTask){this.error="Nessuna task da salvare come template";return}this.nomeTemplate=this.macroTask.nome+" - Template",this.descrizioneTemplate=this.macroTask.note||"",this.showTemplateModal=!0}chiudiTemplateModal(){this.showTemplateModal=!1,this.nomeTemplate="",this.descrizioneTemplate=""}confermaCreaTemplate(){return T(this,null,function*(){if(!this.macroTask||!this.nomeTemplate.trim()){this.error="Il nome del template \xE8 obbligatorio";return}this.loading=!0;try{let i={sotto_tasks:[]};if(this.macroTask.sotto_tasks)for(let e of this.macroTask.sotto_tasks){let l={nome:e.nome,priorita:e.priorita,task_dettaglio:[]};if(e.task_dettaglio)for(let p of e.task_dettaglio){let x=this.calcolaOffsetGiorni(p.data_scadenza_prevista,this.macroTask.created_at),M={nome:p.nome,descrizione:p.descrizione||"",data_scadenza_prevista_offset:x};l.task_dettaglio.push(M)}i.sotto_tasks.push(l)}let t={nome:this.nomeTemplate,descrizione:this.descrizioneTemplate||null,modulo:this.macroTask.assegnazione_id||"immagine",priorita_globale:this.macroTask.priorita_globale,data_scadenza_default:30,struttura_template:i},o=yield this.taskService.createMacroTaskTemplate(t);o.error?this.error="Errore nel salvataggio del template: "+o.error.message:(this.chiudiTemplateModal(),alert("Template salvato con successo!"))}catch(i){this.error="Errore: "+i.message}finally{this.loading=!1}})}calcolaOffsetGiorni(i,t){let o=new Date(i),e=new Date(t),l=o.getTime()-e.getTime();return Math.ceil(l/(1e3*60*60*24))}apriDettaglio(i,t){this.selectedSottoTask=t,this.modalDettaglioMode="edit",this.dettaglioModal={id:i.id,nome:i.nome,descrizione:i.descrizione??"",data_scadenza_prevista:i.data_scadenza_prevista?i.data_scadenza_prevista.split("T")[0]:new Date().toISOString().split("T")[0],sotto_task_id:t.id},this.modals.dettaglio=!0}toggleSottoTaskEspansa(i){requestAnimationFrame(()=>{this.sottoTaskEspanse.has(i)?this.sottoTaskEspanse.delete(i):this.sottoTaskEspanse.add(i)})}isSottoTaskEspansa(i){return this.sottoTaskEspanse.has(i)}toggleEspandiTutti(){this.espandiTutti=!this.espandiTutti,requestAnimationFrame(()=>{this.espandiTutti&&this.macroTask?.sotto_tasks?this.macroTask.sotto_tasks.forEach(i=>{this.sottoTaskEspanse.add(i.id)}):this.sottoTaskEspanse.clear()})}canEditTask(){return this.taskService.canModifyTask(this.currentUser,this.macroTask??null)}maybeAskAndSendCompletionEmail(i){return T(this,null,function*(){try{if(!this.currentUser?.is_admin){console.log("Utente non admin: invio email disabilitato per completamento sotto-task",i.id);return}let t=this.macroTask?.cliente_id;if(!t){console.warn("Nessun cliente associato alla macro task");return}let o=this.clienti.find(C=>C.id===t);if(!o){console.warn("Cliente non trovato");return}let e=o.email||o?.referente_email||o?.contatto_email||o?.mail;if(!e||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){console.warn("Email cliente non valida o assente:",e);return}if(!confirm(`La sotto-task "${i.nome}" \xE8 stata completata.

Inviare una email di notifica al cliente?
Destinatario: ${e}`))return;let p=(i.task_dettaglio||[]).filter(C=>C.completato).map(C=>({nome:C.nome,data:C.data_scadenza_prevista?new Date(C.data_scadenza_prevista).toLocaleDateString("it-IT"):"N/D",descrizione:C.descrizione??""}));if(p.length===0){alert("Nessun dettaglio completato trovato nella sotto-task");return}let x=`Completamento attivit\xE0: ${i.nome}`,M=this.generateEmailText(o,i.nome,p),N=this.emailService.generateSottoTaskCompletionHtml(o,i.nome,p);console.log("\u{1F4E4} Invio email tramite servizio Aruba...");let I=yield this.emailService.sendEmail({to:e,subject:x,message:M,html:N});I.success?alert("Email inviata con successo al cliente!"):(this.error="Invio email fallito: "+(I.error||"Errore sconosciuto"),console.error("Errore invio email:",I.error))}catch(t){console.error("Errore durante l'invio dell'email:",t),this.error="Errore invio email: "+(t?.message||String(t))}})}generateEmailText(i,t,o){let e=i.referente||i.ragione_sociale||"Cliente",l=o.map(p=>`\u2022 ${p.nome}${p.data?` (Scadenza: ${p.data})`:""}${p.descrizione?` \u2014 ${p.descrizione}`:""}`).join(`
`);return`
Gentile ${e},

la informiamo che la sotto-task "${t}" \xE8 stata completata.

DETTAGLI COMPLETATI:
${l}

Cordiali saluti,
Il Team di Promethea S.r.l.

[Questo messaggio \xE8 stato generato automaticamente]
  `.trim()}handleSottoTaskAction(i,t){switch(i){case"edit":this.apriModal("modificaSottoTask",t);break;case"delete":confirm("Eliminare questa sotto-task?")&&console.log("delete requested",t.id);break;case"add-product":console.log("add-product per",t);break;default:console.log("Azione non gestita dall'action-dropdown:",i,t)}}buildExportTextFull(i,t=!1){let o=`Salve, vorrei vedere con te delle task che sto facendo.

Per programmare uso angular 20.0 (Controlla questa versione prima di rispondere) e ora ti dar\xF2 la lista delle task che vorrei che ti mi aiutassi a compilare.
Non dare nulla per scontato e prima di creare una nuova funzione verifica se gi\xE0 abbiamo una funzione che possiamo usare o modificare. Vorrei sempre soluzioni semplici senza complicare troppo il codice.

Ora ti dar\xF2 una lista di task con il dettaglio della stessa.

`,e=`

Ora dimmi come procedere per risolvere le task che ti ho elencato in ordine. Se hai bisogno di informazioni ulteriori per essere precisa e professionale fammi delle domande a cui posso risponderti per darti un contesto pi\xF9 preciso se ne hai bisogno.`,l=`Sotto-task: ${i.nome||"Senza nome"}

`,p=(i.task_dettaglio||[]).filter(M=>t?!M.completato:!0).map(M=>{let N=(M.nome||"").toString().trim(),I=(M.descrizione||"").toString().trim();return`- ${N}: ${I||"(nessuna descrizione)"}`}),x=p.length?p.join(`
`):"- (nessun dettaglio presente)";return`${o}${l}${x}${e}`}buildExportTextListOnly(i,t=!1){let o=`Sotto-task: ${i.nome||"Senza nome"}

`,e=(i.task_dettaglio||[]).filter(l=>t?!l.completato:!0).map(l=>{let p=(l.nome||"").toString().trim(),x=(l.descrizione||"").toString().trim();return`- ${p}: ${x||"(nessuna descrizione)"}`});return`${o}${e.length?e.join(`
`):"- (nessun dettaglio presente)"}`}exportSottoTask(i){return T(this,null,function*(){try{let t=window.confirm(`Vuoi includere anche il testo per l'IA (frase 1 e frase 2)?

Rispondi "OK" per S\xEC (testo completo) oppure "Annulla" per No (solo lista).`),o=window.confirm("Vuoi copiare solo i dettagli non completati? OK = solo non completati, Annulla = tutte"),e=t?this.buildExportTextFull(i,o):this.buildExportTextListOnly(i,o);if(typeof navigator<"u"&&navigator.clipboard&&navigator.clipboard.writeText){yield navigator.clipboard.writeText(e),alert(t?o?"Testo completo (solo non completati) copiato negli appunti.":"Testo completo copiato negli appunti.":o?"Lista dettagli (solo non completati) copiata negli appunti.":"Lista dettagli copiata negli appunti.");return}let l=new Blob([e],{type:"text/plain;charset=utf-8"}),p=URL.createObjectURL(l),x=document.createElement("a");x.href=p,x.download=`sotto-task-${i.id||"export"}.txt`,document.body.appendChild(x),x.click(),x.remove(),URL.revokeObjectURL(p),alert("Testo scaricato come file (fallback).")}catch(t){console.error("Export sotto-task error",t),alert("Errore esportazione testo: "+(t?.message||String(t)))}})}static \u0275fac=function(t){return new(t||d)(E(Z),E(Y),E(_t),E(ct),E(et),E(tt),E(gt))};static \u0275cmp=$({type:d,selectors:[["app-task-singola"]],hostBindings:function(t,o){t&1&&u("click",function(){return o.closeDropdown()},j)},decls:23,vars:16,consts:[["nomeCtrl","ngModel"],["assegnazioneCtrl","ngModel"],["tplNessunaSottoTask",""],["ad",""],["stNomeCtrl","ngModel"],[1,"task-detail-container"],[1,"form-section"],[1,"section-header"],[1,"section-titles"],[1,"section-title"],[1,"material-icons","header-icon"],["class","table-section",4,"ngIf"],["class","header-actions",4,"ngIf"],["class","status-message loading",4,"ngIf"],["class","status-message error",4,"ngIf"],["class","task-content marcotaskform",4,"ngIf"],["class","modal-backdrop show",3,"click",4,"ngIf"],["class","modal show d-block","tabindex","-1",4,"ngIf"],[1,"table-section"],[1,"text-muted"],[1,"header-actions"],[1,"promethea-button","secondary",3,"click"],[1,"material-icons"],[1,"btn-text"],["class","promethea-button delete",3,"disabled","click",4,"ngIf"],["class","promethea-button edit",3,"disabled","click",4,"ngIf"],[1,"promethea-button","primary",3,"click","disabled"],[1,"promethea-button","delete",3,"click","disabled"],[1,"promethea-button","edit",3,"click","disabled"],[1,"status-message","loading"],["role","status",1,"loading-spinner"],[1,"status-message","error"],[1,"task-content","marcotaskform"],[1,"main-section"],[1,"grid-form"],[1,"form-field","full-width"],["for","nome",1,"form-label"],["type","text","id","nome","name","nome","required","","placeholder","Inserisci il nome della task",3,"ngModelChange","ngModel"],[1,"form-field"],["for","data_scadenza",1,"form-label"],["type","date","id","data_scadenza",3,"ngModelChange","ngModel"],["for","stato",1,"form-label"],["type","text","id","stato","disabled","",3,"value"],["for","cliente_id",1,"form-label"],["id","cliente_id",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","priorita",1,"form-label"],["id","priorita",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],["for","assegnazione_id",1,"form-label"],["id","assegnazione_id","name","assegnazione_id","required","",3,"ngModelChange","ngModel"],["value","immagine"],["value","digitalizzazione"],["value","contabilita"],["value","ottimizzazione"],["value","tutti"],["for","note",1,"form-label"],["id","note","rows","4","placeholder","Aggiungi note o descrizione...",3,"ngModelChange","ngModel"],["class","form-actions",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"form-section","riepilogo"],[1,"card","info-card"],[1,"info-grid"],[1,"info-item"],[1,"badge",3,"ngClass"],[1,"progress","flex-1"],[1,"progress-bar",3,"ngClass"],[1,"progress-text"],[3,"ngValue"],[1,"form-actions"],[1,"promethea-button",2,"margin-top","var(--gutter-lg)",3,"click","disabled"],[1,"card-number",2,"font-size","var(--fs-md)"],[1,"header-actions",2,"max-width","280px","padding","var(--gutter-lg)"],[1,"promethea-button","outline",3,"click","title"],[1,"promethea-button","outline",3,"click"],["class","contenitore-sottotask",4,"ngIf","ngIfElse"],[1,"empty-state"],[1,"contenitore-sottotask"],["class","card sotto-task-card",3,"expanded","dropdown-open",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","sotto-task-card"],[1,"sotto-task-header",3,"click"],[1,"sotto-task-info"],[1,"icon-btn","expand",3,"click","title"],[1,"sotto-task-content"],[1,"sotto-task-title"],[1,"sotto-task-meta"],[1,"badge"],["class","dettaglio-counter",4,"ngIf"],[1,"sotto-task-actions",3,"click"],["title","Modifica sotto-task",1,"action-btn",3,"click"],["title","Esporta dettagli (copia testo)",1,"action-btn",3,"click"],["mode","modal",3,"action","row"],["dropdown-items","",3,"click"],[4,"ngIf"],[1,"dropdown-item",3,"click"],["class","action-btn","style","cursor: auto;","title","Stato gestito automaticamente dai dettagli",4,"ngIf"],[1,"dettaglio-container"],["class","dettaglio-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"dettaglio-counter"],[1,"dropdown-header"],[4,"ngFor","ngForOf"],[1,"dropdown-divider"],["title","Stato gestito automaticamente dai dettagli",1,"action-btn",2,"cursor","auto"],[1,"dettaglio-list"],["class","dettaglio-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"dettaglio-item"],[1,"dettaglio-content"],["type","checkbox",3,"change","click","mousedown","checked"],[1,"dettaglio-info"],[1,"dettaglio-header"],[1,"dettaglio-actions",3,"click"],["title","Modifica dettaglio",1,"icon-btn",3,"click"],["title","Elimina dettaglio",1,"icon-btn","danger",3,"click"],["class","dettaglio-descrizione text-muted",3,"click",4,"ngIf"],[1,"dettaglio-descrizione","text-muted",3,"click"],[3,"click"],[1,"modal-backdrop","show",3,"click"],["tabindex","-1",1,"modal","show","d-block"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Chiudi",1,"icon-btn","close",3,"click"],[1,"modal-body"],["for","stNome",1,"form-label"],["id","stNome","name","stNome","required","","type","text","placeholder","Inserisci nome sotto-task",3,"ngModelChange","ngModel"],["for","stPriorita",1,"form-label"],["id","stPriorita",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"promethea-button","secondary",3,"click"],["type","button",1,"promethea-button",3,"click"],["for","modificaNome",1,"form-label"],["type","text","id","modificaNome","placeholder","Inserisci il nome della sotto task",3,"ngModelChange","ngModel"],["for","modificaPriorita",1,"form-label"],["id","modificaPriorita",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["for","modificaStato",1,"form-label"],["id","modificaStato",3,"ngModelChange","ngModel"],["value","da_fare"],["value","in_lavorazione"],["value","completato"],["for","dettaglioNome",1,"form-label"],["type","text","id","dettaglioNome","placeholder","Inserisci il nome del dettaglio",3,"ngModelChange","ngModel"],["for","dettaglioDescrizione",1,"form-label"],["id","dettaglioDescrizione","rows","3","placeholder","Aggiungi una descrizione...",3,"ngModelChange","ngModel"],["for","dettaglioScadenza",1,"form-label"],["type","date","id","dettaglioScadenza",3,"ngModelChange","ngModel"],["type","button",1,"promethea-button",3,"click","disabled"],["type","button",1,"icon-btn",3,"click"],["for","nomeTemplate",1,"form-label"],["type","text","id","nomeTemplate","placeholder","Inserisci un nome per il template",3,"ngModelChange","ngModel"],["for","descrizioneTemplate",1,"form-label"],["id","descrizioneTemplate","rows","3","placeholder","Aggiungi una descrizione...",3,"ngModelChange","ngModel"],[1,"form-label"],[1,"template-preview"],["class","sotto-task-preview",4,"ngFor","ngForOf"],[1,"sotto-task-preview"],["class","form-field",4,"ngIf"],[2,"white-space","pre-wrap"]],template:function(t,o){t&1&&(n(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h1",9)(5,"i",10),r(6,"task"),a(),r(7),a(),k(8,ft,3,1,"div",11),a(),k(9,ht,13,6,"div",12),a()(),k(10,St,4,0,"div",13)(11,bt,4,1,"div",14)(12,Ft,104,44,"div",15)(13,Lt,1,0,"div",16)(14,Ut,34,9,"div",17)(15,jt,1,0,"div",16)(16,$t,43,3,"div",17)(17,Rt,1,0,"div",16)(18,qt,29,7,"div",17)(19,Ht,1,0,"div",16)(20,Jt,30,8,"div",17)(21,Xt,1,0,"div",16)(22,ee,14,1,"div",17),a()),t&2&&(s(7),v(" ",o.macroTask!=null&&o.macroTask.id?"Modifica Task":"Nuova Macro Task"," "),s(),m("ngIf",o.macroTask==null?null:o.macroTask.id),s(),m("ngIf",o.macroTask==null?null:o.macroTask.id),s(),m("ngIf",o.loading&&!o.macroTask),s(),m("ngIf",o.error),s(),m("ngIf",o.macroTask),s(),m("ngIf",o.modals.sottoTask),s(),m("ngIf",o.modals.sottoTask),s(),m("ngIf",o.modals.modificaSottoTask),s(),m("ngIf",o.modals.modificaSottoTask),s(),m("ngIf",o.modals.dettaglio),s(),m("ngIf",o.modals.dettaglio),s(),m("ngIf",o.showTemplateModal),s(),m("ngIf",o.showTemplateModal),s(),m("ngIf",o.modals.leggiDettaglio),s(),m("ngIf",o.modals.leggiDettaglio))},dependencies:[X,G,K,Q,dt,rt,st,it,ot,at,lt,nt,mt,J],styles:['.section-title[_ngcontent-%COMP%]{margin:0}.header-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:var(--gutter-sm);width:100%;max-width:320px;container-type:inline-size;padding:var(--gutter-md)}@container (max-width: 300px){.header-actions[_ngcontent-%COMP%]{grid-template-columns:1fr;max-width:100%}}@container (min-width: 301px) and (max-width: 500px){.header-actions[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;max-width:280px}}@container (min-width: 501px){.header-actions[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;max-width:320px}}.section-header[_ngcontent-%COMP%]{align-items:flex-start;justify-content:space-between;container-type:inline-size;margin:0}.task-detail-container[_ngcontent-%COMP%]{padding:var(--gutter-lg);background:var(--background);min-height:100vh}.task-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) minmax(260px,350px);gap:var(--gutter-lg);align-items:flex-start}@container (max-width: 600px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:var(--gutter-md)}.header-actions[_ngcontent-%COMP%]{max-width:100%;justify-self:center}}.header-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:var(--gutter-sm);padding:var(--gutter-sm) var(--gutter-md);font-size:var(--fs-sm);min-height:2.5rem;white-space:nowrap}@container (max-width: 160px){.header-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.header-actions[_ngcontent-%COMP%]   .promethea-button[_ngcontent-%COMP%]{padding:var(--gutter-md);min-width:2.5rem}}.main-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-md);min-width:0}.task-card[_ngcontent-%COMP%]{position:relative;border-left:4px solid var(--primary);padding:var(--gutter-lg);gap:var(--gutter-sm);border-radius:18px;display:flex;flex-direction:column;justify-content:space-between;height:100%}.task-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm)}.task-card.scaduta[_ngcontent-%COMP%]{border-left-color:#ef4444;background:linear-gradient(135deg,var(--background) 0%,color-mix(in srgb,#ef4444 8%,transparent) 100%)}.task-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--gutter-sm);margin-bottom:var(--gutter-sm);flex-wrap:wrap}.task-main-info[_ngcontent-%COMP%]{flex:1;min-width:0}.task-title[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:var(--gutter-sm)}.task-meta-compact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);color:color-mix(in srgb,var(--text-color) 60%,transparent)}.task-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);flex-shrink:0;margin-left:auto}.priority-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:5rem;height:var(--fs-md);padding:0 var(--gutter-sm);border-radius:6px;font-weight:700;border:1px solid var(--smoke-color-1);background:color-mix(in srgb,var(--text-color) 10%,transparent);text-transform:uppercase;letter-spacing:.5px}.priority-badge[data-priority="5"][_ngcontent-%COMP%]{background:linear-gradient(90deg,#6b0218,#a50b1f);color:#fff;border:1px solid rgba(0,0,0,.12);box-shadow:0 6px 16px #a50b1f1f}.priority-badge[data-priority="4"][_ngcontent-%COMP%]{background:linear-gradient(90deg,#ef4444,#c53030);color:#fff;border:1px solid rgba(0,0,0,.08)}.priority-badge[data-priority="3"][_ngcontent-%COMP%]{background:linear-gradient(90deg,#f59e0b,#d97706);color:#1a1a1a;border:1px solid rgba(0,0,0,.06)}.priority-badge[data-priority="2"][_ngcontent-%COMP%]{background:linear-gradient(90deg,#10b981,#059669);color:#fff;border:1px solid rgba(0,0,0,.06)}.priority-badge[data-priority="1"][_ngcontent-%COMP%], .priority-badge[data-priority="0"][_ngcontent-%COMP%], .priority-badge[_ngcontent-%COMP%]:not([data-priority]){background:color-mix(in srgb,var(--text-color) 6%,transparent);color:var(--text-color);border:1px solid var(--smoke-color-1)}.progress-section[_ngcontent-%COMP%]{margin:var(--gutter-sm) 0}.progress-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.progress-stats[_ngcontent-%COMP%]{flex-shrink:0}.scadenza-date[_ngcontent-%COMP%]{font-weight:700}.task-counts-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--gutter-sm);margin:var(--gutter-sm) 0}.count-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--gutter-sm);background:var(--smoke-color-2);border-radius:8px;border:1px solid var(--smoke-color-1)}.count-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:var(--fs-md);height:var(--fs-md);padding:var(--gutter-sm);border-radius:50%;font-weight:700;color:#fff}.count-badge.da-fare[_ngcontent-%COMP%]{background:#42464d}.count-badge.in-lavorazione[_ngcontent-%COMP%]{background:var(--secondary)}.count-badge.completate[_ngcontent-%COMP%]{background:#10b981}.count-label[_ngcontent-%COMP%]{margin-top:4px;text-align:center;color:color-mix(in srgb,var(--text-color) 70%,transparent);text-transform:uppercase;letter-spacing:.5px}.task-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:var(--gutter-sm);border-top:1px solid var(--smoke-color-1);margin-top:auto}.sotto-task-card[_ngcontent-%COMP%]{border-left:4px solid var(--primary);display:flex;flex-direction:column;height:100%;container-type:inline-size;min-width:0;position:relative;overflow:visible}.sotto-task-card.expanded[_ngcontent-%COMP%]{box-shadow:0 8px 24px var(--shadow2);border-color:var(--primary)}.sotto-task-card[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{z-index:50}.sotto-task-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--gutter-sm);margin-bottom:var(--gutter-sm);flex-wrap:wrap;cursor:pointer}.sotto-task-info[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0;display:flex;align-items:flex-start;gap:var(--gutter-sm)}.sotto-task-content[_ngcontent-%COMP%]{flex:1;min-width:0}.sotto-task-meta[_ngcontent-%COMP%]{display:flex;gap:var(--gutter-sm);align-items:center;flex-wrap:wrap;margin-top:.25rem}.sotto-task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm);margin-left:auto;flex:1 1 auto;justify-content:flex-end;flex-wrap:wrap;min-width:0;max-width:100%;position:relative;z-index:2}.dettaglio-container[_ngcontent-%COMP%]{max-height:0;overflow:hidden;opacity:0;transition:max-height .5s cubic-bezier(.4,0,.2,1),opacity .3s ease .1s}.dettaglio-container.show[_ngcontent-%COMP%]{max-height:5000px;opacity:1;transition:max-height .8s cubic-bezier(.4,0,.2,1),opacity .4s ease .1s}.dettaglio-list[_ngcontent-%COMP%]{border-top:1px solid var(--smoke-color-1);padding-top:var(--gutter-sm);display:flex;flex-direction:column;gap:var(--gutter-sm)}.dettaglio-item[_ngcontent-%COMP%]{padding:var(--gutter-sm);background:var(--background);border-radius:10px;border:1px solid var(--smoke-color-1);transition:all .2s ease}.dettaglio-item[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:var(--smoke-color-2)}.dettaglio-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;column-gap:var(--gutter-sm);justify-content:center;align-items:first baseline}.dettaglio-descrizione[_ngcontent-%COMP%]{padding:var(--gutter-sm) 0}.dettaglio-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) auto auto;align-items:center;gap:var(--gutter-sm)}.dettaglio-header[_ngcontent-%COMP%]   strong.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:color-mix(in srgb,var(--text-color) 50%,transparent)}.dettaglio-counter[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.75rem;color:color-mix(in srgb,var(--text-color) 60%,transparent);background:var(--smoke-color-2);padding:.125rem .5rem;border-radius:12px;border:1px solid var(--smoke-color-1)}.sotto-task-card[_ngcontent-%COMP%]:not(.expanded)   .dettaglio-counter[_ngcontent-%COMP%]{background:color-mix(in srgb,var(--primary) 15%,transparent);color:var(--primary);border-color:color-mix(in srgb,var(--primary) 30%,transparent)}.form-section.riepilogo[_ngcontent-%COMP%]{padding:0;background:transparent;border:none;box-shadow:none;align-self:flex-start;position:sticky;top:var(--gutter-lg)}.contenitore-sottotask[_ngcontent-%COMP%]{gap:var(--gutter-md);display:flex;flex-direction:column}.marcotaskform[_ngcontent-%COMP%]{margin-top:var(--gutter-lg)!important}.info-card[_ngcontent-%COMP%]{background:var(--background);border:1px solid var(--smoke-color-1);border-radius:16px;padding:var(--gutter-lg);box-shadow:0 4px 12px var(--shadow);position:sticky;top:var(--gutter-lg);z-index:10}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-color);margin-bottom:var(--gutter-sm);font-weight:600;border-bottom:2px solid var(--primary);padding-bottom:var(--gutter-sm)}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:var(--gutter-sm);padding:var(--gutter-sm) 0;border-bottom:1px solid color-mix(in srgb,var(--text-color) 15%,transparent)}.info-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color);margin:0}.info-item[_ngcontent-%COMP%]   span.scaduta[_ngcontent-%COMP%]{color:#e74c3c;font-weight:500}.info-item[_ngcontent-%COMP%]   span.imminente[_ngcontent-%COMP%]{color:#f39c12;font-weight:500}.form-section.riepilogo[_ngcontent-%COMP%]{padding:0;background:transparent;border:none;box-shadow:none;align-self:flex-start;position:sticky;top:var(--gutter-lg);z-index:10}.sotto-task-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%], .sotto-task-actions[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{flex:0 0 auto}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;display:none;min-width:180px;padding:8px 0;margin:4px 0 0;background:var(--background);border:1px solid var(--smoke-color-1);border-radius:8px;box-shadow:0 4px 12px var(--shadow);list-style:none;z-index:10000}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-header[_ngcontent-%COMP%]{padding:var(--gutter-sm);font-weight:800;background:color-mix(in srgb,var(--text-color) 10%,transparent);text-transform:uppercase;border-bottom:1px solid color-mix(in srgb,var(--text-color) 30%,transparent)}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;padding:8px 16px;background:transparent;border:none;color:var(--text-color);text-align:left;text-decoration:none;cursor:pointer;transition:all .2s ease;font-size:.85em}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2);color:var(--primary)}.dropdown-divider[_ngcontent-%COMP%]{height:1px;background:var(--smoke-color-1);margin:8px 0;border:none}.sotto-task-card.dropdown-open[_ngcontent-%COMP%]{z-index:200}.dettaglio-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--gutter-sm)}.grid-responsive[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(380px,1fr))}@media (max-width: 1024px){.task-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-section.riepilogo[_ngcontent-%COMP%]{position:static;order:-1}}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contenitore-bottoni[_ngcontent-%COMP%]{display:flex;justify-content:center}.section-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.sotto-task-header[_ngcontent-%COMP%], .task-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.sotto-task-actions[_ngcontent-%COMP%], .task-header-actions[_ngcontent-%COMP%]{margin-left:0;justify-content:flex-start}.dettaglio-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:var(--gutter-sm)}.sotto-tasks-counts[_ngcontent-%COMP%]{grid-template-columns:1fr}.sotto-task-global-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%;margin-top:var(--gutter-sm)}}']})};export{pt as TaskSingola};
