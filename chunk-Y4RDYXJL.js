import{b as X,d as Z,f as tt,h as et,o as it,p as nt,q as at,s as rt,v as ot}from"./chunk-XK6OQE2G.js";import{a as K}from"./chunk-I5UR3M7V.js";import{b as Y,c as J}from"./chunk-5QACXCZZ.js";import"./chunk-74XWVHEF.js";import{j as H,k as R,n as j,o as Q,r as G}from"./chunk-53FSC42K.js";import{Fa as l,Fb as r,Gb as g,Hb as E,Ib as P,Jb as M,Kb as z,La as V,Lb as T,Mb as $,Nb as N,Ra as W,S as D,Ub as F,Vb as w,Wa as _,X as f,Y as v,ec as U,gb as d,hb as n,ib as a,jb as L,nb as q,ob as O,qb as C,tb as I,ub as m}from"./chunk-CPJK23XT.js";import"./chunk-X5YLR3NI.js";import{a as B,i as k}from"./chunk-ODN5LVDJ.js";function ut(o,e){if(o&1&&(n(0,"div",16),r(1),a()),o&2){let t=m();l(),g(t.message)}}function pt(o,e){o&1&&(n(0,"div",17),r(1,"Caricamento..."),a())}function _t(o,e){if(o&1&&(q(0),r(1),O()),o&2){let t=m().$implicit,i=m(3);l(),E(" ",i.getSoggettoLabel(t.soggetto_id)," ")}}function gt(o,e){if(o&1&&(n(0,"div"),r(1),F(2,"number"),a()),o&2){let t=e.$implicit;l(),P("",t.descrizione," \u2014 ",w(2,2,t.importo*(t.quantita||1),"1.2-2"))}}function ft(o,e){if(o&1&&(n(0,"div",29)(1,"ul",30),_(2,gt,3,5,"div",22),a()()),o&2){let t=m(2).$implicit;l(2),d("ngForOf",t.dettagli.items)}}function vt(o,e){if(o&1&&(q(0),r(1),_(2,ft,3,1,"div",28),O()),o&2){let t=m().$implicit,i=m(3);l(),E(" ",i.getFornitoreLabel(t.fornitore_id)," "),l(),d("ngIf",t.dettagli==null||t.dettagli.items==null?null:t.dettagli.items.length)}}function ht(o,e){if(o&1){let t=C();n(0,"tr")(1,"td"),r(2),a(),n(3,"td"),r(4),a(),n(5,"td"),_(6,_t,2,1,"ng-container",14)(7,vt,3,2,"ng-container",14),a(),n(8,"td"),r(9),F(10,"number"),a(),n(11,"td"),r(12),F(13,"date"),a(),n(14,"td"),r(15),a(),n(16,"td",23)(17,"button",24),I("click",function(){let s=f(t).$implicit,c=m(3);return v(c.toggleCompletata(s))}),n(18,"div",25),r(19),a()(),n(20,"button",26),I("click",function(){let s=f(t).$implicit,c=m(3);return v(c.openEdit(s))}),n(21,"i",25),r(22,"edit"),a()(),n(23,"button",27),I("click",function(){let s=f(t).$implicit,c=m(3);return v(c.delete(s))}),n(24,"i",25),r(25,"delete"),a()()()()}if(o&2){let t=e.$implicit,i=m(3);l(2),g(t.numero||"\u2014"),l(2),g(t.tipo),l(2),d("ngIf",t.tipo==="attiva"),l(),d("ngIf",t.tipo==="passiva"),l(2),E("",w(10,12,t.importo,"1.2-2")," \u20AC"),l(3),g(w(13,15,t.data_emissione,"dd/MM/yyyy HH:mm")),l(3),E(" ",i.userService.getFullName(t.created_by)||(i.userService.usersMap[t.created_by]?i.userService.usersMap[t.created_by].first_name+" "+i.userService.usersMap[t.created_by].last_name:null)||t.created_by||"\u2014"," "),l(2),d("title",$(t.tipo==="attiva"?"Segna come eseguita":"Segna come saldata")),l(2),g(t.completata?"check_box":"check_box_outline_blank"),l(),d("disabled",!i.canEdit(t)),l(3),d("disabled",!i.canEdit(t))}}function xt(o,e){if(o&1&&(n(0,"table",20)(1,"thead")(2,"tr")(3,"th"),r(4,"Numero"),a(),n(5,"th"),r(6,"Tipo"),a(),n(7,"th"),r(8,"Soggetto / Fornitore"),a(),n(9,"th"),r(10,"Importo"),a(),n(11,"th"),r(12,"Data"),a(),n(13,"th"),r(14,"Creato da"),a(),n(15,"th",21),r(16,"Azioni"),a()()(),n(17,"tbody"),_(18,ht,26,18,"tr",22),a()()),o&2){let t=m(2);l(18),d("ngForOf",t.nonCompletate)}}function bt(o,e){o&1&&(n(0,"div",31),r(1,"Nessuna fattura trovata."),a())}function St(o,e){if(o&1&&(n(0,"div",18),_(1,xt,19,1,"table",19)(2,bt,2,0,"div",13),a()),o&2){let t=m();l(),d("ngIf",t.fatture.length),l(),d("ngIf",!t.fatture.length)}}function yt(o,e){if(o&1&&(n(0,"option",47),r(1),a()),o&2){let t=e.$implicit;d("ngValue",t.id),l(),g(t.label)}}function It(o,e){o&1&&(n(0,"div",50),r(1," Seleziona un cliente (obbligatorio). "),a())}function Et(o,e){if(o&1){let t=C();n(0,"div")(1,"label",33),r(2,"Cliente"),a(),n(3,"select",46),T("ngModelChange",function(s){f(t);let c=m(2);return z(c.editing.soggetto_id,s)||(c.editing.soggetto_id=s),v(s)}),n(4,"option",47),r(5,"\u2014"),a(),_(6,yt,2,2,"option",48),a(),_(7,It,2,0,"div",49),a()}if(o&2){let t=m(2);l(3),M("ngModel",t.editing.soggetto_id),l(),d("ngValue",null),l(2),d("ngForOf",t.clients),l(),d("ngIf",t.editing&&t.editing.tipo==="attiva"&&!t.editing.soggetto_id)}}function Ft(o,e){if(o&1&&(n(0,"option",47),r(1),a()),o&2){let t=e.$implicit;d("ngValue",t.id),l(),g(t.label)}}function wt(o,e){if(o&1){let t=C();n(0,"div")(1,"label",33),r(2,"Fornitore"),a(),n(3,"select",51),T("ngModelChange",function(s){f(t);let c=m(2);return z(c.editing.fornitore_id,s)||(c.editing.fornitore_id=s),v(s)}),n(4,"option",47),r(5,"\u2014"),a(),_(6,Ft,2,2,"option",48),a()()}if(o&2){let t=m(2);l(3),M("ngModel",t.editing.fornitore_id),l(),d("ngValue",null),l(2),d("ngForOf",t.fornitori)}}function Ct(o,e){if(o&1){let t=C();n(0,"tr")(1,"td")(2,"input",52),T("ngModelChange",function(s){let c=f(t).index,u=m(2);return z(u.editingItems[c].descrizione,s)||(u.editingItems[c].descrizione=s),v(s)}),a()(),n(3,"td")(4,"input",53),T("ngModelChange",function(s){let c=f(t).index,u=m(2);return z(u.editingItems[c].importo,s)||(u.editingItems[c].importo=s),v(s)}),a()(),n(5,"td")(6,"input",54),T("ngModelChange",function(s){let c=f(t).index,u=m(2);return z(u.editingItems[c].quantita,s)||(u.editingItems[c].quantita=s),v(s)}),a()(),n(7,"td",55),r(8),F(9,"number"),a(),n(10,"td",56)(11,"button",57),I("click",function(){let s=f(t).index,c=m(2);return v(c.confirmRemoveItem(s))}),n(12,"i",25),r(13,"close"),a()()()()}if(o&2){let t=e.index,i=m(2);l(2),d("name",N("desc",t)),M("ngModel",i.editingItems[t].descrizione),l(2),d("name",N("imp",t)),M("ngModel",i.editingItems[t].importo),l(2),d("name",N("qta",t)),M("ngModel",i.editingItems[t].quantita),l(2),E(" ",w(9,10,(i.editingItems[t].importo||0)*(i.editingItems[t].quantita||1),"1.2-2")," \u20AC ")}}function kt(o,e){if(o&1){let t=C();n(0,"button",58),I("click",function(){f(t);let s=m(2);return v(s.save())}),r(1," Salva Fattura "),a()}if(o&2){let t=m(2);d("disabled",t.saving||(t.editing==null?null:t.editing.tipo)==="attiva"&&!(t.editing!=null&&t.editing.soggetto_id))}}function Mt(o,e){if(o&1){let t=C();n(0,"div",12)(1,"h3",3),r(2),a(),n(3,"div",32)(4,"div")(5,"label",33),r(6,"Tipo"),a(),n(7,"select",34),T("ngModelChange",function(s){f(t);let c=m();return z(c.editing.tipo,s)||(c.editing.tipo=s),v(s)}),n(8,"option",35),r(9,"Attiva"),a(),n(10,"option",36),r(11,"Passiva"),a()()(),_(12,Et,8,4,"div",14)(13,wt,7,3,"div",14),n(14,"div",37)(15,"label",33),r(16,"Articoli"),a(),n(17,"div",18)(18,"table",20)(19,"thead")(20,"tr")(21,"th"),r(22,"Descrizione"),a(),n(23,"th",38),r(24,"Importo"),a(),n(25,"th",39),r(26,"Qt\xE0"),a(),n(27,"th",38),r(28,"Totale"),a(),L(29,"th"),a()(),n(30,"tbody"),_(31,Ct,14,13,"tr",22),a()()(),n(32,"div",40)(33,"button",41),I("click",function(){f(t);let s=m();return v(s.addItem())}),r(34,"Aggiungi articolo"),a(),_(35,kt,2,1,"button",42),a(),n(36,"div",43)(37,"div")(38,"label",44),r(39,"Totale fattura"),a(),n(40,"div",45),r(41),F(42,"number"),a()()()()()()}if(o&2){let t=m();l(2),g(t.editing.id?"Modifica fattura":"Nuova fattura"),l(5),M("ngModel",t.editing.tipo),l(5),d("ngIf",t.editing.tipo==="attiva"),l(),d("ngIf",t.editing.tipo==="passiva"),l(18),d("ngForOf",t.editingItems),l(4),d("ngIf",t.showForm),l(6),E("",w(42,7,t.getInvoiceTotal(),"1.2-2")," \u20AC")}}function zt(o,e){o&1&&(n(0,"div",31),r(1,"Nessuna fattura completata."),a())}function Tt(o,e){if(o&1){let t=C();n(0,"tr")(1,"td"),r(2),a(),n(3,"td"),r(4),a(),n(5,"td"),r(6),a(),n(7,"td"),r(8),F(9,"number"),a(),n(10,"td"),r(11),F(12,"date"),a(),n(13,"td"),r(14),a(),n(15,"td",23)(16,"button",59),I("click",function(){let s=f(t).$implicit,c=m(2);return v(c.toggleCompletata(s))}),n(17,"div",25),r(18),a()(),n(19,"button",60),I("click",function(){let s=f(t).$implicit,c=m(2);return v(c.delete(s))}),n(20,"div",25),r(21,"delete"),a()()()()}if(o&2){let t=e.$implicit,i=m(2);l(2),g(t.numero||"\u2014"),l(2),g(t.tipo),l(2),g(i.getSoggettoLabel(t.soggetto_id)),l(2),E("",w(9,7,t.importo,"1.2-2")," \u20AC"),l(3),g(w(12,10,t.data_emissione,"dd/MM/yyyy HH:mm")),l(3),E(" ",i.userService.getFullName(t.created_by)||t.created_by||"\u2014"," "),l(4),g(t.completata?"check_box":"check_box_outline_blank")}}function Vt(o,e){if(o&1&&(n(0,"div")(1,"div",18)(2,"table",20)(3,"thead")(4,"tr")(5,"th"),r(6,"Numero"),a(),n(7,"th"),r(8,"Tipo"),a(),n(9,"th"),r(10,"Soggetto / Fornitore"),a(),n(11,"th"),r(12,"Importo"),a(),n(13,"th"),r(14,"Data"),a(),n(15,"th"),r(16,"Creato da"),a(),n(17,"th",21),r(18,"Azioni"),a()()(),n(19,"tbody"),_(20,Tt,22,13,"tr",22),a()()()()),o&2){let t=m();l(20),d("ngForOf",t.attiveEseguite)}}function Nt(o,e){if(o&1){let t=C();n(0,"tr")(1,"td"),r(2),a(),n(3,"td"),r(4),a(),n(5,"td"),r(6),F(7,"number"),a(),n(8,"td"),r(9),F(10,"date"),a(),n(11,"td")(12,"button",59),I("click",function(){let s=f(t).$implicit,c=m(2);return v(c.toggleCompletata(s))}),r(13,"Annulla"),a()()()}if(o&2){let t=e.$implicit,i=m(2);l(2),g(t.numero||"\u2014"),l(2),g(i.getFornitoreLabel(t.fornitore_id)),l(2),E("",w(7,4,t.importo,"1.2-2")," \u20AC"),l(3),g(w(10,7,t.data_emissione,"dd/MM/yyyy HH:mm"))}}function At(o,e){if(o&1&&(n(0,"div",61)(1,"h4"),r(2,"Fatture passive saldate"),a(),n(3,"table",20)(4,"tbody"),_(5,Nt,14,10,"tr",22),a()()()),o&2){let t=m();l(5),d("ngForOf",t.passiveSaldate)}}var lt=class o{constructor(e,t,i){this.supabaseService=e;this.userService=t;this.auth=i}loading=!1;saving=!1;message=null;fatture=[];editing=null;showForm=!1;clients=[];fornitori=[];clientsMap={};fornitoriMap={};editingItems=[];cdr=D(U);ngOnInit(){return k(this,null,function*(){this.loading=!0;try{yield this.auth.ensureAuthInitialized(),yield Promise.all([this.loadFatture(),this.loadSoggettiLists()])}catch(e){console.error("Errore init fatture",e),this.message="Errore caricamento"}finally{this.loading=!1,this.cdr.markForCheck()}})}loadFatture(){return k(this,null,function*(){try{let e=yield this.supabaseService.supabase.from("fatture").select("*").order("data_emissione",{ascending:!1});if(e.error)throw e.error;this.fatture=Array.isArray(e.data)?e.data:[];let t=Array.from(new Set(this.fatture.map(i=>i?.created_by).filter(i=>!!i)));if(t.length)try{let i=yield this.supabaseService.supabase.from("app_users").select("id, first_name, last_name").in("id",t);if(!i.error&&Array.isArray(i.data)){this.userService.usersMap=this.userService.usersMap||{};for(let s of i.data)this.userService.usersMap[s.id]={first_name:s.first_name??"",last_name:s.last_name??""}}}catch(i){console.warn("Impossibile caricare nomi utenti in batch",i)}}catch(e){console.error("Errore loadFatture",e),this.fatture=[],this.message="Errore caricamento fatture"}finally{this.cdr.markForCheck()}})}loadSoggettiLists(){return k(this,null,function*(){try{let e=yield this.supabaseService.supabase.from("soggetti").select("id, ragione_sociale, referente").eq("tipo","cliente").limit(1e3);e.error&&console.warn("Errore caricamento clienti",e.error),this.clients=(e.data||[]).map(i=>({id:i.id,label:i.ragione_sociale||i.referente||i.id})),this.clientsMap={};for(let i of this.clients)this.clientsMap[i.id]=i.label;let t=yield this.supabaseService.supabase.from("soggetti").select("id, ragione_sociale, referente").eq("tipo","fornitore").limit(1e3);t.error&&console.warn("Errore caricamento fornitori",t.error),this.fornitori=(t.data||[]).map(i=>({id:i.id,label:i.ragione_sociale||i.referente||i.id})),this.fornitoriMap={};for(let i of this.fornitori)this.fornitoriMap[i.id]=i.label}catch(e){console.error("Errore loadSoggettiLists",e),this.clients=[],this.fornitori=[],this.clientsMap={},this.fornitoriMap={}}finally{this.cdr.markForCheck()}})}openNew(e){this.editing={tipo:e,soggetto_id:null,fornitore_id:null,importo:0,descrizione:"",quantita:1,dettagli:null},this.editingItems=[{descrizione:"",importo:0,quantita:1}],this.showForm=!0}openEdit(e){this.editing=B({},e);let t=(e.dettagli&&(e.dettagli.items||e.dettagli))??[];Array.isArray(t)&&t.length?this.editingItems=t.map(i=>({descrizione:String(i.descrizione??i.name??""),importo:Number(i.importo??i.prezzo??i.price??0),quantita:Number(i.quantita??i.quantity??1)})):this.editingItems=[{descrizione:this.editing.descrizione??"",importo:Number(this.editing.importo??0),quantita:Number(this.editing.quantita??1)}],this.showForm=!0}closeForm(){this.editing=null,this.showForm=!1}save(){return k(this,null,function*(){let e=this.editing;if(e){if(e.tipo==="attiva"&&!e.soggetto_id){this.message="Impossibile salvare: seleziona un cliente per la fattura attiva.",this.cdr?.markForCheck?.();return}if(this.saving=!0,this.message=null,e.id&&!window.confirm("Confermi salvataggio modifiche alla fattura?")){this.saving=!1,this.cdr?.markForCheck?.();return}try{let t=new Date().toISOString();if(e.data_emissione||(e.data_emissione=t.split("T")[0]),!e.id){let h=new Date(e.data_emissione).getFullYear(),{data:b,error:p}=yield this.supabaseService.supabase.from("fatture").select("numero").not("numero","is",null).gte("data_emissione",`${h}-01-01`).lt("data_emissione",`${h+1}-01-01`);if(p)throw p;let y=0;(b||[]).forEach(ct=>{try{let mt=String(ct.numero||"").split("/")[0].replace(/\D/g,""),A=parseInt(mt||"0",10);!isNaN(A)&&A>y&&(y=A)}catch{}});let x=y+1,st=`${String(x).padStart(4,"0")}/${h}`;e.numero=st}let i=this.getInvoiceTotal(),s=(this.editingItems||[]).map(h=>String(h.descrizione||"")).filter(Boolean).join(" ; "),c=e.descrizione&&String(e.descrizione).trim()?String(e.descrizione).trim():s||null,u=new Date().toISOString(),S=null;if(e.data_emissione){let h=String(e.data_emissione);if(/^\d{4}-\d{2}-\d{2}$/.test(h)){let p=new Date().toTimeString().slice(0,8);S=new Date(`${h}T${p}`).toISOString()}else{let b=new Date(h);S=isNaN(b.getTime())?u:b.toISOString()}}else S=u;if(e.id){let h={tipo:e.tipo,soggetto_id:e.soggetto_id??null,fornitore_id:e.fornitore_id??null,configurazione_id:e.configurazione_id??null,numero:e.numero??null,data_emissione:S,importo:Number(i||0),descrizione:c,quantita:e.quantita??null,dettagli:{items:this.editingItems||[]},updated_at:u},{data:b,error:p}=yield this.supabaseService.update("fatture",e.id,h);if(p)throw p;let y=this.fatture.findIndex(x=>x.id===e.id);y>=0&&b&&(this.fatture[y]=b)}else{let h={tipo:e.tipo,soggetto_id:e.soggetto_id??null,fornitore_id:e.fornitore_id??null,configurazione_id:e.configurazione_id??null,numero:e.numero??null,data_emissione:S,importo:Number(i||0),descrizione:c,quantita:e.quantita??null,dettagli:{items:this.editingItems||[]},created_by:e.created_by??this.auth.getCurrentUserId?.()??null,created_at:u,updated_at:u},{data:b,error:p}=yield this.supabaseService.insert("fatture",h);if(p)throw p;b&&this.fatture.push(b)}this.message="Fattura salvata",this.closeForm()}catch(t){console.error("save fattura error",t),this.message="Errore salvataggio: "+(t?.message??String(t))}finally{this.saving=!1,this.cdr?.markForCheck?.()}}})}delete(e){return k(this,null,function*(){if(!(!e.id||!window.confirm("Confermi eliminazione fattura?")))try{let{error:i}=yield this.supabaseService.supabase.from("fatture").delete().eq("id",e.id);if(i)throw i;yield this.loadFatture()}catch(i){console.error("Errore delete fattura",i),this.message=i?.message??"Errore eliminazione"}finally{this.cdr.markForCheck()}})}createAutomaticInvoiceForConversion(e,t,i,s=null){return k(this,null,function*(){try{let c=this.auth.getCurrentUserId();if(!c)throw new Error("Utente non autenticato");let u=s;if(!u&&t){let p=yield this.supabaseService.supabase.from("configurazioni_promethea").select("id,dettagli,totale").eq("id",t).single();!p.error&&p.data&&(u=p.data.dettagli??{totale:p.data.totale})}let S=[];if(u){let p=[u.servizi,u.services,u.items,u.articoli,u.dettagli?.servizi,u.dettagli?.items].filter(Boolean),y=p.length?p[0]:null;Array.isArray(y)?S=y.map(x=>({descrizione:x.nome??x.title??x.descrizione??x.name??"Servizio",importo:Number(x.prezzo??x.price??x.importo??x.total??0),quantita:Number(x.quantita??x.quantity??1)})):S=[{descrizione:"Servizi configurazione",importo:i||Number(u.totale??u.total??0)||0,quantita:1}]}else S=[{descrizione:"Servizi configurazione",importo:i||0,quantita:1}];let h={tipo:"attiva",soggetto_id:e,configurazione_id:t,importo:S.reduce((p,y)=>p+Number(y.importo||0)*Number(y.quantita||1),0),descrizione:"Prima fattura automatica da conferma configurazione",quantita:1,dettagli:{items:S},created_by:c},{error:b}=yield this.supabaseService.supabase.from("fatture").insert(h);if(b){console.error("Errore createAutomaticInvoice",b);return}yield this.loadFatture()}catch(c){console.error("createAutomaticInvoiceForConversion error",c)}})}getSoggettoLabel(e){return e?this.clientsMap[e]??e:""}getFornitoreLabel(e){return e?this.fornitoriMap[e]??e:""}canEdit(e){let t=this.auth.getCurrentUserId();if(!t)return!1;let i=this.auth.isAdmin;if(typeof i=="function")try{if(i.call(this.auth,t))return!0}catch{}return e.created_by===t}addItem(){this.editingItems.push({descrizione:"",importo:0,quantita:1})}removeItem(e){e>=0&&e<this.editingItems.length&&this.editingItems.splice(e,1)}confirmRemoveItem(e){let t=this.editingItems?.[e],i=t?.descrizione?`"${t.descrizione}"`:`articolo #${e+1}`;window.confirm(`Sei sicuro di voler eliminare ${i}?`)&&this.removeItem(e)}getInvoiceTotal(){return(this.editingItems||[]).reduce((e,t)=>{let i=Number(t?.importo||0),s=Number(t?.quantita||1)||1;return e+i*s},0)}get nonCompletate(){return(this.fatture||[]).filter(e=>!e.completata)}get attiveNonEseguite(){return this.nonCompletate.filter(e=>e.tipo==="attiva")}get passiveNonSaldate(){return this.nonCompletate.filter(e=>e.tipo==="passiva")}get attiveEseguite(){return(this.fatture||[]).filter(e=>e.tipo==="attiva"&&!!e.completata)}get passiveSaldate(){return(this.fatture||[]).filter(e=>e.tipo==="passiva"&&!!e.completata)}toggleCompletata(e){return k(this,null,function*(){if(!e?.id)return;let t=!e.completata,i=new Date().toISOString();try{let{data:s,error:c}=yield this.supabaseService.update("fatture",e.id,{completata:t,updated_at:i});if(c)throw c;if(s){let u=this.fatture.findIndex(S=>S.id===e.id);u>=0&&(this.fatture[u]=s)}else e.completata=t;this.cdr?.markForCheck?.()}catch(s){console.error("toggleCompletata errore",s),this.message="Errore aggiornamento stato fattura",this.cdr?.markForCheck?.()}})}static \u0275fac=function(t){return new(t||o)(V(Y),V(K),V(J))};static \u0275cmp=W({type:o,selectors:[["app-fatture"]],decls:26,vars:7,consts:[[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"sottotitolo"],[1,"table-tools",2,"margin-left","auto"],[1,"promethea-button","outline",3,"click"],["class","status-message success",4,"ngIf"],["class","status-message loading",4,"ngIf"],[1,"form-section"],["class","table-container",4,"ngIf"],["class","form-section","style","margin-top:var(--gutter-lg);",4,"ngIf"],[1,"form-section",2,"margin-top","var(--gutter-lg)"],["class","empty-state",4,"ngIf"],[4,"ngIf"],["style","margin-top:var(--gutter-md)",4,"ngIf"],[1,"status-message","success"],[1,"status-message","loading"],[1,"table-container"],["class","crm-table",4,"ngIf"],[1,"crm-table"],[1,"actions-col"],[4,"ngFor","ngForOf"],[1,"actions-container"],[1,"action-btn",3,"click","title"],[1,"material-icons"],["title","Modifica",1,"action-btn","edit",3,"click","disabled"],["title","Elimina",1,"action-btn","delete",3,"click","disabled"],["class","small-muted",4,"ngIf"],[1,"small-muted"],[1,"compact-list"],[1,"empty-state"],[1,"grid-form",2,"margin-top","var(--gutter-sm)"],[1,"form-label"],["name","tipo",3,"ngModelChange","ngModel"],["value","attiva"],["value","passiva"],[1,"form-field-col-span"],[1,"small"],[1,"tiny"],[1,"actions-container",2,"margin-top","var(--gutter-lg)"],["type","button",1,"promethea-button",3,"click"],["type","button","class","promethea-button",3,"disabled","click",4,"ngIf"],[1,"form-field-col-span","actions-container",2,"margin-top","var(--gutter-lg)"],[1,"form-label",2,"font-size","var(--fs-md)"],[1,"form-value",2,"font-size","var(--fs-md)"],["name","soggetto",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","form-error","style","margin-top:6px;",4,"ngIf"],[1,"form-error",2,"margin-top","6px"],["name","fornitore",3,"ngModelChange","ngModel"],["type","text","placeholder","Descrizione",1,"input",3,"ngModelChange","ngModel","name"],["type","number","placeholder","Importo",1,"input","small",3,"ngModelChange","ngModel","name"],["type","number","min","1","placeholder","Qt\xE0",1,"input","tiny","count-input",3,"ngModelChange","ngModel","name"],[1,"text-right"],[1,"table-actions"],["type","button","title","Rimuovi articolo",1,"action-btn","delete",3,"click"],["type","button",1,"promethea-button",3,"click","disabled"],[1,"action-btn",3,"click"],[1,"action-btn","delete",3,"click"],[2,"margin-top","var(--gutter-md)"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"i",1),r(2,"receipt_long"),a(),n(3,"div",2)(4,"h2",3),r(5,"Fatture"),a(),n(6,"p",4),r(7,"Gestione fatture attive e passive"),a()(),n(8,"div",5)(9,"button",6),I("click",function(){return i.openNew("attiva")}),r(10,"Nuova fattura attiva"),a(),n(11,"button",6),I("click",function(){return i.openNew("passiva")}),r(12,"Nuova fattura passiva"),a()()(),_(13,ut,2,1,"div",7)(14,pt,2,0,"div",8),n(15,"div",9)(16,"h3",3),r(17,"Fatture da fare"),a(),_(18,St,3,2,"div",10),a(),_(19,Mt,43,10,"div",11),n(20,"div",12)(21,"h3",3),r(22,"Fatture eseguite"),a(),_(23,zt,2,0,"div",13)(24,Vt,21,1,"div",14)(25,At,6,1,"div",15),a()),t&2&&(l(13),d("ngIf",i.message),l(),d("ngIf",i.loading),l(4),d("ngIf",!i.loading),l(),d("ngIf",i.showForm&&i.editing),l(4),d("ngIf",i.attiveEseguite.length+i.passiveSaldate.length===0),l(),d("ngIf",i.attiveEseguite.length),l(),d("ngIf",i.passiveSaldate.length))},dependencies:[G,H,R,ot,nt,at,X,et,it,Z,rt,tt,Q,j],styles:["td[_ngcontent-%COMP%]{text-align:center}"]})};export{lt as Fatture};
