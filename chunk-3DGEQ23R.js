import{a as re}from"./chunk-RABAOIS3.js";import{a as ne}from"./chunk-QZTS6G3I.js";import{c as oe}from"./chunk-DS74SF54.js";import{a as te}from"./chunk-4JVSDGSA.js";import{a as ie}from"./chunk-3JNMOMUN.js";import{b as H,d as G,f as J,o as Q,p as X,u as Z}from"./chunk-RJG6IVUB.js";import{b as ee}from"./chunk-DJQTFFKQ.js";import{a as q}from"./chunk-KESXA3II.js";import{c as W}from"./chunk-2LFLHQ3L.js";import{d as $,e as Y,k as B,p as K,q as j}from"./chunk-CMIGMSNZ.js";import{A as T,Db as N,Ga as V,I as k,La as f,S as C,Va as O,Wa as p,X as u,Xa as i,Y as _,Ya as o,Za as x,bb as D,cb as A,ea as S,eb as v,f as E,hb as g,ib as m,jb as I,lb as w,nb as r,ob as b,pb as y,rb as z,sa as L,sb as F,tb as R,ua as s,wb as U,x as P,za as M}from"./chunk-54AF7LZE.js";import"./chunk-X5YLR3NI.js";import{i as h}from"./chunk-ODN5LVDJ.js";var le=()=>["/soggetto/nuovo"];function se(a,e){a&1&&(i(0,"a",43)(1,"span",22),r(2,"add_circle"),o()()),a&2&&p("routerLink",U(1,le))}function ce(a,e){if(a&1&&(i(0,"option",44),r(1),o()),a&2){let t=e.$implicit;p("value",t),s(),b(t)}}function de(a,e){if(a&1&&(i(0,"option",44),r(1),o()),a&2){let t=e.$implicit;p("value",t),s(),b(t)}}function pe(a,e){if(a&1&&(i(0,"span"),r(1),o()),a&2){let t=m().$implicit;s(),b(t.comune)}}function me(a,e){if(a&1&&(i(0,"span"),r(1),o()),a&2){let t=m().$implicit;s(),y(" (",t.provincia,")")}}function ue(a,e){a&1&&(i(0,"span",71),r(1," Nessun indirizzo "),o())}function _e(a,e){a&1&&(i(0,"span",72),r(1,"S\xEC"),o())}function ge(a,e){a&1&&(i(0,"span",73),r(1,"No"),o())}function fe(a,e){if(a&1&&(D(0),i(1,"span"),r(2),o(),A()),a&2){let t=e.ngIf;s(2),b(t.tipo)}}function ve(a,e){a&1&&r(0,"\u2014")}function he(a,e){if(a&1){let t=v();i(0,"button",74),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),_(c.vediConfigurazionePromethea(d))}),x(1,"img",75),o()}}function be(a,e){if(a&1){let t=v();i(0,"button",76),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),_(c.vediTrattativaYuvi(d))}),x(1,"img",77),o()}}function Ce(a,e){if(a&1){let t=v();i(0,"button",78),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),_(c.goToInformazioniTecniche(d))}),i(1,"span",22),r(2,"build"),o()()}}function xe(a,e){if(a&1){let t=v();i(0,"button",84),g("click",function(l){u(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.vediConfigurazionePromethea(d),_(c.closeAllDropdowns())}),x(1,"img",85),i(2,"span"),r(3,"Configura Promethea"),o()()}}function we(a,e){if(a&1){let t=v();i(0,"button",84),g("click",function(l){u(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.vediTrattativaYuvi(d),_(c.closeAllDropdowns())}),x(1,"img",86),i(2,"span"),r(3,"Trattativa YUVI"),o()()}}function Se(a,e){if(a&1){let t=v();i(0,"button",84),g("click",function(l){u(t);let d=m(2).$implicit,c=m();return l.stopPropagation(),c.goToInformazioniTecniche(d),_(c.closeAllDropdowns())}),i(1,"span",22),r(2,"build"),o(),i(3,"span"),r(4,"Informazioni Tecniche"),o()()}}function Ie(a,e){if(a&1){let t=v();i(0,"div",79)(1,"div",80),f(2,xe,4,0,"button",81)(3,we,4,0,"button",81)(4,Se,5,0,"button",81),i(5,"button",82),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.onEdit(d),_(c.closeAllDropdowns())}),i(6,"span",22),r(7,"edit"),o(),i(8,"span"),r(9,"Modifica"),o()(),i(10,"button",82),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.openEsito(d),_(c.closeAllDropdowns())}),i(11,"span",22),r(12,"add"),o(),i(13,"span"),r(14,"Aggiungi esito"),o()(),i(15,"button",83),g("click",function(l){u(t);let d=m().$implicit,c=m();return l.stopPropagation(),c.onDelete(d),_(c.closeAllDropdowns())}),i(16,"span",22),r(17,"delete"),o(),i(18,"span"),r(19,"Elimina"),o()()()()}if(a&2){let t=m().$implicit,n=m();s(2),p("ngIf",t.hasConfigPromethea),s(),p("ngIf",t.hasTrattativaYuvi),s(),p("ngIf",n.showInformazioniTecniche(t)),s(11),p("disabled",n.deletingIds.has(t.id))}}function ye(a,e){if(a&1){let t=v();i(0,"div",87),g("click",function(){u(t);let l=m(2);return _(l.closeAllDropdowns())}),o()}}function Ee(a,e){if(a&1){let t=v();i(0,"tr",45)(1,"td",46)(2,"div",47)(3,"strong",48),g("click",function(){let l=u(t).$implicit,d=m();return _(d.apriScheda(l))}),r(4),o()()(),i(5,"td",49)(6,"div",47),r(7),o()(),i(8,"td",50)(9,"div",47),r(10),o()(),i(11,"td",51)(12,"div",47),f(13,pe,2,1,"span",39)(14,me,2,1,"span",39)(15,ue,2,0,"span",52),o()(),i(16,"td",53)(17,"div",47)(18,"select",54,3),g("change",function(){let l=u(t).$implicit,d=I(19),c=m();return _(c.onChangeProdotto(l,d.value))}),i(20,"option",55),r(21,"Promethea"),o(),i(22,"option",56),r(23,"YUVI"),o()()()(),i(24,"td",57)(25,"div",47),f(26,_e,2,0,"span",58)(27,ge,2,0,"span",59),o()(),i(28,"td",60)(29,"div",47),f(30,fe,3,1,"ng-container",61)(31,ve,1,0,"ng-template",null,4,N),o()(),i(33,"td",62)(34,"div",63),f(35,he,2,0,"button",64)(36,be,2,0,"button",65)(37,Ce,3,0,"button",66),i(38,"div",67)(39,"button",68),g("click",function(l){let d=u(t).$implicit,c=m();return l.stopPropagation(),_(c.toggleActionsDropdown(d.id,l))}),i(40,"span",22),r(41,"more_vert"),o()(),f(42,Ie,20,4,"div",69)(43,ye,1,0,"div",70),o()()()()}if(a&2){let t=e.$implicit,n=I(32),l=m();O("data-row-id",t.id),s(4),b(t.ragione_sociale),s(3),b(t.referente||"\u2014"),s(3),b(t.telefono||"\u2014"),s(3),p("ngIf",t.comune),s(),p("ngIf",t.provincia),s(),p("ngIf",!t.comune&&!t.provincia),s(3),p("value",t.prodotto)("disabled",l.updatingProdottoIds.has(t.id)),s(8),p("ngIf",t.configurato),s(),p("ngIf",!t.configurato),s(3),p("ngIf",t.ultimoEsito)("ngIfElse",n),s(5),p("ngIf",t.hasConfigPromethea),s(),p("ngIf",t.hasTrattativaYuvi),s(),p("ngIf",l.showInformazioniTecniche(t)),s(),w("open",l.activeDropdownId===t.id),s(4),p("ngIf",l.activeDropdownId===t.id),s(),p("ngIf",l.activeDropdownId===t.id)}}function Pe(a,e){if(a&1&&(i(0,"tr")(1,"td",88),r(2),o()()),a&2){let t=m();s(2),y(" ",t.searchTerm?"Nessun cliente trovato":"Nessun cliente"," ")}}function Te(a,e){a&1&&(i(0,"span",22),r(1,"unfold_more"),o())}function ke(a,e){a&1&&(i(0,"span",22),r(1,"hourglass_bottom"),o())}function Le(a,e){if(a&1){let t=v();i(0,"div",89)(1,"button",90),g("click",function(){u(t);let l=m();return _(l.caricaTutti())}),f(2,Te,2,0,"span",91)(3,ke,2,0,"span",91),r(4),o()()}if(a&2){let t=m();s(),p("disabled",t.loading()),s(),p("ngIf",!t.loading()),s(),p("ngIf",t.loading()),s(),y(" ",t.loading()?"Caricamento\u2026":"Carica tutti"," ")}}function Me(a,e){if(a&1&&(i(0,"div",92),r(1),o()),a&2){let t=m();s(),y(" ",t.error()," ")}}var ae=class a{listaService=C(ne);soggettiService=C(ee);kpiService=C(ie);authService=C(W);router=C(K);userService=C(q);searchSubject=new E;destroy$=new E;rows=this.listaService.rows;filteredRows=this.listaService.filteredRows;loading=this.listaService.loading;error=this.listaService.error;hasMore=this.listaService.hasMore;currentFiltri=this.listaService.currentFiltri;userModuli=S([]);isUserAdmin=S(!1);province=S([]);kpi=S({totale:0,conIban:0,conReferente:0});deletingIds=new Set;showEsito=!1;selectedId=null;updatingProdottoIds=new Set;activeDropdownId=null;esitiTipi=oe;searchTerm="";filtroConIban=!1;filtroConReferente=!1;isLoading=S(!0);renderer=C(M);clickListener;constructor(){this.searchSubject.pipe(k(this.destroy$),P(300),T()).subscribe(e=>{this.onSearchExecuted(e)})}ngOnInit(){return h(this,null,function*(){this.listaService.inizializza({tipo:"cliente",abilitaConfigurazioni:!0,abilitaTrattative:!0});try{yield Promise.all([this.listaService.caricaIniziali(),this.loadProvince(),this.refreshKpi(),this.loadUserData()])}finally{setTimeout(()=>{this.isLoading.set(!1)},300)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUserData(){return h(this,null,function*(){try{let e=this.authService.user();if(!e)return;let t=yield this.soggettiService.supabaseService.isAdmin();this.isUserAdmin.set(t);let{data:n}=yield this.soggettiService.supabaseService.getAppUserById(e.id);n&&n.moduli&&this.userModuli.set(n.moduli)}catch(e){console.error("Errore nel caricamento dati utente:",e)}})}caricaTutti(){return h(this,null,function*(){yield this.listaService.caricaTutti()})}allLoaded(){return this.listaService.allLoaded()}onSearchExecuted(e){return h(this,null,function*(){yield this.listaService.cerca(e)})}onSearchChange(e){this.searchTerm=e,this.searchSubject.next(e)}onChangeFiltroEsito(e){this.listaService.applicaFiltri({esito:e,conIban:this.filtroConIban,conReferente:this.filtroConReferente})}onChangeFiltroProvincia(e){this.listaService.applicaFiltri({provincia:e})}onChangeSortDir(e){this.listaService.applicaFiltri({sortDir:e})}onFiltroTotale(){this.filtroConIban=!1,this.filtroConReferente=!1,this.listaService.applicaFiltri({esito:"tutti",provincia:"tutte",conIban:!1,conReferente:!1})}onFiltroConIban(){this.filtroConIban=!0,this.filtroConReferente=!1,this.listaService.applicaFiltri({esito:"tutti",conIban:!0,conReferente:!1})}onFiltroConReferente(){this.filtroConIban=!1,this.filtroConReferente=!0,this.listaService.applicaFiltri({esito:"tutti",conIban:!1,conReferente:!0})}vediConfigurazionePromethea(e){this.router.navigate(["/alchemizzatore"],{queryParams:{prospectId:e.id,step:6},state:{prospect:e,goToStep:6,from:"lista-clienti"}})}vediTrattativaYuvi(e){return h(this,null,function*(){try{let{data:t,error:n}=yield this.soggettiService.supabaseService.supabase.from("trattative_yuvi").select("*").eq("prospect_id",e.id).order("created_at",{ascending:!1}).limit(1).single();if(n)throw n;if(!t){alert("Nessuna trattativa YUVI trovata per questo cliente");return}this.router.navigate(["/yuvi-trattativa"],{queryParams:{clienteId:e.id,trattativaId:t.id},state:{cliente:e,trattativaEsistente:t}})}catch(t){alert("Errore nel caricamento della trattativa: "+t.message)}})}onDelete(e){return h(this,null,function*(){if(!(!e?.id||!confirm(`Eliminare il cliente "${e.ragione_sociale}"?`))){this.deletingIds.add(e.id);try{(yield this.listaService.eliminaSoggetto(e.id))&&(yield this.refreshKpi())}catch(n){console.error("Errore durante l'eliminazione:",n)}finally{this.deletingIds.delete(e.id)}}})}onEdit(e){e?.id&&this.router.navigate(["/soggetto",e.id,"edit"])}openEsito(e){this.selectedId=e.id,this.showEsito=!0}apriScheda(e){e?.id&&this.router.navigate(["/soggetto",e.id])}onPopupClosed(e){return h(this,null,function*(){this.showEsito=!1,this.selectedId=null,e.saved&&(yield Promise.all([this.listaService.caricaTutti(),this.refreshKpi()]))})}onChangeProdotto(e,t){return h(this,null,function*(){if(!e?.id)return;let n=t;if(e.prodotto!==n){this.updatingProdottoIds.add(e.id);try{yield this.listaService.aggiornaProdotto(e.id,n)}catch(l){console.error("Errore durante l'aggiornamento del prodotto:",l)}finally{this.updatingProdottoIds.delete(e.id)}}})}showInformazioniTecniche(e){if(!e.moduliAttivi||e.moduliAttivi.length===0)return!1;if(this.isUserAdmin())return!0;let t=this.userModuli();return e.moduliAttivi.some(n=>t.includes(n))}getModuloDaAprire(e){let t=this.userModuli(),n=e.moduliAttivi||[];return this.isUserAdmin()?n[0]||"social":n.find(d=>t.includes(d))||"social"}goToInformazioniTecniche(e){if(!e.id){console.error("Cliente senza ID:",e);return}console.log("Navigando a informazioni tecniche per cliente:",e.id),this.router.navigate(["/informazioni-tecniche"],{queryParams:{clienteId:e.id}})}isAdmin(){return this.userService.isAdmin()}trackById=(e,t)=>t.id;toggleActionsDropdown(e,t){t&&t.stopPropagation();let n=this.activeDropdownId===e;this.activeDropdownId=n?null:e,this.activeDropdownId?(this.clickListener=this.renderer.listen("document","click",l=>{l.target.closest(".actions-dropdown")||this.closeAllDropdowns()}),document.body.classList.add("dropdown-open")):this.closeAllDropdowns()}closeAllDropdowns(){this.activeDropdownId=null,document.body.classList.remove("dropdown-open"),this.clickListener&&(this.clickListener(),this.clickListener=void 0)}onWindowScroll(){this.activeDropdownId&&this.closeAllDropdowns()}loadProvince(){return h(this,null,function*(){let{data:e}=yield this.soggettiService.getProvinceByTipo("cliente");e&&this.province.set(e)})}refreshKpi(){return h(this,null,function*(){try{let e=yield this.kpiService.getAnagraficaKPI("cliente");this.kpi.set({totale:e.totale,conIban:e.conIban,conReferente:e.conReferente})}catch(e){console.error("Errore nel caricamento KPI:",e)}})}getLastEsito(e){return!Array.isArray(e)||e.length===0?null:e.reduce((t,n)=>{let l=new Date(n.ts).getTime(),d=new Date(t.ts).getTime();return l>d?n:t})}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=V({type:a,selectors:[["app-lista-clienti"]],hostBindings:function(t,n){t&1&&g("scroll",function(){return n.onWindowScroll()},L)},decls:96,vars:29,consts:[["filtroSel",""],["ordinaSel",""],["provSel",""],["sel",""],["noEsito",""],["title","Caricamento Clienti","subtitle","Stiamo caricando i tuoi clienti...",3,"isLoading"],[1,"form-section"],[1,"section-header"],[1,"material-icons","header-icon"],[1,"section-titles"],[1,"section-title"],[1,"sottotitolo"],[1,"flex-1"],["class","icon-btn","title","Aggiungi cliente","aria-label","Aggiungi cliente",3,"routerLink",4,"ngIf"],[1,"prospect-cards"],[1,"card",3,"click"],[1,"card-title"],[1,"card-number"],[1,"table-section"],[1,"table-tools"],[1,"tool"],["for","search",1,"label"],[1,"material-icons"],["id","search","type","text","placeholder","Nome, telefono, email...",1,"table-inline-input",3,"ngModelChange","ngModel"],["for","filtroEsito",1,"label"],["id","filtroEsito",1,"table-inline-select",3,"change","value"],["value","tutti"],["value","senza-esito"],[3,"value",4,"ngFor","ngForOf"],["for","ordinaPer",1,"label"],["id","ordinaPer",1,"table-inline-select",3,"change","value"],["value","desc"],["value","asc"],["for","filtroProvincia",1,"label"],["id","filtroProvincia",1,"table-inline-select",3,"change","value"],["value","tutte"],[1,"table-container"],[1,"crm-table"],["class","row-clickable",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","load-more-container",4,"ngIf"],["style","text-align:center; color:#ef4444; margin-top:1rem;",4,"ngIf"],[3,"closed","open","soggettoId","tipo"],["title","Aggiungi cliente","aria-label","Aggiungi cliente",1,"icon-btn",3,"routerLink"],[3,"value"],[1,"row-clickable"],["data-label","Ragione Sociale"],[1,"cell-content"],[1,"link",3,"click"],["data-label","Referente"],["data-label","Telefono"],["data-label","Localit\xE0"],["style","color: #6b7280; font-style: italic;",4,"ngIf"],["data-label","Prodotto"],[1,"table-inline-select",3,"change","value","disabled"],["value","Promethea"],["value","YUVI"],["data-label","Configurato"],["class","badge badge-success",4,"ngIf"],["class","badge badge-danger",4,"ngIf"],["data-label","Ultimo Esito"],[4,"ngIf","ngIfElse"],["data-label","Azioni"],[1,"actions-container"],["class","action-btn document","title","Configurazione Promethea",3,"click",4,"ngIf"],["class","action-btn email","title","Trattativa YUVI",3,"click",4,"ngIf"],["class","action-btn info-tecniche","title","Informazioni Tecniche",3,"click",4,"ngIf"],[1,"actions-dropdown"],["title","Altre azioni",1,"action-btn",3,"click"],["class","modal",4,"ngIf"],["class","mobile-dropdown-backdrop",3,"click",4,"ngIf"],[2,"color","#6b7280","font-style","italic"],[1,"badge","badge-success"],[1,"badge","badge-danger"],["title","Configurazione Promethea",1,"action-btn","document",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img"],["title","Trattativa YUVI",1,"action-btn","email",3,"click"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img"],["title","Informazioni Tecniche",1,"action-btn","info-tecniche",3,"click"],[1,"modal"],[1,"modal-body",2,"padding","0"],["class","dropdown-item mobile-only",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"dropdown-item",3,"click","disabled"],[1,"dropdown-item","mobile-only",3,"click"],["src","assets/Logo.png","alt","Promethea",1,"icon-img",2,"width","16px","height","16px"],["src","assets/yuvi.png","alt","YUVI",1,"icon-img",2,"width","16px","height","16px"],[1,"mobile-dropdown-backdrop",3,"click"],["colspan","8",2,"text-align","center","padding","1.5rem"],[1,"load-more-container"],[1,"promethea-button",3,"click","disabled"],["class","material-icons",4,"ngIf"],[2,"text-align","center","color","#ef4444","margin-top","1rem"]],template:function(t,n){if(t&1){let l=v();x(0,"app-page-loader",5),i(1,"div")(2,"div",6)(3,"div",7)(4,"i",8),r(5,"business"),o(),i(6,"div",9)(7,"h2",10),r(8,"Clienti"),o(),i(9,"p",11),r(10,"Panoramica clienti e filtri rapidi"),o()(),x(11,"div",12),f(12,se,3,2,"a",13),o(),i(13,"div",14)(14,"div",15),g("click",function(){return u(l),_(n.onFiltroTotale())}),i(15,"h3",16),r(16,"Totale"),o(),i(17,"div",17),r(18),o()(),i(19,"div",15),g("click",function(){return u(l),_(n.onFiltroConIban())}),i(20,"h3",16),r(21,"Con IBAN"),o(),i(22,"div",17),r(23),o()(),i(24,"div",15),g("click",function(){return u(l),_(n.onFiltroConReferente())}),i(25,"h3",16),r(26,"Con Referente"),o(),i(27,"div",17),r(28),o()()()(),i(29,"section",18)(30,"div",19)(31,"div",20)(32,"label",21)(33,"span",22),r(34,"search"),o(),r(35," Cerca "),o(),i(36,"input",23),R("ngModelChange",function(c){return u(l),F(n.searchTerm,c)||(n.searchTerm=c),_(c)}),g("ngModelChange",function(c){return u(l),_(n.onSearchChange(c))}),o()(),i(37,"div",20)(38,"label",24)(39,"span",22),r(40,"filter_list"),o(),r(41," Ultimo esito "),o(),i(42,"select",25,0),g("change",function(){u(l);let c=I(43);return _(n.onChangeFiltroEsito(c.value))}),i(44,"option",26),r(45,"Tutti"),o(),i(46,"option",27),r(47,"Senza esito"),o(),f(48,ce,2,2,"option",28),o()(),i(49,"div",20)(50,"label",29)(51,"span",22),r(52,"sort"),o(),r(53," Ordina per: "),o(),i(54,"select",30,1),g("change",function(){u(l);let c=I(55);return _(n.onChangeSortDir(c.value))}),i(56,"option",31),r(57,"Pi\xF9 recente"),o(),i(58,"option",32),r(59,"Meno recente"),o()()(),i(60,"div",20)(61,"label",33)(62,"span",22),r(63,"place"),o(),r(64," Provincia "),o(),i(65,"select",34,2),g("change",function(){u(l);let c=I(66);return _(n.onChangeFiltroProvincia(c.value))}),i(67,"option",35),r(68,"Tutte"),o(),f(69,de,2,2,"option",28),o()()(),i(70,"div",36)(71,"table",37)(72,"thead")(73,"tr")(74,"th"),r(75,"Ragione Sociale"),o(),i(76,"th"),r(77,"Referente"),o(),i(78,"th"),r(79,"Telefono"),o(),i(80,"th"),r(81,"Localit\xE0"),o(),i(82,"th"),r(83,"Prodotto"),o(),i(84,"th"),r(85,"Configurato"),o(),i(86,"th"),r(87,"Ultimo Esito"),o(),i(88,"th"),r(89,"Azioni"),o()()(),i(90,"tbody"),f(91,Ee,44,20,"tr",38)(92,Pe,3,1,"tr",39),o()()(),f(93,Le,5,4,"div",40)(94,Me,2,1,"div",41),o(),i(95,"app-esito-popup",42),g("closed",function(c){return u(l),_(n.onPopupClosed(c))}),o()()}t&2&&(p("isLoading",n.isLoading()),s(),w("hidden",n.isLoading()),s(11),p("ngIf",n.isAdmin()),s(2),w("card-active",n.currentFiltri().esito==="tutti"&&n.currentFiltri().provincia==="tutte"&&!n.currentFiltri().conIban&&!n.currentFiltri().conReferente),s(4),b(n.kpi().totale),s(),w("card-active",n.currentFiltri().conIban),s(4),b(n.kpi().conIban),s(),w("card-active",n.currentFiltri().conReferente),s(4),b(n.kpi().conReferente),s(8),z("ngModel",n.searchTerm),s(6),p("value",n.currentFiltri().esito),s(6),p("ngForOf",n.esitiTipi),s(6),p("value",n.currentFiltri().sortDir),s(11),p("value",n.currentFiltri().provincia),s(4),p("ngForOf",n.province()),s(),w("dropdown-open",!!n.activeDropdownId),s(21),p("ngForOf",n.filteredRows())("ngForTrackBy",n.trackById),s(),p("ngIf",!n.loading()&&!n.error()&&n.filteredRows().length===0),s(),p("ngIf",!n.error()&&n.hasMore()),s(),p("ngIf",n.error()),s(),p("open",n.showEsito)("soggettoId",n.selectedId)("tipo","cliente"))},dependencies:[B,$,Y,re,Z,Q,X,H,G,J,te,j],styles:['.actions-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-flex}.actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;width:200px;z-index:1000;border:1px solid var(--smoke-color-1);border-radius:12px;box-shadow:0 8px 24px var(--shadow);background:var(--background);animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.dropdown-item[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:var(--gutter-sm);padding:.75rem 1rem;border:none;background:transparent;color:var(--text-color);cursor:pointer;transition:background .15s ease;font-size:var(--fs-sm);text-align:left;border-bottom:1px solid var(--smoke-color-1)}.dropdown-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background:var(--smoke-color-2)}.dropdown-item[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.dropdown-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:1.1rem;width:20px}.dropdown-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:transparent;z-index:999;display:none}.actions-dropdown.open[_ngcontent-%COMP%] ~ .dropdown-overlay[_ngcontent-%COMP%]{display:block}@container (max-width: 768px){.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.actions-dropdown){display:none}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .dropdown-item[style*="display: none"][_ngcontent-%COMP%]{display:flex!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown.open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{position:fixed!important;inset:50% auto auto 50%!important;transform:translate(-50%,-50%)!important;width:min(90vw,300px)!important;max-height:70vh!important;overflow-y:auto!important;z-index:1001!important;border-radius:16px!important;box-shadow:0 20px 40px var(--shadow)!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-dropdown[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:3rem!important;height:3rem!important;font-size:1.3rem!important}.crm-table[_ngcontent-%COMP%]   td[data-label=Azioni][_ngcontent-%COMP%]   .actions-container[_ngcontent-%COMP%]{justify-content:center!important;padding:var(--gutter-sm) 0}}@container (min-width: 769px){.actions-dropdown[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{min-width:180px}.actions-dropdown.left[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{right:auto;left:0}.actions-dropdown.top[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{top:auto;bottom:100%}}.table-container[_ngcontent-%COMP%]{overflow-x:auto;position:relative}body.dropdown-open[_ngcontent-%COMP%]{overflow:hidden}.mobile-dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:color-mix(in srgb,var(--text-color) 20%,transparent);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);z-index:998;display:none}.actions-dropdown.open[_ngcontent-%COMP%] ~ .mobile-dropdown-backdrop[_ngcontent-%COMP%]{display:block}']})};export{ae as ListaClienti};
